<!DOCTYPE html>



























































































<html>
<head>


<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width" />

<meta name="Description" content="API Level: targetSdkVersion to &quot;minSdkVersion . To learn more about maintaining backward compatibility, read Supporting Different Platform Versions . For more information about how API levels work, read What is API Level? If you have previously published…">
<link rel="shortcut icon" type="image/x-icon" href="../../favicon.ico" />
<title>Android 5.0 APIs | Android Developers</title>

<!-- STYLESHEETS -->
<link rel="stylesheet"
href="http://fonts.useso.com/css?family=Roboto+Condensed">
<link rel="stylesheet" href="http://fonts.useso.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold"
  title="roboto">
<link href="../../assets/css/default.css?v=5" rel="stylesheet" type="text/css">



<!-- JAVASCRIPT -->
<script src="../../assets/js/android_3p-bundle.js" type="text/javascript"></script>
<script type="text/javascript">
  var toRoot = "../../";
  var metaTags = [];
  var devsite = false;
</script>
<script src="../../assets/js/docs.js?v=3" type="text/javascript"></script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//../../../ajax/www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5831155-1', 'android.com');
  ga('create', 'UA-49880327-2', 'android.com', {'name': 'universal'});  // New tracker);
  ga('send', 'pageview');
  ga('universal.send', 'pageview'); // Send page view for new tracker.
</script>

</head>

<body class="gc-documentation

about" itemscope itemtype="http://schema.org/Article">

<a name="top"></a>

<!-- dialog to prompt lang pref change when loaded from hardcoded URL 
<div id="langMessage" style="display:none">
  <div>
    <div class="lang en">
      <p>You requested a page in English, would you like to proceed with this language setting?</p>
    </div>
    <div class="lang es">
      <p>You requested a page in Spanish (Español), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang ja">
      <p>You requested a page in Japanese (日本語), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang ko">
      <p>You requested a page in Korean (한국어), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang ru">
      <p>You requested a page in Russian (Русский), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang zh-cn">
      <p>You requested a page in Simplified Chinese (简体中文), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang zh-tw">
      <p>You requested a page in Traditional Chinese (繁體中文), would you like to proceed with this language setting?</p>
    </div>
    <a href="#" class="button yes" onclick="return false;">
      <span class="lang en">Yes</span>
      <span class="lang es">Sí</span>
      <span class="lang ja">Yes</span>
      <span class="lang ko">Yes</span>
      <span class="lang ru">Yes</span>
      <span class="lang zh-cn">是的</span>
      <span class="lang zh-tw">没有</span>
    </a>
    <a href="#" class="button" onclick="$('#langMessage').hide();return false;">
      <span class="lang en">No</span>
      <span class="lang es">No</span>
      <span class="lang ja">No</span>
      <span class="lang ko">No</span>
      <span class="lang ru">No</span>
      <span class="lang zh-cn">没有</span>
      <span class="lang zh-tw">没有</span>
    </a>
  </div>
</div> -->


  <!-- Header -->
  <div id="header-wrapper">
    <div id="header">

    


      <div class="wrap" id="header-wrap">
        <div class="col-3 logo">
          <a href="../../index.html">
            <img src="../../assets/images/dac_logo.png"
                srcset="../../assets/images/dac_logo@2x.png 2x"
                width="123" height="25" alt="Android Developers" />
          </a>
          <div class="btn-quicknav" id="btn-quicknav">
            <a href="#" class="arrow-inactive">Quicknav</a>
            <a href="#" class="arrow-active">Quicknav</a>
          </div>
        </div>
        <ul class="nav-x col-9">
            <li class="design">
              <a href="../../design/index.html"
              zh-tw-lang="設計"
              zh-cn-lang="设计"
              ru-lang="Проектирование"
              ko-lang="디자인"
              ja-lang="設計"
              es-lang="Diseñar"
              >Design</a></li>
            <li class="develop"><a href="../../develop/index.html"
              zh-tw-lang="開發"
              zh-cn-lang="开发"
              ru-lang="Разработка"
              ko-lang="개발"
              ja-lang="開発"
              es-lang="Desarrollar"
              >Develop</a></li>
            <li class="distribute last"><a href="../../distribute/googleplay/index.html"
              zh-tw-lang="發佈"
              zh-cn-lang="分发"
              ru-lang="Распространение"
              ko-lang="배포"
              ja-lang="配布"
              es-lang="Distribuir"
              >Distribute</a></li>
        </ul>


        
        
<div class="menu-container">
  <div class="moremenu">
    <div id="more-btn"></div>
  </div>
  <div class="morehover" id="moremenu">
    <div class="top"></div>
    <div class="mid">
      <div class="header">Links</div>
      <ul>
        <li><a href="https://play.google.com/apps/publish/" target="_googleplay">Google Play Developer Console</a></li>
        <li><a href="http://android-developers.blogspot.com/">Android Developers Blog</a></li>
        <li><a href="../../about/index.html">About Android</a></li>
      </ul>
      <div class="header">Android Sites</div>
      <ul>
        <li><a href="http://www.android.com">Android.com</a></li>
        <li class="active"><a>Android Developers</a></li>
        <li><a href="http://source.android.com">Android Open Source Project</a></li>
      </ul>

      
      
      
      <br class="clearfix" />
    </div><!-- end 'mid' -->
    <div class="bottom"></div>
  </div><!-- end 'moremenu' -->

  <div class="search" id="search-container">
    <div class="search-inner">
      <div id="search-btn"></div>
      <div class="left"></div>
      <form onsubmit="return submit_search()">
        <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q"
          onfocus="search_focus_changed(this, true)" onblur="search_focus_changed(this, false)"
          onkeydown="return search_changed(event, true, '../../')"
          onkeyup="return search_changed(event, false, '../../')" />
      </form>
      <div class="right"></div>
      <a class="close hide">close</a>
      <div class="left"></div>
      <div class="right"></div>
    </div><!-- end search-inner -->
  </div><!-- end search-container -->

  <div class="search_filtered_wrapper reference">
    <div class="suggest-card reference no-display">
      <ul class="search_filtered">
      </ul>
    </div>
  </div>

  <div class="search_filtered_wrapper docs">
    <div class="suggest-card dummy no-display">&nbsp;</div>
    <div class="suggest-card develop no-display">
      <ul class="search_filtered">
      </ul>
      <div class="child-card guides no-display">
      </div>
      <div class="child-card training no-display">
      </div>
      <div class="child-card samples no-display">
      </div>
    </div>
    <div class="suggest-card design no-display">
      <ul class="search_filtered">
      </ul>
    </div>
    <div class="suggest-card distribute no-display">
      <ul class="search_filtered">
      </ul>
    </div>
  </div>
</div><!-- end menu-container (search and menu widget) -->



        <!-- Expanded quicknav -->
        <div id="quicknav" class="col-13">
          <ul>
            <li class="about">
              <ul>
                <li><a href="../../about/index.html">About</a></li>
                <li><a href="../../wear/index.html">Wear</a></li>
                <li><a href="../../tv/index.html">TV</a></li>
                <li><a href="../../auto/index.html">Auto</a></li>
              </ul>
            </li>
            <li class="design">
              <ul>
                <li><a href="../../design/index.html">Get Started</a></li>
                <li><a href="../../design/devices.html">Devices</a></li>
                <li><a href="../../design/style/index.html">Style</a></li>
                <li><a href="../../design/patterns/index.html">Patterns</a></li>
                <li><a href="../../design/building-blocks/index.html">Building Blocks</a></li>
                <li><a href="../../design/downloads/index.html">Downloads</a></li>
                <li><a href="../../design/videos/index.html">Videos</a></li>
              </ul>
            </li>
            <li class="develop">
              <ul>
                <li><a href="../../training/index.html"
                  zh-tw-lang="訓練課程"
                  zh-cn-lang="培训"
                  ru-lang="Курсы"
                  ko-lang="교육"
                  ja-lang="トレーニング"
                  es-lang="Capacitación"
                  >Training</a></li>
                <li><a href="../../guide/index.html"
                  zh-tw-lang="API 指南"
                  zh-cn-lang="API 指南"
                  ru-lang="Руководства по API"
                  ko-lang="API 가이드"
                  ja-lang="API ガイド"
                  es-lang="Guías de la API"
                  >API Guides</a></li>
                <li><a href="../../reference/packages.html"
                  zh-tw-lang="參考資源"
                  zh-cn-lang="参考"
                  ru-lang="Справочник"
                  ko-lang="참조문서"
                  ja-lang="リファレンス"
                  es-lang="Referencia"
                  >Reference</a></li>
                <li><a href="../../sdk/index.html"
                  zh-tw-lang="相關工具"
                  zh-cn-lang="工具"
                  ru-lang="Инструменты"
                  ko-lang="도구"
                  ja-lang="ツール"
                  es-lang="Herramientas"
                  >Tools</a>
                </li>
                <li><a href="../../google/index.html">Google Services</a>
                </li>
                
              </ul>
            </li>
            <li class="distribute last">
              <ul>
                <li><a href="../../distribute/googleplay/index.html">Google Play</a></li>
                <li><a href="../../distribute/essentials/index.html">Essentials</a></li>
                <li><a href="../../distribute/users/index.html">Get Users</a></li>
                <li><a href="../../distribute/engage/index.html">Engage &amp; Retain</a></li>
                <li><a href="../../distribute/monetize/index.html">Monetize</a></li>
                <li><a href="../../distribute/analyze/index.html">Analyze</a></li>
                <li><a href="../../distribute/tools/index.html">Tools &amp; Reference</a></li>
                <li><a href="../../distribute/stories/index.html">Developer Stories</a></li>
              </ul>
            </li>
          </ul>
        </div><!-- /Expanded quicknav -->
      </div><!-- end header-wrap.wrap -->
    </div><!-- end header -->

  
    <!-- Secondary x-nav -->
    <div id="nav-x">
        <div class="wrap">
            <ul class="nav-x col-9 about" style="width:100%">
                <li class="about"><a href="../../about/index.html"
                  >About</a></li>
                <li class="wear"><a href="../../wear/index.html"
                  >Wear</a></li>
                <li class="tv"><a href="../../tv/index.html"
                  >TV</a></li>
                <li class="auto"><a href="../../auto/index.html"
                  >Auto</a></li>
            </ul>
        </div>
    </div>
    <!-- /Sendondary x-nav ABOUT -->



  

    <div id="searchResults" class="wrap" style="display:none;">
      <h2 id="searchTitle">Results</h2>
      <div id="leftSearchControl" class="search-control">Loading...</div>
    </div>
  </div> <!--end header-wrapper -->

  <div id="sticky-header">
    <div>
      <a class="logo" href="#top"></a>
      <a class="top" href="#top"></a>
      <ul class="breadcrumb">
        
        <li class="current">Android 5.0 APIs</li>
      </ul>
    </div>
  </div>




  <div class="wrap clearfix" id="body-content">
    <div class="col-3" id="side-nav" itemscope itemtype="http://schema.org/SiteNavigationElement">
      <div id="devdoc-nav" class="scroll-pane">

<ul id="nav">

<li class="nav-section">
    <div class="nav-section-header"><a href="../../about/index.html">Welcome</a></div>
    <ul>
      <li><a href="../../about/start.html">Get Started</a></li>
    </ul>
  </li>
  <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/lollipop.html"
              zh-tw-lang="Lollipop"
              zh-cn-lang="Lollipop"
              ru-lang="Lollipop"
              ko-lang="Lollipop"
              ja-lang="Lollipop"
              es-lang="Lollipop">
      <span class="en">Lollipop</span></a></div>
      <ul>
        <li><a href="../../about/versions/android-5.0.html"
              zh-tw-lang="Android 5.0 API"
              zh-cn-lang="Android 5.0 API"
              ru-lang="API для Android 5.0"
              ko-lang="Android 5.0 API"
              ja-lang="Android 5.0 API"
              es-lang="API de Android 5.0">
              Android 5.0 APIs</a></li>
        <li><a href="../../about/versions/android-5.0-changes.html">

        Android 5.0 Changes</a></li>
      </ul>
  </li>
  <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/kitkat.html">
      <span class="en">KitKat</span></a></div>
      <ul>
        <li><a href="../../about/versions/android-4.4.html">Android 4.4 APIs</a></li>
      </ul>
  </li>
  <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/jelly-bean.html">
      <span class="en">Jelly Bean</span></a></div>
      <ul>
        <li><a href="../../about/versions/android-4.3.html">Android 4.3 APIs</a></li>
        <li><a href="../../about/versions/android-4.2.html">Android 4.2 APIs</a></li>
        <li><a href="../../about/versions/android-4.1.html">Android 4.1 APIs</a></li>
      </ul>
  </li>

  <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/android-4.0-highlights.html">
      <span class="en">Ice Cream Sandwich</span></a></div>
      <ul>
        <li><a href="../../about/versions/android-4.0.3.html">Android 4.0.3 APIs</a></li>
        <li><a href="../../about/versions/android-4.0.html">Android 4.0 APIs</a> </li>
      </ul>
  </li>
  <li class="nav-section">
    <div class="nav-section-header empty"><a href="../../about/dashboards/index.html">Dashboards</a></div>
  </li>

</ul>
        

      </div>
    </div> <!-- end side-nav -->
    <script>
      $(document).ready(function() {
        scrollIntoView("devdoc-nav");
        });
    </script>




<div class="col-13" id="doc-col" >


  

  
    
      
        <h1 itemprop="name" >Android 5.0 APIs</h1>
      
    
  


  
  <div id="jd-content">


    <div class="jd-descr" itemprop="articleBody">
    <div id="qv-wrapper">
<div id="qv">

<h2>In this document
    <a href="#" onclick="hideNestedItems('#toc44',this);return false;" class="header-toggle">
        <span class="more">show more</span>
        <span class="less" style="display:none">show less</span></a></h2>

<ol id="toc44" class="hide-nested">
  <li><a href="#ApiLevel">Update your target API level</a></li>




  <li><a href="#UI">User Interface</a>
    <ol>
      <li><a href="#MaterialDesign">Material design support</a></li>
      <li><a href="#Recents">Concurrent documents and activities in the recents screen</a></li>
      <li><a href="#WebView">WebView updates</a></li>
      <li><a href="#ScreenCapture">Screen capturing and sharing</a></li>
    </ol>
  </li>
  <li><a href="#Notifications">Notifications</a>
    <ol>
      <li><a href="#LockscreenNotifications">Lock screen notifications</a></li>
      <li><a href="#NotificationsMetadata">Notifications metadata</a></li>
    </ol>
  </li>
  <li><a href="#Graphics">Graphics</a>
    <ol>
      <li><a href="#OpenGLES-3-1">Support for OpenGL ES 3.1</a></li>
      <li><a href="#AndroidExtensionPack">Android Extension Pack</a></li>
    </ol>
  </li>
  <li><a href="#Media">Media</a>
    <ol>
      <li><a href="#Camera-v2">Camera API for advanced camera capabilities</a></li>
      <li><a href="#AudioPlayback">Audio playback</a></li>
      <li><a href="#MediaPlaybackControl">Media playback control</a></li>
      <li><a href="#MediaBrowsing">Media browsing</a></li>
    </ol>
  </li>
  <li><a href="#Storage">Storage</a>
    <ol>
      <li><a href="#DirectorySelection">Directory selection</a></li>
    </ol>
  </li>
  <li><a href="#Wireless">Wireless and Connectivity</a>
    <ol>
      <li><a href="#Multinetwork">Multiple network connections</a></li>
      <li><a href="#BluetoothBroadcasting">Bluetooth broadcasting</a></li>
      <li><a href="#NFCEnhancements">NFC enhancements</a></li>
    </ol>
  </li>
  <li><a href="#Power">Project Volta</a>
    <ol>
      <li><a href="#JobScheduler">Scheduling jobs</a></li>
      <li><a href="#PowerMeasurementTools">Developer tools for battery usage</a>
    </ol>
  </li>
  <li><a href="#Enterprise">Android in the Workplace and in Education</a>
    <ol>
      <li><a href="#ManagedProvisioning">Managed provisioning</a></li>
      <li><a href="#DeviceOwner">Device owner</a></li>
      <li><a href="#ScreenPinning">Screen pinning</a></li>
    </ol>
  </li>
  <li><a href="#System">System</a>
    <ol>
      <li><a href="#AppUsageStatistics">App usage statistics</a></li>
    </ol>
  </li>
  <li><a href="#Printing">Printing Framework</a>
    <ol>
      <li><a href="#PDFRender">Render PDF as bitmap</a></li>
    </ol>
  </li>
  <li><a href="#TestingA11y">Testing &amp; Accessibility</a>
    <ol>
      <li><a href="#TestingA11yImprovements">Testing and accessibility improvements</a></li>
    </ol>
  </li>
  <li><a href="#IME">IME</a>
    <ol>
      <li><a href="#Switching">Easier switching between input languages</a></li>
    </ol>
  </li>
  <li><a href="#Manifest">Manifest Declarations</a>
    <ol>
      <li><a href="#ManifestFeatures">Declarable required features</a></li>
      <li><a href="#Permissions">User permissions</a></li>
    </ol>
  </li>
</ol>

<h2>API Differences</h2>
<ol>
<li><a href="../../sdk/api_diff/21/changes.html">API level 20 to 21 &raquo;</a> </li>
<li><a href="../../sdk/api_diff/preview-21/changes.html">L Developer Preview to 21 &raquo;</a> </li>
</ol>

<h2>See Also</h2>
<ol>
<li><a href="../../about/versions/android-5.0-changes.html">Android 5.0 Behavior Changes</a> </li>
<li><a href="../../about/versions/lollipop.html">Android Lollipop Highlights</a> </li>
</ol>


</div>
</div>

<p>API Level: 21</p>

<p>Android 5.0 (<a href="../../reference/android/os/Build.VERSION_CODES.html#LOLLIPOP">LOLLIPOP</a>)
  offers new features for users and app developers. This document provides an
  introduction to the most notable new APIs.</p>

<p>
  If you have a published app, make sure to check out the <a href=
  "../../about/versions/android-5.0-changes.html">Android 5.0 Behavior
  Changes</a> that you should account for in your app. These behavior changes
  may affect your app on Android 5.0 devices, even if you are not using new APIs
  or targeting new functionality.
</p>

<p>For a high-level look at the new platform features, instead
see the
<a href="../../about/versions/lollipop.html">Android Lollipop
highlights</a>.</p>

<h3 id="Start">Start developing</h3>

<p>To start building apps for Android 5.0, you must first <a href="../../sdk/index.html">get
the Android SDK</a>. Then use the <a href="../../tools/help/sdk-manager.html">SDK Manager</a>
to download the Android 5.0 SDK Platform and System Images.</p>


<h3 id="ApiLevel">Update your target API level</h3>

<p>To better optimize your app for devices running Android 5.0,
  set your <a
href="../../guide/topics/manifest/uses-sdk-element.html#target"><code>targetSdkVersion</code></a> to
<code>"21"</code>, install your app on an Android
5.0 system image, test it, then publish the updated app with
this change.</p>

<p>You can use Android 5.0 APIs while also supporting older
versions by adding conditions to your code that check for the system API level
before executing APIs not supported by your <a
href="../../guide/topics/manifest/uses-sdk-element.html#min"><code>minSdkVersion</code></a>.
To learn more about maintaining backward compatibility, read <a
href="../../training/basics/supporting-devices/platforms.html">Supporting
Different Platform Versions</a>.</p>

<p>For more information about how API levels work, read <a
href="../../guide/topics/manifest/uses-sdk-element.html#ApiLevels">What is API
Level?</a></p>

<h3 id="Behaviors">Important behavior changes</h3>

<p>If you have previously published an app for Android, be aware that your app might be affected by changes in Android 5.0.</p>

<p>Please see <a href="../../about/versions/android-5.0-changes.html">Android 5.0 Changes</a> for complete information.</p>


<h2 id="UI">User Interface</h2>

<h3 id="MaterialDesign">Material design support</h3>

<p>Android 5.0 adds support for Android's new <em>material design</em>
style. You can create apps with material design that are visually dynamic and
have UI element transitions that feel natural to users. This support includes:</p>

<ul>

  <li>The material theme</li>
  <li>View shadows</li>
  <li>The <code><a href="../../reference/android/support/v7/widget/RecyclerView.html">RecyclerView</a></code> widget</li>
  <li>Drawable animation and styling effects</li>
  <li>Material design animation and activity transition effects</li>
  <li>Animators for view properties based on the state of the view</li>
  <li>Customizable UI widgets and app bars with color palettes that you control</li>
  <li>Animated and non-animated drawables based on XML vector graphics</li>
</ul>

<p>To learn more about adding material design functionality to your app, see
<a href="../../training/material/index.html">Material Design</a>.</p>

<h3 id="Recents">Concurrent documents and activities in the recents screen</h3>

<p>In previous releases, the
<a href="../../guide/components/recents.html">recents screen</a>
could only display only one task for each app that the user interacted with
most recently. Now your app can open more tasks as needed for additional
concurrent activities for documents. This feature facilitates multitasking by
letting users quickly switch between individual activities and documents from
the recents screen, with a consistent switching experience across all apps.
Examples of such concurrent tasks might include open tabs in a web
browser app, documents in a productivity app, concurrent matches in
a game, or chats in a messaging app. Your app can manage its tasks
through the <code><a href="../../reference/android/app/ActivityManager.AppTask.html">ActivityManager.AppTask</a></code> class.</p>

<p>To insert a logical break so that the system treats your activity as a new
task, use <code><a href="../../reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_DOCUMENT">FLAG_ACTIVITY_NEW_DOCUMENT</a></code> when
launching the activity with <code><a href="../../reference/android/app/Activity.html#startActivity(android.content.Intent)">startActivity()</a></code>. You can also get this behavior by setting the
<a href="../../guide/topics/manifest/activity-element.html">&lt;activity&gt;</a>
element's <code>documentLaunchMode</code> attribute to <code>"intoExisting"</code> or
<code>"always"</code> in your manifest.</p>

<p>To avoid cluttering the recents screen, you can set the maximum number of
tasks from your app that can appear in that screen. To do this, set the
<a href="../../guide/topics/manifest/application-element.html">&lt;application&gt;</a>
attribute <code><a href="../../reference/android/R.attr.html#maxRecents">android:maxRecents</a></code>. The current
maximum that can be specified is 50 tasks per user (25 for low RAM devices).</a></p>

<p>Tasks in the recents screen can be set to persist across reboots. To control
the persistence behavior, use the
<a href="../../reference/android/R.attr.html#persistableMode">android:persistableMode</a>
attribute. You can also change
the visual properties of an activity in the recents screen, such as the
activity’s color, label, and icon, by calling the
<code><a href="../../reference/android/app/Activity.html#setTaskDescription(android.app.ActivityManager.TaskDescription)">setTaskDescription()</a></code>
method.</p>

<h3 id="WebView">WebView updates</h3>
<p>Android 5.0 updates the <code><a href="../../reference/android/webkit/WebView.html">WebView</a></code>
implementation to Chromium M37, bringing security and stability enhancements,
as well as bug fixes. The default user-agent string for a
<code><a href="../../reference/android/webkit/WebView.html">WebView</a></code> running on Android 5.0 has
been updated to incorporate 37.0.0.0 as the version number.</p>

<p>This release introduces the <code><a href="../../reference/android/webkit/PermissionRequest.html">PermissionRequest</a></code> class,
which allows your app to grant the <code><a href="../../reference/android/webkit/WebView.html">WebView</a></code> permission
to access protected resources like the camera and microphone, through web APIs
such as <a href="https://developer.mozilla.org/en-US/docs/NavigatorUserMedia.getUserMedia"
class="external-link">getUserMedia()</a>. Your app must have the appropriate
Android permissions for these resources in order to grant the permissions to the
<code><a href="../../reference/android/webkit/WebView.html">WebView</a></code>.</p>

<p>With the new <code><a href="../../reference/android/webkit/WebChromeClient.html#onShowFileChooser(android.webkit.WebView, android.webkit.ValueCallback<android.net.Uri[]>, android.webkit.WebChromeClient.FileChooserParams)">onShowFileChooser()</a></code> method,
you can now use an input form field in the <code><a href="../../reference/android/webkit/WebView.html">WebView</a></code>,
and launch a file chooser to select images and files from the Android device.</p>

<p>Additionally, this release brings support for the
<a href="http://webaudio.github.io/web-audio-api/" class="external-link">WebAudio</a>,
<a href="https://www.khronos.org/webgl/" class="external-link">WebGL</a>, and
<a href="http://www.webrtc.org/" class="external-link">WebRTC</a> open standards.
To learn more about the new features included in this release, see
<a href="https://developer.chrome.com/multidevice/webview/overview"
class="external-link">WebView for Android</a>.</p>

<h3 id="ScreenCapture">Screen capturing and sharing</h3>
<p>Android 5.0 lets you add screen capturing and screen sharing capabilities to
your app with the new <code><a href="../../reference/android/media/projection/package-summary.html">android.media.projection</a></code> APIs. This functionality
is useful, for example, if you want to enable screen sharing in a video
conferencing app.</p>

<p>The new <code><a href="../../reference/android/media/projection/MediaProjection.html#createVirtualDisplay(java.lang.String, int, int, int, int, android.view.Surface, android.hardware.display.VirtualDisplay.Callback, android.os.Handler)">createVirtualDisplay()</a></code> method
allows your app to capture the contents of the main screen (the default
display) into a <code><a href="../../reference/android/view/Surface.html">Surface</a></code> object, which your app can then
send across the network. The API only allows capturing non-secure screen
content, and not system audio. To begin screen capturing, your app must first
request the user’s permission by launching a screen capture dialog using an
<code><a href="../../reference/android/content/Intent.html">Intent</a></code> obtained through the
<code><a href="../../reference/android/media/projection/MediaProjectionManager.html#createScreenCaptureIntent()">createScreenCaptureIntent()</a></code>
method.</p>

<p>For an example of how to use the new APIs, see the <code>MediaProjectionDemo</code>
class in the sample project.</p>

<h2 id="Notifications">Notifications</h2>

<h3 id="LockscreenNotifications">Lock screen notifications</h3>
<p>Lock screens in Android 5.0 have the ability to present
notifications. Users can choose via <em>Settings</em> whether to allow
sensitive notification content to be shown over a secure lock screen.</p>

<p>Your app can control the level of detail visible when its notifications are
displayed over the secure lock screen. To control the visibility level, call
<code><a href="../../reference/android/app/Notification.Builder.html#setVisibility(int)">setVisibility()</a></code> and
specify one of these values:</p>

<ul>
<li><code><a href="../../reference/android/app/Notification.html#VISIBILITY_PRIVATE">VISIBILITY_PRIVATE</a></code>:
Shows basic information, such as the notification’s icon, but hides the
notification’s full content.</li>
<li><code><a href="../../reference/android/app/Notification.html#VISIBILITY_PUBLIC">VISIBILITY_PUBLIC</a></code>:
Shows the notification’s full content.</li>
<li><code><a href="../../reference/android/app/Notification.html#VISIBILITY_SECRET">VISIBILITY_SECRET</a></code>:
Shows nothing, excluding even the notification’s icon.</li>
</ul>

<p>When the visibility level is <code><a href="../../reference/android/app/Notification.html#VISIBILITY_PRIVATE">VISIBILITY_PRIVATE</a></code>,
  you can also provide a redacted version of the notification
content that hides personal details. For example, an SMS app might display a
notification that shows "You have 3 new text messages" but hides the message
content and senders. To provide this alternative notification, first create the
replacement notification using <code><a href="../../reference/android/app/Notification.Builder.html">Notification.Builder</a></code>. When
you create the private notification object, attach the replacement notification
to it through the
<code><a href="../../reference/android/app/Notification.Builder.html#setPublicVersion(android.app.Notification)">setPublicVersion()</a></code> method.</p>

<h3 id="NotificationsMetadata">Notifications metadata</h3>
<p>Android 5.0 uses metadata associated with your app notifications
to sort the notifications more intelligently. To set the metadata, call the
following methods in <code><a href="../../reference/android/app/Notification.Builder.html">Notification.Builder</a></code> when you
construct the notification:</p>

<ul>
<li><code><a href="../../reference/android/app/Notification.Builder.html#setCategory(java.lang.String)">setCategory()</a></code>: Tells the system how to handle your app notifications when the
  device is in <em>priority</em> mode (for example, if a notification represents an
incoming call, instant message, or alarm).
<li><code><a href="../../reference/android/app/Notification.Builder.html#setPriority(int)">setPriority()</a></code>:
  Marks the notification as more or less important than normal notifications.
  Notifications with the priority field set to
  <code><a href="../../reference/android/app/Notification.html#PRIORITY_MAX">PRIORITY_MAX</a></code> or
<code><a href="../../reference/android/app/Notification.html#PRIORITY_HIGH">PRIORITY_HIGH</a></code> appear in a
small floating window if the notification also has sound or vibration.</li>
<li><code><a href="../../reference/android/app/Notification.Builder.html#addPerson(java.lang.String)">addPerson()</a></code>: Enables you to add one or more people who are relevant to a notification.
Your app can use this to signal to the system that it should group together
notifications from the specified people, or rank notifications from these people
as being more important.</li>
</ul>

<h2 id="Graphics">Graphics</h2>

<h3 id="OpenGLES-3-1">Support for OpenGL ES 3.1</h3>
<p>Android 5.0 adds Java interfaces and native support for OpenGL
ES 3.1. Key new functionality provided in OpenGL ES 3.1 includes:</p>

<ul>
<li>Compute shaders
<li>Separate shader objects
<li>Indirect draw commands
<li>Multisample and stencil textures
<li>Shading language improvements
<li>Extensions for advanced blend modes and debugging
<li>Backward compatibility with OpenGL ES 2.0 and 3.0
</ul>

<p>The Java interface for OpenGL ES 3.1 on Android is provided with
  <code><a href="../../reference/android/opengl/GLES31.html">GLES31</a></code>. When using OpenGL ES 3.1, be sure that you
  declare it in your manifest file with the
  <a href="../../guide/topics/manifest/uses-feature-element.html"><code>&lt;uses-feature&gt;</code></a> tag and the <code>android:glEsVersion</code> attribute. For example:</p>

<pre>
&lt;manifest&gt;
    &lt;uses-feature android:glEsVersion="0x00030001" /&gt;
    ...
&lt;/manifest&gt;
</pre>

<p>For more information about using OpenGL ES, including how to check the
device’s supported OpenGL ES version at runtime, see the
<a href="../../guide/topics/graphics/opengl.html">OpenGL ES API guide</a>.</p>

<h3 id="AndroidExtensionPack">Android Extension Pack</h3>

<p>In addition to OpenGL ES 3.1, this release provides an extension pack with
Java interfaces and native support for advanced graphics functionality. These
extensions are treated as a single package by Android. (If the
<code>ANDROID_extension_pack_es31a</code> extension is present, your app can
assume all extensions in the package are present and enable the shading language
features with a single <code>#extension</code> statement.)</p>

<p>The extension pack supports:</p>

<ul>
<li>Guaranteed fragment shader support for shader storage buffers, images, and
  atomics (Fragment shader support is optional in OpenGL ES 3.1.)</li>
<li>Tessellation and geometry shaders</li>
<li>ASTC (LDR) texture compression format</li>
<li>Per-sample interpolation and shading</li>
<li>Different blend modes for each color attachment in a frame buffer</li>
</ul>

<p>The Java interface for the extension pack is provided with
  <code><a href="../../reference/android/opengl/GLES31Ext.html">GLES31Ext</a></code>. In your app manifest, you can declare that
  your app must be installed only on devices that support the extension pack.
  For example:</p>

<pre>
&lt;manifest&gt;
    &lt;uses-feature android:name=“android.hardware.opengles.aep”
        android:required="true" /&gt;
    ...
&lt;/manifest&gt;
</pre>

<h2 id="Media">Media</h2>

<h3 id="Camera-v2">Camera API for advanced camera capabilities</h3>

<p>Android 5.0 introduces the new
<a href="../../reference/android/hardware/camera2/package-summary.html">android.hardware.camera2</a>
API to facilitate fine-grain photo capture and image processing. You can now
programmatically access the camera devices available to the system with
<code><a href="../../reference/android/hardware/camera2/CameraManager.html#getCameraIdList()">getCameraIdList()</a></code>
and connect to a specific device with
<code><a href="../../reference/android/hardware/camera2/CameraManager.html#openCamera(java.lang.String, android.hardware.camera2.CameraDevice.StateCallback, android.os.Handler)">openCamera()</a></code>.
To start capturing images, create a <code><a href="../../reference/android/hardware/camera2/CameraCaptureSession.html">CameraCaptureSession</a></code>
and specify the <code><a href="../../reference/android/view/Surface.html">Surface</a></code> objects to send captured images.
The <code><a href="../../reference/android/hardware/camera2/CameraCaptureSession.html">CameraCaptureSession</a></code> can be configured to
take single shots or multiple images in a burst.</p>

<p>To be notified when new images are captured, implement the
<code><a href="../../reference/android/hardware/camera2/CameraCaptureSession.CaptureCallback.html">CameraCaptureSession.CaptureCallback</a></code> listener
and set it in your capture request. Now when the system completes the image
capture request, your <code><a href="../../reference/android/hardware/camera2/CameraCaptureSession.CaptureCallback.html">CameraCaptureSession.CaptureCallback</a></code>
listener receives a call to
<code><a href="../../reference/android/hardware/camera2/CameraCaptureSession.CaptureCallback.html#onCaptureCompleted(android.hardware.camera2.CameraCaptureSession, android.hardware.camera2.CaptureRequest, android.hardware.camera2.TotalCaptureResult)">onCaptureCompleted()</a></code>,
providing you with the image capture metadata in a
<code><a href="../../reference/android/hardware/camera2/CaptureResult.html">CaptureResult</a></code>.</p>

<p>The <code><a href="../../reference/android/hardware/camera2/CameraCharacteristics.html">CameraCharacteristics</a></code> class lets your
app detect what camera features are available on a device. The object's
<code><a href="../../reference/android/hardware/camera2/CameraCharacteristics.html#INFO_SUPPORTED_HARDWARE_LEVEL">INFO_SUPPORTED_HARDWARE_LEVEL</a></code> property represents the camera's level of functionality.</p>

<ul>
  <li>All devices support at least the
<code><a href="../../reference/android/hardware/camera2/CameraMetadata.html#INFO_SUPPORTED_HARDWARE_LEVEL_LEGACY">INFO_SUPPORTED_HARDWARE_LEVEL_LEGACY</a></code> hardware level, which has capabilities
  roughly equivalent to that of the deprecated <code><a href="../../reference/android/hardware/Camera.html">Camera</a></code>
  API.</li>
  <li>Devices that support the <code><a href="../../reference/android/hardware/camera2/CameraMetadata.html#INFO_SUPPORTED_HARDWARE_LEVEL_FULL">INFO_SUPPORTED_HARDWARE_LEVEL_FULL</a></code> hardware level are capable of manual
    control of capture and post-processing, and capturing high-resolution images
    at high frame rates.</li>
</ul>

<p>To see how to use the updated
<a href="../../reference/android/hardware/camera2/package-summary.html">Camera</a>
API, refer to the <code>Camera2Basic</code> and <code>Camera2Video</code> implementation
samples in this release.</p>

<h3 id="AudioPlayback">Audio playback</h3>
<p>This release includes the following changes to
  <code><a href="../../reference/android/media/AudioTrack.html">AudioTrack</a></code>:</p>
<ul>
  <li>Your app can now supply audio data in floating-point format
(<code><a href="../../reference/android/media/AudioFormat.html#ENCODING_PCM_FLOAT">ENCODING_PCM_FLOAT</a></code>). This
permits greater dynamic range, more consistent precision, and greater headroom.
Floating-point arithmetic is especially useful during intermediate calculations.
Playback endpoints use integer format for audio data, and with lower bit depth.
(In Android 5.0, portions of the internal pipeline are not yet
floating point.)
  <li>Your app can now supply audio data as a <code><a href="../../reference/java/nio/ByteBuffer.html">ByteBuffer</a></code>, in
the same format as provided by <code><a href="../../reference/android/media/MediaCodec.html">MediaCodec</a></code>.
  <li>The <code><a href="../../reference/android/media/AudioTrack.html#WRITE_NON_BLOCKING">WRITE_NON_BLOCKING</a></code>
option can simplify buffering and multithreading for some apps.
</ul>

<h3 id="MediaPlaybackControl">Media playback control</h3>
<p>Use the new notification and media APIs to ensure that the
system UI knows about your media playback and can extract and show album art.
Controlling media playback across a UI and a service is now easier with the new
<code><a href="../../reference/android/media/session/MediaSession.html">MediaSession</a></code> and
<code><a href="../../reference/android/media/session/MediaController.html">MediaController</a></code> classes.</p>

<p>The new <code><a href="../../reference/android/media/session/MediaSession.html">MediaSession</a></code> class replaces
the deprecated <code><a href="../../reference/android/media/RemoteControlClient.html">RemoteControlClient</a></code> class and provides a
single set of callback methods for handling transport controls and media buttons.
If your app provides media playback and runs on the Android
<a href="../../tv/index.html">TV</a> or
<a href="../../wear/index.html">Wear</a> platform, use the
<code><a href="../../reference/android/media/session/MediaSession.html">MediaSession</a></code> class to handle your transport
controls using the same callback methods.</p>

<p>You can now build your own media controller app with the new
<code><a href="../../reference/android/media/session/MediaController.html">MediaController</a></code> class. This class provides
a thread-safe way to monitor and control media playback from your app's UI process.
When creating a controller, specify a <code><a href="../../reference/android/media/session/MediaSession.Token.html">MediaSession.Token</a></code>
object so that your app can interact with the given <code><a href="../../reference/android/media/session/MediaSession.html">MediaSession</a></code>.
By using the <code><a href="../../reference/android/media/session/MediaController.TransportControls.html">MediaController.TransportControls</a></code> methods,
you can send commands such as <code><a href="../../reference/android/media/session/MediaController.TransportControls.html#play()">play()</a></code>,
<code><a href="../../reference/android/media/session/MediaController.TransportControls.html#stop()">stop()</a></code>,
<code><a href="../../reference/android/media/session/MediaController.TransportControls.html#skipToNext()">skipToNext()</a></code>,
and <code><a href="../../reference/android/media/session/MediaController.TransportControls.html#setRating(android.media.Rating)">setRating()</a></code>
to control media playback on that session. With the controller, you can also
register a <code><a href="../../reference/android/media/session/MediaController.Callback.html">MediaController.Callback</a></code> object to
listen for metadata and state changes on the session.</p>

<p>In addition, you can create rich notifications that allow playback control
tied to a media session with the new <code><a href="../../reference/android/app/Notification.MediaStyle.html">Notification.MediaStyle</a></code>
class.</p>

<h3 id="MediaBrowsing">Media browsing</h3>
<p>Android 5.0 introduces the ability for apps to browse the media content
  library of another app, through the new
  <a href="../../reference/android/media/browse/package-summary.html">android.media.browse</a>
  API. To expose the media content in your app, extend the
<code><a href="../../reference/android/service/media/MediaBrowserService.html">MediaBrowserService</a></code> class. Your implementation of
<code><a href="../../reference/android/service/media/MediaBrowserService.html">MediaBrowserService</a></code> should provide access to a
<code><a href="../../reference/android/media/session/MediaSession.Token.html">MediaSession.Token</a></code> so that apps can play media content
provided through your service.</p>
<p>To interact with a media browser service, use the
  <code><a href="../../reference/android/media/browse/MediaBrowser.html">MediaBrowser</a></code> class. Specify the component
  name for a <code><a href="../../reference/android/media/session/MediaSession.html">MediaSession</a></code> when you create an
  <code><a href="../../reference/android/media/browse/MediaBrowser.html">MediaBrowser</a></code> instance. Using that browser instance,
  your app can then connect to the associated service and obtain a
  <code><a href="../../reference/android/media/session/MediaSession.Token.html">MediaSession.Token</a></code> object to play content exposed
  through that service.</p>

<h2 id="Storage">Storage</h2>

<h3 id="DirectorySelection">Directory selection</h3>

<p>Android 5.0 extends the
  <a href="../../guide/topics/providers/document-provider.html">Storage Access Framework</a>
to let users select an entire directory subtree, giving apps read/write access
to all contained documents without requiring user confirmation for each item.</p>

<p>To select a directory subtree, build and send an
<code><a href="../../reference/android/content/Intent.html#ACTION_OPEN_DOCUMENT_TREE">OPEN_DOCUMENT_TREE</a></code>
intent. The system displays all
<code><a href="../../reference/android/provider/DocumentsProvider.html">DocumentsProvider</a></code> instances that support subtree selection,
letting the user browse and select a directory. The returned URI represents
access to the selected subtree. You can then use <code><a href="../../reference/android/provider/DocumentsContract.html#buildChildDocumentsUriUsingTree(android.net.Uri, java.lang.String)">buildChildDocumentsUriUsingTree()</a></code>
and <code><a href="../../reference/android/provider/DocumentsContract.html#buildDocumentUriUsingTree(android.net.Uri, java.lang.String)">buildDocumentUriUsingTree()</a></code>
along with
<code><a href="../../reference/android/content/ContentResolver.html#query(android.net.Uri, java.lang.String[], java.lang.String, java.lang.String[], java.lang.String)">query()</a></code>
to explore the subtree.</p>

<p>The new <code><a href="../../reference/android/provider/DocumentsContract.html#createDocument(android.content.ContentResolver, android.net.Uri, java.lang.String, java.lang.String)">createDocument()</a></code> method lets you create new documents or directories anywhere
under the subtree. To manage existing documents, use
<code><a href="../../reference/android/provider/DocumentsContract.html#renameDocument(android.content.ContentResolver, android.net.Uri, java.lang.String)">renameDocument()</a></code> and
<code><a href="../../reference/android/provider/DocumentsProvider.html#deleteDocument(java.lang.String)">deleteDocument()</a></code>.
Check <code><a href="../../reference/android/provider/DocumentsContract.Document.html#COLUMN_FLAGS">COLUMN_FLAGS</a></code>
to verify provider support for these calls before issuing them.</p>

<p>If you're implementing a <code><a href="../../reference/android/provider/DocumentsProvider.html">DocumentsProvider</a></code> and want
to support subtree selection, implement <code><a href="../../reference/android/provider/DocumentsProvider.html#isChildDocument(java.lang.String, java.lang.String)">isChildDocument()</a></code> and include <code><a href="../../reference/android/provider/DocumentsContract.Root.html#FLAG_SUPPORTS_IS_CHILD">FLAG_SUPPORTS_IS_CHILD</a></code>
in your <code><a href="../../reference/android/provider/DocumentsContract.Root.html#COLUMN_FLAGS">COLUMN_FLAGS</a></code>.</p>

<p>Android 5.0 also introduces new package-specific directories on
shared storage where your app can place media files for inclusion in
<code><a href="../../reference/android/provider/MediaStore.html">MediaStore</a></code>. The new
<code><a href="../../reference/android/content/Context.html#getExternalMediaDirs()">getExternalMediaDirs()</a></code> returns paths to these
directories on all shared storage devices. Similarly to
<code><a href="../../reference/android/content/Context.html#getExternalFilesDir(java.lang.String)">getExternalFilesDir()</a></code>,
no additional permissions are needed by your app to access the returned paths. The
platform periodically scans for new media in these directories, but you can also
use <code><a href="../../reference/android/media/MediaScannerConnection.html">MediaScannerConnection</a></code> to explicitly scan for new
content.</p>

<h2 id="Wireless">Wireless &amp; Connectivity</h2>

<h3 id="Multinetwork">Multiple network connections</h3>
<p>Android 5.0 provides new multi-networking APIs that let your app
dynamically scan for available networks with specific capabilities, and
establish a connection to them. This functionality is useful when your app
requires a specialized network, such as an SUPL, MMS, or carrier-billing network,
or if you want to send data using a particular type of transport protocol.</p>

<p>To select and connect to a network dynamically from your app, follow these
steps:</p>

<ol>
 <li>Create a <code><a href="../../reference/android/net/ConnectivityManager.html">ConnectivityManager</a></code>.</li>
 <li>Use the <code><a href="../../reference/android/net/NetworkRequest.Builder.html">NetworkRequest.Builder</a></code> class to create an
  <code><a href="../../reference/android/net/NetworkRequest.html">NetworkRequest</a></code> object and specify the network features
  and transport type your app is interested in.</li>
<li>To scan for suitable networks, call <code><a href="../../reference/android/net/ConnectivityManager.html#requestNetwork(android.net.NetworkRequest, android.net.ConnectivityManager.NetworkCallback)">requestNetwork()</a></code>
or <code><a href="../../reference/android/net/ConnectivityManager.html#registerNetworkCallback(android.net.NetworkRequest, android.net.ConnectivityManager.NetworkCallback)">registerNetworkCallback()</a></code>, and pass in the
<code><a href="../../reference/android/net/NetworkRequest.html">NetworkRequest</a></code> object and an implementation of
<code><a href="../../reference/android/net/ConnectivityManager.NetworkCallback.html">ConnectivityManager.NetworkCallback</a></code>. Use the
<code><a href="../../reference/android/net/ConnectivityManager.html#requestNetwork(android.net.NetworkRequest, android.net.ConnectivityManager.NetworkCallback)">requestNetwork()</a></code> method if you want to actively switch to a suitable network once it’s detected; to receive
only notifications for scanned networks without actively switching, use the
<code><a href="../../reference/android/net/ConnectivityManager.html#registerNetworkCallback(android.net.NetworkRequest, android.net.ConnectivityManager.NetworkCallback)">registerNetworkCallback()</a></code> method instead.</li>
</ol>

<p>When the system detects a suitable network, it connects to the network and
invokes the
<code><a href="../../reference/android/net/ConnectivityManager.NetworkCallback.html#onAvailable(android.net.Network)">onAvailable()</a></code>
callback. You can use the <code><a href="../../reference/android/net/Network.html">Network</a></code> object from the callback to
get additional information about the network, or to direct traffic to use the
selected network.</p>

<h3 id="BluetoothBroadcasting">Bluetooth Low Energy</h3>
<p>Android 4.3 introduced platform support for
  <a href="../../guide/topics/connectivity/bluetooth-le.html">Bluetooth Low Energy</a>
(<em>Bluetooth LE</em>) in the central role. In Android 5.0, an Android device can now
act as a Bluetooth LE <em>peripheral device</em>. Apps can use this capability
to make their presence known to nearby devices. For instance, you can build apps
that allow a device to function as a pedometer or health monitor and communicate
its data with another Bluetooth LE device.</p>

<p>The new <code><a href="../../reference/android/bluetooth/le/package-summary.html">android.bluetooth.le</a></code> APIs enable your apps to broadcast
advertisements, scan for responses, and form connections with nearby Bluetooth
LE devices. To use the new advertising and scanning features, add the
<code><a href="../../reference/android/Manifest.permission.html#BLUETOOTH_ADMIN">BLUETOOTH_ADMIN</a></code>
permission in your manifest. When users update or download your app from the Play Store,
they are asked to grant the following permission to your app:
"Bluetooth connection information: Allows the app to control Bluetooth,
including broadcasting to or getting information about nearby Bluetooth devices."</p>

<p>To begin Bluetooth LE advertising so that other devices can discover
your app, call
<code><a href="../../reference/android/bluetooth/le/BluetoothLeAdvertiser.html#startAdvertising(android.bluetooth.le.AdvertiseSettings, android.bluetooth.le.AdvertiseData, android.bluetooth.le.AdvertiseCallback)">startAdvertising()</a></code>
and pass in an implementation of the
<code><a href="../../reference/android/bluetooth/le/AdvertiseCallback.html">AdvertiseCallback</a></code> class. The callback object
receives a report of the success or failure of the advertising operation.</p>

<p> Android 5.0 introduces the <code><a href="../../reference/android/bluetooth/le/ScanFilter.html">ScanFilter</a></code> class so
  that your app can scan for only the
specific types of devices it is interested in. To begin scanning for Bluetooth
LE devices, call <code><a href="../../reference/android/bluetooth/le/BluetoothLeScanner.html#startScan(android.bluetooth.le.ScanCallback)">startScan()</a></code>
and pass in a list of filters. In the method call, you must also provide an
implementation of <code><a href="../../reference/android/bluetooth/le/ScanCallback.html">ScanCallback</a></code> to report when a
Bluetooth LE advertisement is found. </p>

<h3 id="NFCEnhancements">NFC enhancements</h3>
<p>Android 5.0 adds these enhancements to enable wider and more
flexible use of NFC:</p>

<ul>
<li>Android Beam is now available in the <em>share</em> menu.</li>
<li>Your app can invoke the Android Beam on the user’s device to share data by
calling <code><a href="../../reference/android/nfc/NfcAdapter.html#invokeBeam(android.app.Activity)">invokeBeam()</a></code>.
This avoids the need for the user to manually tap the device against another
NFC-capable device to complete the data transfer.</li>
<li>You can use the new <code><a href="../../reference/android/nfc/NdefRecord.html#createTextRecord(java.lang.String, java.lang.String)">createTextRecord()</a></code> method to create an NDEF record containing UTF-8 text data.</li>
<li>If you are developing a payment app, you now have the ability to
register an NFC application ID (AID) dynamically by calling
<code><a href="../../reference/android/nfc/cardemulation/CardEmulation.html#registerAidsForService(android.content.ComponentName, java.lang.String, java.util.List<java.lang.String>)">registerAidsForService()</a></code>.
You can also use <code><a href="../../reference/android/nfc/cardemulation/CardEmulation.html#setPreferredService(android.app.Activity, android.content.ComponentName)">setPreferredService()</a></code> to set the preferred card emulation service that should
be used when a specific activity is in the foreground.</li>
</ul>

<h2 id="Power">Project Volta</h2>

<p>In addition to new features, Android 5.0 emphasizes improvements in battery
  life. Use the new APIs and tool to understand and optimize your app’s power
  consumption.</p>

<h3 id="JobScheduler">Scheduling jobs</h3>
<p>Android 5.0 provides a new <code><a href="../../reference/android/app/job/JobScheduler.html">JobScheduler</a></code>
API that lets you optimize battery life by defining jobs for the system to run
asynchronously at a later time or under specified conditions (such as when the
device is charging). Job scheduling is useful in such situations as:</p>
<ul>
  <li>The app has non-user-facing work that you can defer.</li>
  <li>The app has work you'd prefer to do when the unit is plugged in.</li>
  <li>The app has a task that requires network access or a Wi-Fi
    connection.</li>
  <li>The app has a number of tasks that you want to run as a batch on a regular
   schedule.</li>

</ul>

<p>A unit of work is encapsulated by a <code><a href="../../reference/android/app/job/JobInfo.html">JobInfo</a></code> object.
This object specifies the scheduling criteria.</p>

<p>Use the <code><a href="../../reference/android/app/job/JobInfo.Builder.html">JobInfo.Builder</a></code> class to configure how the
scheduled task should run. You can schedule the task to run under specific
conditions, such as:</p>

<ul>
  <li>Start when the device is charging</li>
  <li>Start when the device is connected to an unmetered network</li>
  <li>Start when the device is idle</li>
  <li>Finish before a certain deadline or with a minimum delay</li>
</ul>

<p>For example, you can add code like this to run your task on an
unmetered network:</p>

<pre>
JobInfo uploadTask = new JobInfo.Builder(mJobId,
                                         mServiceComponent /* JobService component */)
        .setRequiredNetworkCapabilities(JobInfo.NetworkType.UNMETERED)
        .build();
JobScheduler jobScheduler =
        (JobScheduler) context.getSystemService(Context.JOB_SCHEDULER_SERVICE);
jobScheduler.schedule(uploadTask);
</pre>

<p>If the device has stable power (that is, it has been plugged in for more
  than 2 minutes and the battery is at a
<a href="../../reference/android/content/Intent.html#ACTION_BATTERY_OKAY">healthy level</a>),
the system will run any scheduled job that is ready to run, even if the job’s
deadline has not expired.</p>

<p>To see an example of how to use the <code><a href="../../reference/android/app/job/JobScheduler.html">JobScheduler</a></code> API,
refer to the <code>JobSchedulerSample</code> implementation sample in this release.</p>

<h3 id="PowerMeasurementTools">Developer tools for battery usage</h3>

<p>The new <code>dumpsys batterystats</code> command generates interesting
statistical data about battery usage on a device, organized by unique user ID
(UID). The statistics include:</p>

<ul>
<li>History of battery related events
<li>Global statistics for the device
<li>Approximate power use per UID and system component
<li>Per-app mobile ms per packet
<li>System UID aggregated statistics
<li>App UID aggregated statistics
</ul>

<p>Use the <code>--help</code> option to learn about the various options for
tailoring the output. For example, to print battery usage
statistics for a given app package since the device was last charged, run this
command:
<pre>
$ adb shell dumpsys batterystats --charged &lt;package-name&gt;
</pre>

<p>You can use the
  <a href="https://github.com/google/battery-historian" class="external-link">Battery Historian</a>
  tool on the output of the <code>dumpsys</code> command to
generate an HTML visualization of power-related events from the logs. This
information makes it easier for you to understand and diagnose any battery
related issues.</p>

<h2 id="Enterprise">Android in the Workplace and in Education</h2>
<h3 id="ManagedProvisioning">Managed provisioning</h3>

<p>Android 5.0 provides new functionality for running apps within
an enterprise environment. A
<a href="../../guide/topics/admin/device-admin.html">device administrator</a> can
initiate a managed provisioning process to add a copresent but separate
<em>managed profile</em> to a device, if the user has an existing personal account.
Apps that are associated with managed profiles appear alongside
non-managed apps in the user’s Launcher, recents screen, and notifications.</p>

<p>To start the managed provisioning process, send
<code><a href="../../reference/android/app/admin/DevicePolicyManager.html#ACTION_PROVISION_MANAGED_PROFILE">ACTION_PROVISION_MANAGED_PROFILE</a></code> in an <code><a href="../../reference/android/content/Intent.html">Intent</a></code>. If the
call is successful, the system triggers the
<code><a href="../../reference/android/app/admin/DeviceAdminReceiver.html#onProfileProvisioningComplete(android.content.Context, android.content.Intent)">onProfileProvisioningComplete()</a></code> callback.
You can then call <code><a href="../../reference/android/app/admin/DevicePolicyManager.html#setProfileEnabled(android.content.ComponentName)">setProfileEnabled()</a></code> to
enable this managed profile.</p>

<p>By default, only a small subset of apps are enabled in the managed profile.
  You can install additional apps in the managed profile by calling
  <code><a href="../../reference/android/app/admin/DevicePolicyManager.html#enableSystemApp(android.content.ComponentName, android.content.Intent)">enableSystemApp()</a></code>.</p>

<p>If you are developing a Launcher app, you can use the new <code><a href="../../reference/android/content/pm/LauncherApps.html">LauncherApps</a></code> class to get a list of launchable activities
for the current user and any associated managed profiles. Your Launcher can make
the managed apps visually prominent by appending a work badge to the icon
drawable. To retrieve the badged icon, call
<code><a href="../../reference/android/content/pm/PackageManager.html#getUserBadgedIcon(android.graphics.drawable.Drawable, android.os.UserHandle)">getUserBadgedIcon()</a></code>.</p>

<p>To see how to use the new functionality, refer to the
<code>BasicManagedProfile</code> implementation sample in this release.</p>

<h3 id="DeviceOwner">Device owner</h3>
<p>Android 5.0 introduces the ability to deploy a device owner app. A <em>device
  owner</em> is a specialized type of
  <a href="../../guide/topics/admin/device-admin.html">device administrator</a>
  that has the additional ability to create and remove secondary users and to
  configure global settings on the device. Your device owner app can use the
  methods in the <code><a href="../../reference/android/app/admin/DevicePolicyManager.html">DevicePolicyManager</a></code> class to take
  fine-grain control of the configuration, security, and apps on managed devices.
  A device can have only one active device owner at a time.</p>

<p>To deploy and activate a device owner, you must perform an NFC data transfer
  from a programming app to the device while the device is in its unprovisioned
  state. This data transfer sends the same information as in the provisioning intent
  described in <a href="#ManagedProvisioning">Managed provisioning</a>.</p>

<h3 id="ScreenPinning">Screen pinning</h3>

<p>Android 5.0 introduces a new screen pinning API that lets you temporarily
  restrict users from leaving your task or being interrupted by notifications.
  This could be used, for example, if you are developing an education app to
  support high stakes assessment requirements on Android, or a single-purpose or
  kiosk application. Once your app activates screen pinning, users cannot see
  notifications, access other apps, or return to the home screen,
  until your app exits the mode.</p>

<p>There are two ways to activate screen pinning:</p>

<ul>
<li><strong>Manually:</strong> Users can enable screen pinning in
<em>Settings > Security > Screen Pinning</em>, and select the tasks they want to
pin by touching the green pin icon in the recents screen.</li>
<li><strong>Programmatically:</strong> To activate screen pinning
programmatically, call <code><a href="../../reference/android/app/Activity.html#startLockTask()">startLockTask()</a></code>
from your app. If the requesting app is not a device owner, the user is prompted
for confirmation. A device owner app can call the
<code><a href="../../reference/android/app/admin/DevicePolicyManager.html#setLockTaskPackages(android.content.ComponentName, java.lang.String[])">setLockTaskPackages()</a></code>
method to enable apps to be pinnable without the user confirmation step.</li>
</ul>

<p>When task locking is active, the following behavior happens:</p>

<ul>
<li>The status bar is blank, and user notifications and status information are
hidden.</li>
<li>The Home and Recent Apps buttons are hidden.</li>
<li>Other apps cannot launch new activities.</li>
<li>The current app can start new activities, as long as doing so does not
create new tasks.</li>
<li>When screen pinning is invoked by a device owner, the user remains locked
  to your app until the app calls
  <code><a href="../../reference/android/app/Activity.html#stopLockTask()">stopLockTask()</a></code>.</li>
<li>If screen pinning is activity by another app that is not a device owner or
by the user directly, the user can exit by holding both the Back and Recent buttons.</li>

</ul>

<h2 id="Printing">Printing Framework</h2>

<h3 id="PDFRender">Render PDF as bitmap</h3>
<p>You can now render PDF document pages into bitmap images for printing by
using the new <code><a href="../../reference/android/graphics/pdf/PdfRenderer.html">PdfRenderer</a></code> class. You must specify a
<code><a href="../../reference/android/os/ParcelFileDescriptor.html">ParcelFileDescriptor</a></code> that is seekable (that is, the content
can be randomly accessed) on which the system writes the the printable content.
Your app can obtain a page for rendering with
<code><a href="../../reference/android/graphics/pdf/PdfRenderer.html#openPage(int)">openPage()</a></code>, then call
<code><a href="../../reference/android/graphics/pdf/PdfRenderer.Page.html#render(android.graphics.Bitmap, android.graphics.Rect, android.graphics.Matrix, int)">render()</a></code>
to turn the opened <code><a href="../../reference/android/graphics/pdf/PdfRenderer.Page.html">PdfRenderer.Page</a></code> into a bitmap. You
can also set additional parameters if you only want to convert a portion of the
document into a bitmap image (for example, to implement
<a href="http://en.wikipedia.org/wiki/Tiled_rendering" class="external-link">tiled rendering</a>
to zoom in on the document).</p>

<p>For an example of how to use the new APIs, see the <code>PdfRendererBasic</code>
  sample.</p>

<h2 id="System">System</h2>
<h3 id="AppUsageStatistics">App usage statistics</h3>
<p>You can now access app usage history on an Android device with the
  new <code><a href="../../reference/android/app/usage/package-summary.html">android.app.usage</a></code> API. This API provides more detailed usage
  information than the deprecated
  <code><a href="../../reference/android/app/ActivityManager.html#getRecentTasks(int, int)">getRecentTasks()</a></code> method.
  To use this API, you must first declare the
  <code>"android.permission.PACKAGE_USAGE_STATS"</code> permission in your manifest.
  The user must also enable access for this app through <em>Settings > Security > Apps</em>
  with usage access.</p>

<p>The system collects the usage data on a per-app basis, aggregating the
  data over daily, weekly, monthly, and yearly intervals. The maximum duration
  that the system keeps this data is as follows:</p>

<ul>
  <li>Daily data: 7 days</li>
  <li>Weekly data: 4 weeks</li>
  <li>Monthly data: 6 months</li>
  <li>Yearly data: 2 years</li>
</ul>

<p>For each app, the system records the following data:</p>
<ul>
<li>The last time the app was used</li>
<li>The total length of time the app was in the foreground for that time interval
  (by day, week, month, or year)</li>
<li>Timestamp capturing when a component (identified by a package and activity name)
  moved to the foreground or background during a day</li>
<li>Timestamp capturing when a device configuration changed (such as when the
  device orientation changed because of rotation)</li>
</ul>

<h2 id="TestingA11y">Testing &amp; Accessibility </h2>

<h3 id="TestingA11yImprovements">Testing and accessibility improvements</h3>
<p>Android 5.0 adds the following support for testing and
accessibility:</p>

<ul>
<li>The new <code><a href="../../reference/android/app/UiAutomation.html#getWindowAnimationFrameStats()">getWindowAnimationFrameStats()</a></code>
and <code><a href="../../reference/android/app/UiAutomation.html#getWindowContentFrameStats(int)">getWindowContentFrameStats()</a></code>
methods capture frame statistics for window animations and content. These methods
let you write instrumentation tests to evaluate whether an app is rendering
frames at a sufficient refresh frequency to provide a smooth user experience.</li>

<li>The new
<code><a href="../../reference/android/app/UiAutomation.html#executeShellCommand(java.lang.String)">executeShellCommand()</a></code>
method lets you execute shell commands from your instrumentation test. The
command execution is similar to running <code>adb shell</code> from a host
connected to the device, allowing you to use shell-based tools such as
<code>dumpsys</code>, <code>am</code>, <code>content</code>, and <code>pm</code>.</li>

<li>Accessibility services and test tools that use the accessibility APIs
(such as <a href="../../tools/help/uiautomator/index.html"><code>UiAutomator</code></a>)
can now retrieve detailed information about the properties of windows on the
screen that sighted users can interact with. To retrieve a list of
<code><a href="../../reference/android/view/accessibility/AccessibilityWindowInfo.html">AccessibilityWindowInfo</a></code> objects, call the new
<code><a href="../../reference/android/accessibilityservice/AccessibilityService.html#getWindows()">getWindows()</a></code>
method.</li>

<li>The new <code><a href="../../reference/android/view/accessibility/AccessibilityNodeInfo.AccessibilityAction.html">AccessibilityNodeInfo.AccessibilityAction</a></code>
  class lets you define standard or customized actions to perform on an
  <code><a href="../../reference/android/view/accessibility/AccessibilityNodeInfo.html">AccessibilityNodeInfo</a></code>.
The new <code><a href="../../reference/android/view/accessibility/AccessibilityNodeInfo.AccessibilityAction.html">AccessibilityNodeInfo.AccessibilityAction</a></code>
class replaces the actions-related APIs previously found in
<code><a href="../../reference/android/view/accessibility/AccessibilityNodeInfo.html">AccessibilityNodeInfo</a></code>.</li>

<li>Android 5.0 provides finer-grain control over text-to-speech synthesis in
  your app. The new <code><a href="../../reference/android/speech/tts/Voice.html">Voice</a></code> class allows your app to
  use voice profiles associated with specific locales, quality and latency
  rating, and text-to-speech engine-specific parameters.</li>
</ul>

<h2 id="IME">IME</h2>

<h3 id="Switching">Easier switching between input languages</h3>

<p>Beginning in Android 5.0, users can more easily switch between
all <a href="../../guide/topics/text/creating-input-method.html">input
method editors (IME)</a> supported by the platform. Performing the designated
switching action (usually touching a Globe icon on the soft keyboard) cycles
through all such IMEs. This change in behavior is implemented by the
<code><a href="../../reference/android/view/inputmethod/InputMethodManager.html#shouldOfferSwitchingToNextInputMethod(android.os.IBinder)">shouldOfferSwitchingToNextInputMethod()</a></code>
method.</p>

<p>In addition, the framework now checks whether the next IME includes a
switching mechanism at all (and, thus, whether that IME supports switching to
the IME after it). An
IME with a switching mechanism will not cycle to an IME without one. This
change in behavior is implemented by the
<code><a href="../../reference/android/view/inputmethod/InputMethodManager.html#switchToNextInputMethod(android.os.IBinder, boolean)">switchToNextInputMethod()</a></code>
method.

<p>To see an example of how to use the updated IME-switching APIs, refer to the
updated soft-keyboard implementation sample in this release. To learn more about
how to implement switching between IMEs, see
<a href="../../guide/topics/text/creating-input-method.html">Creating an Input Method</a>.
</p>

<h2 id="Manifest">Manifest Declarations</h2>

<h3 id="ManifestFeatures">Declarable required features</h3>
<p>The following values are now supported in the
<a href="../../guide/topics/manifest/uses-feature-element.html"><code>&lt;uses-feature&gt;</code></a>
element, so you can ensure that your app is installed only on devices that
provide the features your app needs.</p>

<ul>
<li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_AUDIO_OUTPUT">FEATURE_AUDIO_OUTPUT</a></code></li>
<li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_CAMERA_CAPABILITY_MANUAL_POST_PROCESSING">FEATURE_CAMERA_CAPABILITY_MANUAL_POST_PROCESSING</a></code></li>
<li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_CAMERA_CAPABILITY_MANUAL_SENSOR">FEATURE_CAMERA_CAPABILITY_MANUAL_SENSOR</a></code></li>
<li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_CAMERA_CAPABILITY_RAW">FEATURE_CAMERA_CAPABILITY_RAW</a></code></li>
<li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_CAMERA_LEVEL_FULL">FEATURE_CAMERA_LEVEL_FULL</a></code></li>
<li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_GAMEPAD">FEATURE_GAMEPAD</a></code></li>
<li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_LIVE_TV">FEATURE_LIVE_TV</a></code></li>
<li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_MANAGED_USERS">FEATURE_MANAGED_USERS</a></code></li>
<li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_LEANBACK">FEATURE_LEANBACK</a></code></li>
<li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_OPENGLES_EXTENSION_PACK">FEATURE_OPENGLES_EXTENSION_PACK</a></code></li>
<li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_SECURELY_REMOVES_USERS">FEATURE_SECURELY_REMOVES_USERS</a></code></li>
<li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_SENSOR_AMBIENT_TEMPERATURE">FEATURE_SENSOR_AMBIENT_TEMPERATURE</a></code></li>
<li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_SENSOR_HEART_RATE_ECG">FEATURE_SENSOR_HEART_RATE_ECG</a></code></li>
<li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_SENSOR_RELATIVE_HUMIDITY">FEATURE_SENSOR_RELATIVE_HUMIDITY</a></code></li>
<li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_VERIFIED_BOOT">FEATURE_VERIFIED_BOOT</a></code></li>
<li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_WEBVIEW">FEATURE_WEBVIEW</a></code></li>
</ul>

<h3 id="Permissions">User permissions</h3>

<p>The following permission is now supported in the
<a href="../../guide/topics/manifest/uses-permission-element.html"><code>&lt;uses-permission&gt;</code></a>
element to declare the permissions your app requires to access certain APIs.</p>

<ul>
<li><code><a href="../../reference/android/Manifest.permission.html#BIND_DREAM_SERVICE">BIND_DREAM_SERVICE</a></code>: When targeting API
  level 21 and higher, this permission is required by a
  <a href="../../about/versions/android-4.2.html#Daydream">Daydream</a> service,
  to ensure that only the system can bind to it.</li>
</ul>
    </div>

      <div class="content-footer layout-content-row"
                    itemscope itemtype="http://schema.org/SiteNavigationElement">
        
        <div class="paging-links layout-content-col col-10">
          
        </div>
        <div class="layout-content-col plus-container col-2" >
          
            <div class="g-plusone" data-size="medium"></div>
          
        </div>
        
      </div>

  </div> <!-- end jd-content -->

<div id="footer" class="wrap" >
        

  <div id="copyright">
    
  Except as noted, this content is 
  licensed under <a href="http://creativecommons.org/licenses/by/2.5/">
  Creative Commons Attribution 2.5</a>. For details and 
  restrictions, see the <a href="../../license.html">Content 
  License</a>.
  </div>


  <div id="footerlinks">
    
  <p>
    <a href="../../about/index.html">About Android</a>&nbsp;&nbsp;|&nbsp;
    <a href="../../legal.html">Legal</a>&nbsp;&nbsp;|&nbsp;
    <a href="../../support.html">Support</a>
  </p>
  </div>

</div> <!-- end footer -->
</div><!-- end doc-content -->

</div> <!-- end body-content --> 





  <script src="../../../ajax/developer.android.com/ytblogger_lists_unified.js" type="text/javascript"></script>
  <script src="../../jd_lists_unified.js?v=8" type="text/javascript"></script>
  <script src="../../jd_extras.js?v=9" type="text/javascript"></script>
  <script src="../../jd_collections.js?v=9" type="text/javascript"></script>
  <script src="../../jd_tag_helpers.js?v=5" type="text/javascript"></script>

</body>
</html>



