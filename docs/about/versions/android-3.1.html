<!DOCTYPE html>
























































































<html>
<head>

  

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<link rel="shortcut icon" type="image/x-icon" href="../../favicon.ico" />
<link rel="alternate" href="http://developer.android.com/" hreflang="en" />
<link rel="alternate" href="http://developer.android.com/intl/es/" hreflang="es" />
<link rel="alternate" href="http://developer.android.com/intl/id/" hreflang="id" />
<link rel="alternate" href="http://developer.android.com/intl/ja/" hreflang="ja" />
<link rel="alternate" href="http://developer.android.com/intl/ko/" hreflang="ko" />
<link rel="alternate" href="http://developer.android.com/intl/pt-br/" hreflang="pt-br" />
<link rel="alternate" href="http://developer.android.com/intl/ru/" hreflang="ru" />
<link rel="alternate" href="http://developer.android.com/intl/vi/" hreflang="vi" />
<link rel="alternate" href="http://developer.android.com/intl/zh-cn/" hreflang="zh-cn" />
<link rel="alternate" href="http://developer.android.com/intl/zh-tw/" hreflang="zh-tw" />


<title>Android 3.1 APIs | Android Developers
</title>

<meta name="description" content="API Level:   HONEYCOMB_MR1) is available as a downloadable component for the Android SDK. The downloadable platform includes an Android library and system image, as well as a set of emulator skins and more. The downloadable platform includes no external…">

<!-- STYLESHEETS -->
<link rel="stylesheet"
href="http://fonts.googleapis.com/css?family=Roboto+Condensed">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold"
  title="roboto">

<link href="../../assets/css/default.css?v=16" rel="stylesheet" type="text/css">

<!-- JAVASCRIPT -->
<script src="../../assets/js/android_3p-bundle.js" type="text/javascript"></script>
<script type="text/javascript">
  var toRoot = "../../";
  var metaTags = [];
  var devsite = false;
  var useUpdatedTemplates = false;
</script>
<script src="../../assets/js/docs.js?v=17" type="text/javascript"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//../../ajax/www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5831155-1', 'android.com');
  ga('create', 'UA-49880327-2', 'android.com', {'name': 'universal'});  // New tracker);
  ga('send', 'pageview');
  ga('universal.send', 'pageview'); // Send page view for new tracker.
</script>

</head>

<body class="gc-documentation


 about" itemscope itemtype="http://schema.org/Article">
  
  <a name="top"></a>
  <!-- Header -->
  <div id="header-wrapper">
    <div class="dac-header " id="header">
      <div class="dac-header-inner">
        <a class="dac-nav-toggle" data-dac-toggle-nav href="javascript:;" title="Open navigation">
          <span class="dac-nav-hamburger">
            <span class="dac-nav-hamburger-top"></span>
            <span class="dac-nav-hamburger-mid"></span>
            <span class="dac-nav-hamburger-bot"></span>
          </span>
        </a>
        <a class="dac-header-logo" href="../../index.html">
          <img class="dac-header-logo-image" src="../../assets/images/android_logo.png"
              srcset="../../assets/images/android_logo@2x.png 2x"
              width="32" height="36" alt="Android" /> Developers
          </a>

        <ul class="dac-header-tabs">
          <li>
          <a class="dac-header-tab" href="../../design/index.html"
             zh-tw-lang="設計"
             zh-cn-lang="设计"
             ru-lang="Проектирование"
             ko-lang="디자인"
             ja-lang="設計"
             es-lang="Diseñar">Design</a>
          </li>
          <li>
          <a class="dac-header-tab" href="../../develop/index.html"
             zh-tw-lang="開發"
             zh-cn-lang="开发"
             ru-lang="Разработка"
             ko-lang="개발"
             ja-lang="開発"
             es-lang="Desarrollar">Develop</a>
          </li>
          <li>
          <a class="dac-header-tab" href="../../distribute/index.html"
             zh-tw-lang="發佈"
             zh-cn-lang="分发"
             ru-lang="Распространение"
             ko-lang="배포"
             ja-lang="配布"
             es-lang="Distribuir">Distribute</a>
          </li>
        </ul>

        <a class="dac-header-console-btn" href="https://play.google.com/apps/publish/">
          <span class="dac-sprite dac-google-play"></span>
          <span class="dac-visible-desktop-inline">Developer</span>
          Console
        </a>

        
        
        
  <form data-search class="dac-header-search">
    <button class="dac-header-search-close" data-search-close>
      <i class="dac-sprite dac-back-arrow"></i>
    </button>

    <div class="dac-header-search-inner">
      <i class="dac-sprite dac-search-white dac-header-search-icon"></i>
      <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q" class="dac-header-search-input" placeholder="Search" />
      <button class="dac-header-search-clear dac-hidden" data-search-clear>
        <i class="dac-sprite dac-close-black"></i>
      </button>
    </div>
  </form>

        
      </div><!-- end header-wrap.wrap -->
    </div><!-- end header -->
  </div> <!--end header-wrapper -->

  
  <!-- Navigation-->
  <nav class="dac-nav">
    <div class="dac-nav-dimmer" data-dac-toggle-nav></div>

    <div class="dac-nav-sidebar" data-swap data-dynamic="false" data-transition-speed="300" data-dac-nav>
      <div data-swap-container>
        
  
    <a class="dac-nav-back-button dac-swap-section dac-up dac-no-anim" data-swap-button href="javascript:;">
      <i class="dac-sprite dac-nav-back"></i> <span class="dac-nav-back-title">Back</span>
    </a>
    <div class="dac-nav-sub dac-swap-section dac-right dac-active" itemscope itemtype="http://schema.org/SiteNavigationElement">
      
        <ul id="nav">
  <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/marshmallow/index.html">
      <span class="en">Marshmallow</span></a></div>
      <ul>
        <li><a href="../../about/versions/marshmallow/android-6.0.html">
        Android 6.0 APIs</a></li>
        <li><a href="../../about/versions/marshmallow/android-6.0-changes.html">
        Android 6.0 Changes</a></li>
        <li><a href="../../about/versions/marshmallow/samples.html">
        Android 6.0 Samples</a></li>
      </ul>
  </li>
  <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/lollipop.html"
              zh-tw-lang="Lollipop"
              zh-cn-lang="Lollipop"
              ru-lang="Lollipop"
              ko-lang="Lollipop"
              ja-lang="Lollipop"
              es-lang="Lollipop">
      <span class="en">Lollipop</span></a></div>
      <ul>
        <li><a href="../../about/versions/android-5.1.html">Android 5.1 APIs</a></li>
        <li><a href="../../about/versions/android-5.0.html"
              zh-tw-lang="Android 5.0 API"
              zh-cn-lang="Android 5.0 API"
              ru-lang="API для Android 5.0"
              ko-lang="Android 5.0 API"
              ja-lang="Android 5.0 API"
              es-lang="API de Android 5.0">
              Android 5.0 APIs</a></li>
        <li><a href="../../about/versions/android-5.0-changes.html">

        Android 5.0 Changes</a></li>
      </ul>
  </li>
  <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/kitkat.html">
      <span class="en">KitKat</span></a></div>
      <ul>
        <li><a href="../../about/versions/android-4.4.html">Android 4.4 APIs</a></li>
      </ul>
  </li>
  <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/jelly-bean.html">
      <span class="en">Jelly Bean</span></a></div>
      <ul>
        <li><a href="../../about/versions/android-4.3.html">Android 4.3 APIs</a></li>
        <li><a href="../../about/versions/android-4.2.html">Android 4.2 APIs</a></li>
        <li><a href="../../about/versions/android-4.1.html">Android 4.1 APIs</a></li>
      </ul>
  </li>

  <!-- <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/android-4.0-highlights.html">
      <span class="en">Ice Cream Sandwich</span></a></div>
      <ul>
        <li><a href="../../about/versions/android-4.0.3.html">Android 4.0.3 APIs</a></li>
        <li><a href="../../about/versions/android-4.0.html">Android 4.0 APIs</a> </li>
      </ul>
  </li> -->

  <li class="nav-section">
    <div class="nav-section-header empty"><a href="../../about/android.html">About Android</a></div>
  </li>

  <li class="nav-section">
    <div class="nav-section-header empty"><a href="../../about/dashboards/index.html">Dashboards</a></div>
  </li>

</ul>
      
    </div>
  

        <ul id="dac-main-navigation" class="dac-nav-list dac-swap-section dac-left dac-no-anim">
        <li class="dac-nav-item home">
          <a class="dac-nav-link" href="../../index.html">Home</a>
          <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider"></i>
          <ul class="dac-nav-secondary about">
            <li class="dac-nav-item versions">
              <a class="dac-nav-link" href="../../about/versions/marshmallow/index.html">Android</a>
            </li>
            <li class="dac-nav-item wear">
              <a class="dac-nav-link" href="../../wear/index.html">Wear</a>
            </li>
            <li class="dac-nav-item tv">
              <a class="dac-nav-link" href="../../tv/index.html">TV</a>
            </li>
            <li class="dac-nav-item auto">
              <a class="dac-nav-link" href="../../auto/index.html">Auto</a>
            </li>
          </ul>
        </li>
        <li class="dac-nav-item design">
          <a class="dac-nav-link" href="../../design/index.html"
             zh-tw-lang="設計"
             zh-cn-lang="设计"
             ru-lang="Проектирование"
             ko-lang="디자인"
             ja-lang="設計"
             es-lang="Diseñar">Design</a>
        </li>
        <li class="dac-nav-item develop">
          <a class="dac-nav-link" href="../../develop/index.html"
             zh-tw-lang="開發"
             zh-cn-lang="开发"
             ru-lang="Разработка"
             ko-lang="개발"
             ja-lang="開発"
             es-lang="Desarrollar">Develop</a>
          <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider"></i>
          <ul class="dac-nav-secondary develop">
            <li class="dac-nav-item training">
              <a class="dac-nav-link" href="../../training/index.html"
                 zh-tw-lang="訓練課程"
                 zh-cn-lang="培训"
                 ru-lang="Курсы"
                 ko-lang="교육"
                 ja-lang="トレーニング"
                 es-lang="Capacitación">Training</a>
            </li>
            <li class="dac-nav-item guide">
              <a class="dac-nav-link" href="../../guide/index.html"
                 zh-tw-lang="API 指南"
                 zh-cn-lang="API 指南"
                 ru-lang="Руководства по API"
                 ko-lang="API 가이드"
                 ja-lang="API ガイド"
                 es-lang="Guías de la API">API Guides</a>
            </li>
            <li class="dac-nav-item reference">
              <a class="dac-nav-link" href="../../reference/packages.html"
                 zh-tw-lang="參考資源"
                 zh-cn-lang="参考"
                 ru-lang="Справочник"
                 ko-lang="참조문서"
                 ja-lang="リファレンス"
                 es-lang="Referencia">Reference</a>
            </li>
            <li class="dac-nav-item tools">
              <a class="dac-nav-link" href="../../sdk/index.html"
                 zh-tw-lang="相關工具"
                 zh-cn-lang="工具"
                 ru-lang="Инструменты"
                 ko-lang="도구"
                 ja-lang="ツール"
                 es-lang="Herramientas">Tools</a></li>
            <li class="dac-nav-item google">
              <a class="dac-nav-link" href="../../google/index.html">Google Services</a>
            </li>
            
          </ul>
        </li>
        <li class="dac-nav-item distribute">
          <a class="dac-nav-link" href="../../distribute/googleplay/index.html"
             zh-tw-lang="發佈"
             zh-cn-lang="分发"
             ru-lang="Распространение"
             ko-lang="배포"
             ja-lang="配布"
             es-lang="Distribuir">Distribute</a>
          <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider"></i>
          <ul class="dac-nav-secondary distribute">
            <li class="dac-nav-item googleplay">
              <a class="dac-nav-link" href="../../distribute/googleplay/index.html">Google Play</a></li>
            <li class="dac-nav-item essentials">
              <a class="dac-nav-link" href="../../distribute/essentials/index.html">Essentials</a></li>
            <li class="dac-nav-item users">
              <a class="dac-nav-link" href="../../distribute/users/index.html">Get Users</a></li>
            <li class="dac-nav-item engage">
              <a class="dac-nav-link" href="../../distribute/engage/index.html">Engage &amp; Retain</a></li>
            <li class="dac-nav-item monetize">
              <a class="dac-nav-link" href="../../distribute/monetize/index.html">Earn</a>
            </li>
            <li class="dac-nav-item analyze">
              <a class="dac-nav-link" href="../../distribute/analyze/index.html">Analyze</a>
            </li>
            <li class="dac-nav-item stories">
              <a class="dac-nav-link" href="../../distribute/stories/index.html">Stories</a>
            </li>
          </ul>
        </li>
        <li class="dac-nav-item preview">
          <a class="dac-nav-link" href="../../preview/index.html">Preview</a>
        </li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- end navigation-->
  

<!-- Nav Setup -->
<script>$('[data-dac-nav]').dacNav();</script>



  
    
  <div class="wrap clearfix" id="body-content">

  

  
  <div id="search-results" class="dac-search-results">
    <div id="dac-search-results-history" class="dac-search-results-history">
      <div class="wrap dac-search-results-history-wrap">
        <div class="cols">
          <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
            <h2>Most visited</h2>
            <div class="resource-flow-layout" data-history-query="history:most/visited" data-maxresults="3" data-cardsizes="18x2"></div>
          </div>

          <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
            <h2>Recently visited</h2>
            <div class="resource-flow-layout cols" data-history-query="history:recent" data-allow-duplicates="true" data-maxresults="3" data-cardsizes="18x2"></div>
          </div>
        </div>
      </div>
    </div>

    <div id="dac-search-results-content" class="dac-search-results-content">
      <div class="dac-search-results-metadata wrap">
        <div class="dac-search-results-for">
          <h2>Results for <span id="search-results-for"></span></h2>
        </div>

        <div id="dac-search-results-hero"></div>

        <div class="dac-search-results-hero cols">
          <div id="dac-search-results-reference" class="col-3of6 col-tablet-1of2 col-mobile-1of1">
            <div class="suggest-card reference no-display">
              <ul class="dac-search-results-reference">
              </ul>
            </div>
          </div>
          <div id="dac-custom-search-results"></div>
        </div>
      </div>

    </div>
  </div>





  
    
      
        <ul class="dac-header-crumbs">
          
        </ul>

        <!-- Breadcrumb Setup -->
        <p><script>$('.dac-nav-list').dacCurrentPage().dacCrumbs();</script></p>

        <h1 itemprop="name" >Android 3.1 APIs</h1>
      
    
  


  

  
  <div id="jd-content">
    <div class="jd-descr" itemprop="articleBody">
    

    <div id="qv-wrapper">
<div id="qv">

<h2>In this document</h2>
<ol>
  <li><a href="#api">API Overview</a></li>
  <li><a href="#api-level">API Level</a></li>
</ol>

<h2>Reference</h2>
<ol>
<li><a
href="../../sdk/api_diff/12/changes.html">API
Differences Report &raquo;</a> </li>
</ol>

</div>
</div>


<p><em>API Level:</em>&nbsp;<strong>12</strong></p>

<p>For developers, the Android 3.1 platform
(<code><a href="../../reference/android/os/Build.VERSION_CODES.html#HONEYCOMB_MR1">HONEYCOMB_MR1</a></code>) is available as a
downloadable component for the Android SDK. The downloadable platform includes
an Android library and system image, as well as a set of emulator skins and
more. The downloadable platform includes no external libraries.</p>

<p>For developers, the Android 3.1 platform is available as a
downloadable component for the Android SDK. The downloadable platform includes
an Android library and system image, as well as a set of emulator skins and
more. To get started developing or testing against Android 3.1,
use the Android SDK Manager to download the platform into your SDK.</p>



<h2 id="#api" style="margin-top:1.5em;">API Overview</h2>

<p>The sections below provide a technical overview of what's new for developers
in Android 3.1, including new features and changes in the framework API since
the previous version.</p>

<h3 id="usb">USB APIs</h3>

<p>Android 3.1 introduces powerful new APIs for
integrating connected peripherals with applications running on the platform.
The APIs are based on a USB (Universal Serial Bus) stack and services that are
built into the platform, including support for both USB host and device
interactions. Using the APIs, developers can create applications that are able to
discover, communicate with, and manage a variety of device types connected over
USB. </p>

<p>The stack and APIs distinguish two basic types of USB hardware, based on
whether the Android-powered device is acting as host or the external hardware
is acting as host: </p>

<ul>
<li>A <em>USB device</em> is a piece of connected hardware that depends on the
Android-powered device to serve as host. For example, most input devices, mice,
and joysticks are USB devices, as are many cameras, hubs, and so on.</li>
<li>A <em>USB accessory</em> is a piece of connected hardware that has a USB
host controller, provides power, and is designed to communicate with
Android-powered devices over USB, A variety of peripherals can connect as
accessories, from robotics controllers to musical equipment, exercise bicycles,
and more.</li>
</ul>

<p>For both types &mdash; USB devices and USB accessories &mdash; the
platform's USB APIs support discovery by intent broadcast when attached or
detached, as well as standard interfaces, endpoints, and transfer modes
(control, bulk, and interrupt).</p>

<p>The USB APIs are available in the package <code><a href="../../reference/android/hardware/usb/package-summary.html">android.hardware.usb</a></code>. The
central class is <code><a href="../../reference/android/hardware/usb/UsbManager.html">UsbManager</a></code>, which provides
helper methods for identifying and communicating with
both USB devices and USB accessories. Applications can acquire an instance of
<code><a href="../../reference/android/hardware/usb/UsbManager.html">UsbManager</a></code> and then query for the list of attached
devices or accessories and then communicate with or manage them.
<code><a href="../../reference/android/hardware/usb/UsbManager.html">UsbManager</a></code> also declares intent actions that the
system broadcasts, to announce when a USB device or accessory is attached or
detached.</p>

<p>Other classes include:</p>

<ul>
<li><code><a href="../../reference/android/hardware/usb/UsbDevice.html">UsbDevice</a></code>, a class representing external
hardware connected as a USB device (with the Android-powered device acting as
host).</li>
<li><code><a href="../../reference/android/hardware/usb/UsbAccessory.html">UsbAccessory</a></code>, representing external hardware
connected as the USB host (with the Android-powered device acting as a USB
device).</li>
<li><code><a href="../../reference/android/hardware/usb/UsbInterface.html">UsbInterface</a></code> and <code><a href="../../reference/android/hardware/usb/UsbEndpoint.html">UsbEndpoint</a></code>, which provide access to standard USB
interfaces and endpoints for a device.</li>
<li><code><a href="../../reference/android/hardware/usb/UsbDeviceConnection.html">UsbDeviceConnection</a></code> and <code><a href="../../reference/android/hardware/usb/UsbRequest.html">UsbRequest</a></code>, for sending and receiving data and control
messages to or from a USB device, sychronously and asynchronously.
<li><code><a href="../../reference/android/hardware/usb/UsbConstants.html">UsbConstants</a></code>, which provides constants for
declaring endpoint types, device classes, and so on.</li>
</ul>

<p>Note that although the USB stack is built into the platform, actual support
for USB host and open accessory modes on specific devices is determined by
their manufacturers. In particular, host mode relies on appropriate USB
controller hardware in the Android-powered device. </p>

<p>Additionally, developers can request filtering on Google Play, such that
their applications are not availabe to users whose devices do not provide the
appropriate USB support. To request filtering, add one or both of the elements
below to the application manifest, as appropriate: </p>

<ul>
<li>If the application should only be visible to devices that support USB
host mode (connection of USB devices), declare this element:
  <p style="margin-left:1.5em;"><code>&lt;uses-feature
  android:name="android.hardware.usb.host"
  android:required="true"&gt;</code></p>
</li>
<li>If the application should only be visible to devices that support USB
accessories (connection of USB hosts), declare this element:
  <p style="margin-left:1.5em;"><code>&lt;uses-feature
  android:name="android.hardware.usb.accessory"
  android:required="true"&gt;</code></p>
</li>
</ul>

<p>For complete information about how to develop applications that interact with
USB accessories, please see the
<a href="../../guide/topics/connectivity/usb/index.html">developer documentation</a>.</p>

<p class="note">To look at sample applications that use the USB host API, see <a
href="../../resources/samples/USB/AdbTest/index.html">ADB Test</a> and <a
href="../../resources/samples/USB/MissileLauncher/index.html">Missile
Launcher</a></p>

<h3>MTP/PTP API</h3>

<p>Android 3.1 exposes a new MTP API that lets applications interact directly
with connected cameras and other PTP devices. The new API makes it easy for an
application to receive notifications when devices are attached and removed,
manage files and storage on those devices, and transfer files and metadata to
and from them. The MTP API implements the PTP (Picture Transfer Protocol) subset
of the MTP (Media Transfer Protocol) specification.</p>

<p>The MTP API is available in the <code><a href="../../reference/android/mtp/package-summary.html">android.mtp</a></code> package and provides
these classes: </p>

<ul>
  <li>The <code><a href="../../reference/android/mtp/MtpDevice.html">MtpDevice</a></code> encapsulates an MTP device that is
connected over the USB host bus. An application can instantiate an object of
this type and then use its methods to get information about the device and
objects stored on it, as well as opening the connection and transferring data.
Some of the methods include:
    <ul>
      <li><code><a href="../../reference/android/mtp/MtpDevice.html#getObjectHandles(int, int, int)">getObjectHandles()</a></code> returns a list of handles for all objects on the device that
match a specified format and parent. To get information about an object, an
application can pass a handle to <code><a href="../../reference/android/mtp/MtpDevice.html#getObjectInfo(int)">getObjectInfo()</a></code>.</li>
      <li><code><a href="../../reference/android/mtp/MtpDevice.html#importFile(int, java.lang.String)">importFile()</a></code> lets an application copy data for an object to a file in external
storage. This call may block for an arbitrary amount of time depending on the
size of the data and speed of the devices, so should be made from a spearate
thread.</li>
      <li><code><a href="../../reference/android/mtp/MtpDevice.html#open(android.hardware.usb.UsbDeviceConnection)">open()</a></code>
lets an application open a connected MTP/PTP device. </li>
      <li><code><a href="../../reference/android/mtp/MtpDevice.html#getThumbnail(int)">getThumbnail()</a></code> returns
the thumbnail of the object as a byte array. </li>
    </ul>
  </li>
  <li><code><a href="../../reference/android/mtp/MtpStorageInfo.html">MtpStorageInfo</a></code> holds information about about a storage
unit on an MTP device, corresponding to the StorageInfo Dataset described in
section 5.2.2 of the MTP  specification. Methods in the class let an application
get a storage unit’s description string, free space, maximum storage capacity,
storage ID, and volume identifier.</li>
  <li><code><a href="../../reference/android/mtp/MtpDeviceInfo.html">MtpDeviceInfo</a></code>  holds information about an MTP device
corresponding to the DeviceInfo Dataset described in section 5.1.1 of the MTP
specification. Methods in the class let applications get a device’s
manufacturer, model, serial number, and version.</li>
  <li><code><a href="../../reference/android/mtp/MtpObjectInfo.html">MtpObjectInfo</a></code> holds information about an object stored
on an MTP device, corresponding to the ObjectInfo Dataset described in section
5.3.1 of the MTP specification. Methods in the class let applications get an
object’s size, data format, association type, creation date, and thumbnail
information.</li>
  <li><code><a href="../../reference/android/mtp/MtpConstants.html">MtpConstants</a></code> provides constants for declaring MTP file
format codes, association type, and protection status.</li>
</ul>

<h3 id="motionevents">Support for new input devices and motion events</h3>

<p>Android 3.1 extends the input subsystem to support new input devices and new
types of motion events, across all views and windows. Developers can build on
these capabilities to let users interact with their applications using mice,
trackballs, joysticks, gamepads, and other devices, in addition to keyboards and
touchscreens. </p>

<p>For handling mouse, scrollwheel, and trackball input, the platform supports
two new motion event actions:</p>
<ul>
<li><code><a href="../../reference/android/view/MotionEvent.html#ACTION_SCROLL">ACTION_SCROLL</a></code>, which describes the pointer
location at which a non-touch scroll motion, such as from a mouse scroll wheel,
took place. In the MotionEvent, the value of the <code><a href="../../reference/android/view/MotionEvent.html#AXIS_HSCROLL">AXIS_HSCROLL</a></code> and <code><a href="../../reference/android/view/MotionEvent.html#AXIS_VSCROLL">AXIS_VSCROLL</a></code> axes specify the relative scroll
movement. </li>
<li><code><a href="../../reference/android/view/MotionEvent.html#ACTION_HOVER_MOVE">ACTION_HOVER_MOVE</a></code>, reports the current
position of the mouse when no buttons are pressed, as well as any intermediate
points since the last <code>HOVER_MOVE</code> event. Hover enter and exit
notifications are not yet supported.</li>
</ul>

<p>To support joysticks and gamepads, the <code><a href="../../reference/android/view/InputDevice.html">InputDevice</a></code> class
includes these new input device sources:</p>
<ul>
<li><code><a href="../../reference/android/view/InputDevice.html#SOURCE_CLASS_JOYSTICK">SOURCE_CLASS_JOYSTICK</a></code> &mdash; the source
device has joystick axes.</li>
<li><code><a href="../../reference/android/view/InputDevice.html#SOURCE_CLASS_BUTTON">SOURCE_CLASS_BUTTON</a></code> &mdash; the source
device has buttons or keys.</li>
<li><code><a href="../../reference/android/view/InputDevice.html#SOURCE_GAMEPAD">SOURCE_GAMEPAD</a></code>  &mdash;  the source device
has gamepad buttons such as <code><a href="../../reference/android/view/KeyEvent.html#KEYCODE_BUTTON_A">KEYCODE_BUTTON_A</a></code>
or <code><a href="../../reference/android/view/KeyEvent.html#KEYCODE_BUTTON_B">KEYCODE_BUTTON_B</a></code>. Implies
<code><a href="../../reference/android/view/InputDevice.html#SOURCE_CLASS_BUTTON">SOURCE_CLASS_BUTTON</a></code></li>
<li><code><a href="../../reference/android/view/InputDevice.html#SOURCE_JOYSTICK">SOURCE_JOYSTICK</a></code> &mdash; the source device
has joystick axes.  Implies SOURCE_CLASS_JOYSTICK.</li>
</ul>

<p>To describe motion events from these new sources, as well as those from mice
and trackballs, the platform now defines axis codes on <code><a href="../../reference/android/view/MotionEvent.html">MotionEvent</a></code>, similar to how it defines key codes on <code><a href="../../reference/android/view/KeyEvent.html">KeyEvent</a></code>. New axis codes for joysticks
and game controllers include
<code><a href="../../reference/android/view/MotionEvent.html#AXIS_HAT_X">AXIS_HAT_X</a></code>, <code><a href="../../reference/android/view/MotionEvent.html#AXIS_HAT_Y">AXIS_HAT_Y</a></code>, <code><a href="../../reference/android/view/MotionEvent.html#AXIS_RTRIGGER">AXIS_RTRIGGER</a></code>, <code><a href="../../reference/android/view/MotionEvent.html#AXIS_ORIENTATION">AXIS_ORIENTATION</a></code>, <code><a href="../../reference/android/view/MotionEvent.html#AXIS_THROTTLE">AXIS_THROTTLE</a></code>, and many others.
Existing <code><a href="../../reference/android/view/MotionEvent.html">MotionEvent</a></code> axes are represented by <code><a href="../../reference/android/view/MotionEvent.html#AXIS_X">AXIS_X</a></code>, <code><a href="../../reference/android/view/MotionEvent.html#AXIS_Y">AXIS_Y</a></code>,
<code><a href="../../reference/android/view/MotionEvent.html#AXIS_PRESSURE">AXIS_PRESSURE</a></code>, <code><a href="../../reference/android/view/MotionEvent.html#AXIS_SIZE">AXIS_SIZE</a></code>, <code><a href="../../reference/android/view/MotionEvent.html#AXIS_TOUCH_MAJOR">AXIS_TOUCH_MAJOR</a></code>, <code><a href="../../reference/android/view/MotionEvent.html#AXIS_TOUCH_MINOR">AXIS_TOUCH_MINOR</a></code>, <code><a href="../../reference/android/view/MotionEvent.html#AXIS_TOOL_MAJOR">AXIS_TOOL_MAJOR</a></code>, <code><a href="../../reference/android/view/MotionEvent.html#AXIS_TOOL_MINOR">AXIS_TOOL_MINOR</a></code>, and <code><a href="../../reference/android/view/MotionEvent.html#AXIS_ORIENTATION">AXIS_ORIENTATION</a></code>.</p>

<p>Additionally, <code><a href="../../reference/android/view/MotionEvent.html">MotionEvent</a></code> defines a number of generic
axis codes that are used when the framework does not know how to map a
particular axis. Specific devices can use the generic axis codes to pass custom
motion data to applications. For a full list of axes and their intended
interpretations, see the <code><a href="../../reference/android/view/MotionEvent.html">MotionEvent</a></code> class documentation.
</p>

<p>The platform provides motion events to applications in batches, so a single
event may contain a current position and multiple so-called historical movements.
Applications should use <code><a href="../../reference/android/view/MotionEvent.html#getHistorySize()">getHistorySize()</a></code> to get
the number of historical samples, then retrieve and process all historical
samples in order using <code><a href="../../reference/android/view/MotionEvent.html#getHistoricalAxisValue(int, int, int)">getHistoricalAxisValue()</a></code>.  After that, applications should process the current
sample using <code><a href="../../reference/android/view/MotionEvent.html#getAxisValue(int)">getAxisValue()</a></code>.
</p>

<p>Some axes can be retrieved using special accessor methods.  For example,
instead of calling <code><a href="../../reference/android/view/MotionEvent.html#getAxisValue(int)">getAxisValue()</a></code>, applications can call <code><a href="../../reference/android/view/MotionEvent.html#getX(int)">getX()</a></code>.  Axes that have built-in accessors include <code><a href="../../reference/android/view/MotionEvent.html#AXIS_X">AXIS_X</a></code>, <code><a href="../../reference/android/view/MotionEvent.html#AXIS_Y">AXIS_Y</a></code>,
<code><a href="../../reference/android/view/MotionEvent.html#AXIS_PRESSURE">AXIS_PRESSURE</a></code>, <code><a href="../../reference/android/view/MotionEvent.html#AXIS_SIZE">AXIS_SIZE</a></code>, <code><a href="../../reference/android/view/MotionEvent.html#AXIS_TOUCH_MAJOR">AXIS_TOUCH_MAJOR</a></code>, <code><a href="../../reference/android/view/MotionEvent.html#AXIS_TOUCH_MINOR">AXIS_TOUCH_MINOR</a></code>, <code><a href="../../reference/android/view/MotionEvent.html#AXIS_TOOL_MAJOR">AXIS_TOOL_MAJOR</a></code>, <code><a href="../../reference/android/view/MotionEvent.html#AXIS_TOOL_MINOR">AXIS_TOOL_MINOR</a></code>, and <code><a href="../../reference/android/view/MotionEvent.html#AXIS_ORIENTATION">AXIS_ORIENTATION</a></code>.</p>

<p>Each input device has a unique, system-assigned ID and may also provide
multiple sources. When a device provides multiple sources, more than one source
can provide axis data using the same axis. For example, a touch event coming
from the touch source uses the X axis for screen position data, while a joystick
event coming from the joystick source will use the X axis for the stick position
instead. For this reason, it's important for applications to interpret axis
values according to the source from which they originate. When handling a motion
event, applications should use methods on the <code><a href="../../reference/android/view/InputDevice.html">InputDevice</a></code>
class to determine the axes supported by a device or source. Specifically,
applications can use <code><a href="../../reference/android/view/InputDevice.html#getMotionRanges()">getMotionRanges()</a></code> to query for all axes of a device or all axes of a given
source of the device. In both cases, the range information for axes returned in
the <code><a href="../../reference/android/view/InputDevice.MotionRange.html">InputDevice.MotionRange</a></code> object specifies the source for
each axis value.</p>

<p>Finally, since the motion events from joysticks, gamepads, mice, and
trackballs are not touch events, the platform adds a new callback method for
passing them to a <code><a href="../../reference/android/view/View.html">View</a></code> as "generic" motion events.
Specifically, it reports the non-touch motion events to
<code><a href="../../reference/android/view/View.html">View</a></code>s through a call to <code><a href="../../reference/android/view/View.html#onGenericMotionEvent(android.view.MotionEvent)">onGenericMotionEvent()</a></code>, rather than to <code><a href="../../reference/android/view/View.html#onTouchEvent(android.view.MotionEvent)">onTouchEvent()</a></code>.</p>

<p>The platform dispatches generic motion events differently, depending on the
event source class. <code><a href="../../reference/android/view/InputDevice.html#SOURCE_CLASS_POINTER">SOURCE_CLASS_POINTER</a></code> events
go to the <code><a href="../../reference/android/view/View.html">View</a></code> under the pointer, similar to how touch
events work.  All others go to the currently focused <code><a href="../../reference/android/view/View.html">View</a></code>.
For example, this means a <code><a href="../../reference/android/view/View.html">View</a></code> must take focus in order to
receive joystick events. If needed, applications can handle these events at the
level of Activity or Dialog by implementing <code><a href="../../reference/android/view/View.html#onGenericMotionEvent(android.view.MotionEvent)">onGenericMotionEvent()</a></code> there instead.</p>

<p class="note">To look at a sample application that uses joystick motion
events, see <a
href="../../resources/samples/ApiDemos/src/com/example/android/apis/view/GameControllerInput.html">GameControllerInput</a>
and <a
href="../../resources/samples/ApiDemos/src/com/example/android/apis/view/GameView.html">GameView</a>.</p>

<h3>RTP API</h3>

<p>Android 3.1 exposes an API to its built-in RTP (Real-time Transport Protocol)
stack, which applications can use to manage on-demand or interactive data
streaming. In particular, apps that provide VOIP, push-to-talk, conferencing,
and audio streaming can use the API to initiate sessions and transmit or receive
data streams over any available network.</p>

<p>The RTP API is available in the <code><a href="../../reference/android/net/rtp/package-summary.html">android.net.rtp</a></code> package. Classes
include: </p>
<ul>
<li><code><a href="../../reference/android/net/rtp/RtpStream.html">RtpStream</a></code>, the base class of streams that send and
receive network packets with media payloads over RTP.</li>
<li><code><a href="../../reference/android/net/rtp/AudioStream.html">AudioStream</a></code>, a subclass of <code><a href="../../reference/android/net/rtp/RtpStream.html">RtpStream</a></code> that carries audio payloads over RTP.</li>
<li><code><a href="../../reference/android/net/rtp/AudioGroup.html">AudioGroup</a></code>, a local audio hub for managing and
mixing the device speaker, microphone, and <code><a href="../../reference/android/net/rtp/AudioStream.html">AudioStream</a></code>.</li>
<li><code><a href="../../reference/android/net/rtp/AudioCodec.html">AudioCodec</a></code>, which holds a collection of codecs that
you define for an <code><a href="../../reference/android/net/rtp/AudioStream.html">AudioStream</a></code>.</li>
</ul>

<p>To support audio conferencing and similar usages, an application instantiates
two classes as endpoints for the stream:</p>

<ul>
<li><code><a href="../../reference/android/net/rtp/AudioStream.html">AudioStream</a></code> specifies a remote endpoint and consists
of network mapping and a configured <code><a href="../../reference/android/net/rtp/AudioCodec.html">AudioCodec</a></code>.</li>
<li><code><a href="../../reference/android/net/rtp/AudioGroup.html">AudioGroup</a></code> represents the local endpoint for one
or more <code><a href="../../reference/android/net/rtp/AudioStream.html">AudioStream</a></code>s. The <code><a href="../../reference/android/net/rtp/AudioGroup.html">AudioGroup</a></code> mixes
all the <code><a href="../../reference/android/net/rtp/AudioStream.html">AudioStream</a></code>s and optionally interacts with the device
speaker and the microphone at the same time.</li>
</ul>

<p>The simplest usage involves a single remote endpoint and local endpoint.
For more complex usages, please refer to the limitations described for
<code><a href="../../reference/android/net/rtp/AudioGroup.html">AudioGroup</a></code>.</p>

<p>To use the RTP API, applications must request permission from the user by
declaring <code>&lt;uses-permission
android:name="android.permission.INTERNET"&gt;</code>
in their manifest files. To acquire the device microphone, the <code>&lt;uses-permission
android:name="android.permission.RECORD_AUDIO"&gt;</code> permission is also required.</p>

<h3 id="resizewidgets">Resizable app widgets</h3>

<p>Starting in Android 3.1, developers can make their homescreen widgets
resizeable &mdash; horizontally, vertically, or on both axes. Users touch-hold a
widget to show its resize handles, then drag the horizontal and/or vertical
handles to change the size on the layout grid. </p>

<p>Developers can make any Home screen widget resizeable by defining a
<code>resizeMode</code> attribute in the widget's <code><a href="../../reference/android/appwidget/AppWidgetProviderInfo.html">AppWidgetProviderInfo</a></code> metadata. Values for the
<code>resizeMode</code> attribute include "horizontal", "vertical", and "none".
To declare a widget as resizeable horizontally and vertically, supply the value
"horizontal|vertical".

<p>Here's an example: </p>

<pre>&lt;appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="294dp"
    android:minHeight="72dp"
    android:updatePeriodMillis="86400000"
    android:previewImage="@drawable/preview"
    android:initialLayout="@layout/example_appwidget"
    android:configure="com.example.android.ExampleAppWidgetConfigure"
    android:resizeMode="horizontal|vertical" &gt;
&lt;/appwidget-provider&gt;</pre>

<p>For more information about Home screen widgets, see the <a
href="../../guide/topics/appwidgets/index.html">App Widgets</a>
documentation.</p>

<h3 id="animation" style="margin-top:1.25em;">Animation framework</h3>

<ul>
<li>New ViewPropertyAnimator class
  <ul>
    <li>A new <code><a href="../../reference/android/view/ViewPropertyAnimator.html">ViewPropertyAnimator</a></code> class provides a
convenient
way for developers to animate select properties on <code><a href="../../reference/android/view/View.html">View</a></code> objects. The class
automaties and optimizes the animation of the properties and makes it easier to
manage multiple simulataneous animations on a <code><a href="../../reference/android/view/View.html">View</a></code> object.
<p>Using the <code><a href="../../reference/android/view/ViewPropertyAnimator.html">ViewPropertyAnimator</a></code> is straightforward. To animate properties for
a <code><a href="../../reference/android/view/View.html">View</a></code>, call <code><a href="../../reference/android/view/View.html#animate()">animate()</a></code> to
construct a <code><a href="../../reference/android/view/ViewPropertyAnimator.html">ViewPropertyAnimator</a></code> object for that <code><a href="../../reference/android/view/View.html">View</a></code>. Use the
methods on the <code><a href="../../reference/android/view/ViewPropertyAnimator.html">ViewPropertyAnimator</a></code> to specify what property to
animate and how to animate it. For example, to fade the <code><a href="../../reference/android/view/View.html">View</a></code> to transparent,
call <code>alpha(0);</code>. The <code><a href="../../reference/android/view/ViewPropertyAnimator.html">ViewPropertyAnimator</a></code> object
handles the details of configuring the underlying <code><a href="../../reference/android/animation/Animator.html">Animator</a></code> class and starting it, then rendering the
animation.</p></li>
  </ul>
</li>
<li>Animation background color
  <ul>
    <li>New <code><a href="../../reference/android/view/animation/Animation.html#getBackgroundColor()">getBackgroundColor()</a></code> and
    <code><a href="../../reference/android/view/animation/Animation.html#setBackgroundColor(int)">setBackgroundColor(int)</a></code> methods let
    you get/set the background color behind animations, for window animations
only. Currently the background must be black, with any desired alpha level.</li>
  </ul>
</li>
<li>Getting animated fraction from <code>ViewAnimator</code>
  <ul>
    <li>A new <code><a href="../../reference/android/animation/ValueAnimator.html#getAnimatedFraction()">getAnimatedFraction()</a></code>
method
lets you get the current animation fraction &mdash; the elapsed/interpolated
fraction used in the most recent frame update &mdash; from a <code><a href="../../reference/android/animation/ValueAnimator.html">ValueAnimator</a></code>.</li>
  </ul>
</li>
</ul>

<h3 "ui">UI framework</h3>
<ul>
<li>Forced rendering of a layer
  <ul>
    <li>A new <code><a href="../../reference/android/view/View.html#buildLayer()">buildLayer()</a></code> method lets an application
force a View's layer to be created and the View rendered into it immediately.
For example, an application could use this method to render a View into its
layer before starting an animation. If the View is complex, rendering it into
the layer before starting the animation will avoid skipping frames.</li>
  </ul>
</li>
<li>Camera distance
  <ul>
    <li>Applications can use a new method
<code><a href="../../reference/android/view/View.html#setCameraDistance(float)">setCameraDistance(float)</a></code> to set the distance from the
camera
to a View. This gives applications improved control over 3D transformations of
the View, such as rotations. </li>
  </ul>
</li>
<li>Getting a calendar view from a DatePicker
  <ul>
    <li>A new <code><a href="../../reference/android/widget/DatePicker.html#getCalendarView()">getCalendarView()</a></code> method
    lets you get a <code><a href="../../reference/android/widget/CalendarView.html">CalendarView</a></code> from a <code><a href="../../reference/android/widget/DatePicker.html">DatePicker</a></code>
    instance.</li>
  </ul>
</li>
<li>Getting callbacks when views are detached
  <ul>
    <li>A new <code><a href="../../reference/android/view/View.OnAttachStateChangeListener.html">View.OnAttachStateChangeListener</a></code> lets you
receive
callbacks when a View is attached or detached from its window. Use <code><a href="../../reference/android/view/View.html#addOnAttachStateChangeListener(android.view.View.OnAttachStateChangeListener)">addOnAttachStateChangeListener()</a></code>
to add a listener and <code><a href="../../reference/android/view/View.html#removeOnAttachStateChangeListener(android.view.View.OnAttachStateChangeListener)">addOnAttachStateChangeListener()</a></code> to remove it.</li>
  </ul>
</li>
<li>Fragment breadcrumb listener, new onInflate() signature
  <ul>
    <li>A new method, <code><a href="../../reference/android/app/FragmentBreadCrumbs.html#setOnBreadCrumbClickListener(android.app.FragmentBreadCrumbs.OnBreadCrumbClickListener)">setOnBreadCrumbClickListener()</a></code>,
provides a hook to let
applications intercept fragment-breadcrumb clicks and take any action needed
before going to the backstack entry or fragment that was clicked. </li>
    <li>In the <code><a href="../../reference/android/app/Fragment.html">Fragment</a></code> class, <code><a href="../../reference/android/app/Fragment.html#onInflate(android.util.AttributeSet, android.os.Bundle)">onInflate(attrs, savedInstanceState)</a></code> is deprecated. Please use <code><a href="../../reference/android/app/Fragment.html#onInflate(android.app.Activity, android.util.AttributeSet, android.os.Bundle)">onInflate(activity, attrs, savedInstanceState)</a></code> instead.</li>
  </ul>
</li>
<li>Display search result in new tab
  <ul>
    <li>An <code><a href="../../reference/android/app/SearchManager.html#EXTRA_NEW_SEARCH">EXTRA_NEW_SEARCH</a></code> data key for <code><a href="../../reference/android/content/Intent.html#ACTION_WEB_SEARCH">ACTION_WEB_SEARCH</a></code> intents lets you open a search in a
new browser tab, rather than in an existing one.</li>
  </ul>
</li>

<li>Drawable text cursor
  <ul>
<li>You can now specify a drawable to use as the text cursor using the new
resource attribute <code><a href="../../reference/android/R.attr.html#textCursorDrawable">textCursorDrawable</a></code>.</li>
  </ul>
</li>
<li>Setting displayed child in remote views
  <ul>
    <li>A new convenience method, <code><a href="../../reference/android/widget/RemoteViews.html#setDisplayedChild(int, int)">setDisplayedChild(viewId,
childIndex)</a></code>, is available in <code><a href="../../reference/android/widget/RemoteViews.html">RemoteViews</a></code> subclasses, to
let you set the child displayed in <code><a href="../../reference/android/widget/ViewAnimator.html">ViewAnimator</a></code> and
<code><a href="../../reference/android/widget/AdapterViewAnimator.html">AdapterViewAnimator</a></code> subclasses such as <code><a href="../../reference/android/widget/AdapterViewFlipper.html">AdapterViewFlipper</a></code>, <code><a href="../../reference/android/widget/StackView.html">StackView</a></code>, <code><a href="../../reference/android/widget/ViewFlipper.html">ViewFlipper</a></code>, and <code><a href="../../reference/android/widget/ViewSwitcher.html">ViewSwitcher</a></code>.</li>
  </ul>
</li>
<li>Generic keys for gamepads and other input devices
  <ul>
    <li><code><a href="../../reference/android/view/KeyEvent.html">KeyEvent</a></code> adds a range of generic keycodes to
    accommodate gamepad buttons. The class also adds
    <code><a href="../../reference/android/view/KeyEvent.html#isGamepadButton(int)">isGamepadButton(int)</a></code> and several other
    helper methods for working with keycodes.</li>
  </ul>
</li>
</ul>

<h3 id="graphics" style="margin-top:1.3em;">Graphics</h3>

<ul>
<li>Helpers for managing bitmaps
  <ul>
  <li><code><a href="../../reference/android/graphics/Bitmap.html#setHasAlpha(boolean)">setHasAlpha(boolean)</a></code> lets an app indicate that
all of the pixels in a Bitmap are known to be opaque (false) or that some of the
pixels may contain non-opaque alpha values (true). Note, for some configs (such
as RGB_565) this call is ignored, since it does not support per-pixel alpha
values. This is meant as a drawing hint, as in some cases a bitmap that is known
to be opaque can take a faster drawing case than one that may have non-opaque
per-pixel alpha values. </li>
  <li><code><a href="../../reference/android/graphics/Bitmap.html#getByteCount()">getByteCount()</a></code> gets a Bitmap's size in
bytes.</li>
  <li><code><a href="../../reference/android/graphics/Bitmap.html#getGenerationId()">getGenerationId()</a></code> lets an application find
out whether a Bitmap has been modified, such as for caching.</li>
  <li><code><a href="../../reference/android/graphics/Bitmap.html#sameAs(android.graphics.Bitmap)">sameAs(android.graphics.Bitmap)</a></code> determines
whether a given Bitmap differs from the current Bitmap, in dimension,
configuration, or pixel data. </li>
  </ul>
</li>
<li>Setting camera location and rotation
  <ul>
  <li><code><a href="../../reference/android/graphics/Camera.html">Camera</a></code> adds two new methods <code><a href="../../reference/android/graphics/Camera.html#rotate(float, float, float)">rotate()</a></code> and <code><a href="../../reference/android/graphics/Camera.html#setLocation(float, float, float)">setLocation()</a></code> for
control of the
camera's location, for 3D transformations.</li>
</ul>
</li>
</ul>

<h3 id="network" style="margin-top:1.25em;">Network</h3>

<ul>
<li>High-performance Wi-Fi lock
  <ul>
    <li>A new high-performance Wi-Fi lock lets applications maintain
high-performance Wi-Fi connections even when the device screen is off.
Applications that stream music, video, or voice for long periods can acquire the
high-performance Wi-Fi lock to ensure streaming performance even when the screen
is off. Because it uses more power, applications should acquire the
high-performance Wi-Fi when there is a need for a long-running active
connection.
<p>To create a high-performance lock, pass <code><a href="../../reference/android/net/wifi/WifiManager.html#WIFI_MODE_FULL_HIGH_PERF">WIFI_MODE_FULL_HIGH_PERF</a></code> as the lock mode in a
call to <code><a href="../../reference/android/net/wifi/WifiManager.html#createWifiLock(int, java.lang.String)">createWifiLock()</a></code>.</p></li>
  </ul>
</li>
<li>More traffic stats
  <ul>
    <li>Applications can now access statistics about more types of network usage
using new methods in <code><a href="../../reference/android/net/TrafficStats.html">TrafficStats</a></code>. Applications can use the
methods to get UDP stats, packet count, TCP transmit/receive payload bytes and
segments for a given UID.</li>
  </ul>
</li>
<li>SIP auth username
  <ul>
    <li>Applications can now get and set the SIP auth username for a profile
using
the new methods <code><a href="../../reference/android/net/sip/SipProfile.html#getAuthUserName()">getAuthUserName()</a></code> and <code><a href="../../reference/android/net/sip/SipProfile.Builder.html#setAuthUserName(java.lang.String)">setAuthUserName()</a></code>.</li>
  </ul>
</li>
</ul>


<h3 id="download" style="margin-top:1.25em;">Download Manager</h3>
<ul>
<li>Handling of completed downloads
  <ul>
    <li>Applications can now initiate downloads that notify users only on
completion. To initiate this type of download, applications pass <code><a href="../../reference/android/app/DownloadManager.Request.html#VISIBILITY_VISIBLE_NOTIFY_ONLY_COMPLETION">VISIBILITY_VISIBLE_NOTIFY_ONLY_COMPLETION</a></code>
in the <code><a href="../../reference/android/app/DownloadManager.Request.html#setNotificationVisibility(int)">setNotificationVisibility()</a></code> method of
the a request object.</li>
    <li>A new method, <code><a href="../../reference/android/app/DownloadManager.html#addCompletedDownload(java.lang.String, java.lang.String, boolean, java.lang.String, java.lang.String, long, boolean)">addCompletedDownload()</a></code>, lets an application add a file to the
downloads database, so that it can be managed by the Downloads application.</li>
  </ul>
</li>
<li>Show downloads sorted by size
  <ul>
    <li>Applications can start the Downloads application in sort-by-size mode by
adding the new extra <code><a href="../../reference/android/app/DownloadManager.html#INTENT_EXTRAS_SORT_BY_SIZE">INTENT_EXTRAS_SORT_BY_SIZE</a></code> to an <code><a href="../../reference/android/app/DownloadManager.html#ACTION_VIEW_DOWNLOADS">ACTION_VIEW_DOWNLOADS</a></code> intent.</li>
    </ul>
</li>
</ul>

<h3 id="ime" style="margin-top:1.25em;">IME framework</h3>

<ul>
<li>Getting an input method's extra value key
  <ul><li>The <code><a href="../../reference/android/view/inputmethod/InputMethodSubtype.html">InputMethodSubtype</a></code> adds the
method
<code><a href="../../reference/android/view/inputmethod/InputMethodSubtype.html#containsExtraValueKey(java.lang.String)">containsExtraValueKey()</a></code> to check whether an ExtraValue string is stored
for the subtype and
the method <code><a href="../../reference/android/view/inputmethod/InputMethodSubtype.html#getExtraValueOf(java.lang.String)">getExtraValueOf()</a></code> to extract a specific key value from the ExtraValue hashmap.
</li>
  </ul>
</li>
</ul>

<h3 id="media" style="margin-top:1.25em;">Media</h3>

<ul>
<li>New streaming audio formats
  <ul>
    <li>The media framework adds built-in support for raw ADTS AAC content, for
improved streaming audio, as well as support for FLAC audio, for highest quality
(lossless) compressed audio content. See the <a
href="../../guide/appendix/media-formats.html">Supported Media Formats</a>
document for more information.</p></li>
  </ul>
</li>
</ul>

<h3 id="launchcontrols" style="margin-top:1.25em;">Launch controls on stopped
applications</h3>

<p>Starting from Android 3.1, the system's package manager keeps track of
applications that are in a stopped state and provides a means of controlling
their launch from background processes and other applications.</p>

<p>Note that an application's stopped state is not the same as an Activity's
stopped state. The system manages those two stopped states separately.</p>

<p>The platform defines two new intent flags that let a sender specify
whether the Intent should be allowed to activate components in stopped
application.</p>

<ul>
<li><code><a href="../../reference/android/content/Intent.html#FLAG_INCLUDE_STOPPED_PACKAGES">FLAG_INCLUDE_STOPPED_PACKAGES</a></code> &mdash;
Include intent filters of stopped applications in the list of potential targets
to resolve against. </li>
<li><code><a href="../../reference/android/content/Intent.html#FLAG_EXCLUDE_STOPPED_PACKAGES">FLAG_EXCLUDE_STOPPED_PACKAGES</a></code> &mdash;
Exclude intent filters of stopped applications from the list of potential
targets.</li>
</ul>

<p>When neither or both of these flags is defined in an intent, the default
behavior is to include filters of stopped applications in the list of
potential targets.</p>

<p>Note that the system adds <code><a href="../../reference/android/content/Intent.html#FLAG_EXCLUDE_STOPPED_PACKAGES">FLAG_EXCLUDE_STOPPED_PACKAGES</a></code> <em>to all broadcast
intents</em>. It does this to prevent broadcasts from background services from
inadvertently or unnecessarily launching components of stoppped applications.
A background service or application can override this behavior by adding the
<code><a href="../../reference/android/content/Intent.html#FLAG_INCLUDE_STOPPED_PACKAGES">FLAG_INCLUDE_STOPPED_PACKAGES</a></code> flag to broadcast
intents that should be allowed to activate stopped applications.</p>

<p>Applications are in a stopped state when they are first installed but are not
yet launched and when they are manually stopped by the user (in Manage
Applications).</p>

<h3 id="installnotification">Notification of application first launch and upgrade</h3>

<p>The platform adds improved notification of application first launch and
upgrades through two new intent actions:</p>

<ul>
<li><code><a href="../../reference/android/content/Intent.html#ACTION_PACKAGE_FIRST_LAUNCH">ACTION_PACKAGE_FIRST_LAUNCH</a></code> &mdash; Sent to
the installer package of an application when that application is first launched
(that is, the first time it is moved out of a stopped state). The data
contains the name of the package. </li>

<li><code><a href="../../reference/android/content/Intent.html#ACTION_MY_PACKAGE_REPLACED">ACTION_MY_PACKAGE_REPLACED</a></code> &mdash; Notifies
an application that it was updated, with a new version was installed over
an existing version.  This is only sent to the application that was replaced. It
does not contain any additional data. To receive it, declare an intent filter
for this action. You can use the intent to trigger code that helps get your
application back in proper running shape after an upgrade.

<p>This intent is sent directly to the application, but only if the application
was upgraded while it was in started state (not in a stopped state).</p></li>

</ul>

<h3 id="other">Core utilities</h3>

<ul>
<li>LRU cache
  <ul>
    <li>A new <code><a href="../../reference/android/util/LruCache.html">LruCache</a></code> class lets your applications benefit
from efficient caching. Applications can use the class to reduce the time spent
computing or downloading data from the network, while maintaining a sensible
memory footprint for the cached data.<code><a href="../../reference/android/util/LruCache.html">LruCache</a></code> is a cache
that holds strong references to a limited number of values. Each time a value is
accessed, it is moved to the head of a queue. When a value is added to a full
cache, the value at the end of that queue is evicted and may become eligible for
garbage collection.</li>
  </ul>
</li>
<li>File descriptor as <code>int</code>
  <ul>
    <li>You can now get the native file descriptor int for a <code><a href="../../reference/android/os/ParcelFileDescriptor.html">ParcelFileDescriptor</a></code> using either of the new methods <code><a href="../../reference/android/os/ParcelFileDescriptor.html#getFd()">getFd()</a></code> or <code><a href="../../reference/android/os/ParcelFileDescriptor.html#detachFd()">detachFd()</a></code>. </li>
  </ul>
</li>
</ul>






<h3 id="webkit" style="margin-top:1.25em;">WebKit</h3>

<ul>

<li>File scheme cookies
  <ul>
    <li>The <code><a href="../../reference/android/webkit/CookieManager.html">CookieManager</a></code> now supports cookies that use
the
<code>file:</code> URI scheme. You can use <code><a href="../../reference/android/webkit/CookieManager.html#setAcceptFileSchemeCookies(boolean)">setAcceptFileSchemeCookies()</a></code> to
enable/disable support for file scheme cookies, before constructing an instance
of <code>WebView</code> or <code>CookieManager</code>. In a
<code>CookieManager</code> instance, you can check whether file scheme cookies
is enabled by calling <code><a href="../../reference/android/webkit/CookieManager.html#allowFileSchemeCookies()">allowFileSchemeCookies()</a></code>.</li>
  </ul>
</li>
<li>Notification of login request
  <ul>
  <li>To support the browser autologin features introduced in Android 3.0, the
new
method <code><a href="../../reference/android/webkit/WebViewClient.html#onReceivedLoginRequest(android.webkit.WebView, java.lang.String, java.lang.String, java.lang.String)">onReceivedLoginRequest()</a></code>
notifies the host
application that an autologin request for the user was processed. </li>
  </ul>
</li>
<li>Removed classes and interfaces
  <ul>
    <li>Several classes and interfaces were removed from the public API, after
previously being in deprecated state. See the <a
href="../../sdk/api_diff/12/changes.html">API
Differences Report</a> for more information.</p></li>
  </ul>
  </li>
</ul>



<h3 id="browser" style="margin-top:1.25em;">Browser</h3>

<p>The Browser application adds the following features to support web
applications:</p>

<ul>
<li>Support for inline playback of video embedded in HTML5
<code>&lt;video&gt;</code> tag. Playback is hardware-accelerated where possible.
</li>
<li>Layer support for fixed position elements for all sites (mobile and
desktop).</li>
</ul>





<h3 id="features">New feature constants</h3>

<p>The platform adds new hardware feature constants that developers can declare
in their application manifests, to inform external entities such as Google
Play of the application's requirement for new hardware capabilities supported
in this version of the platform. Developers declare these and other feature
constants in <a
href="../../guide/topics/manifest/uses-feature-element.html"><code>&lt;uses-feature&gt;</code></a> manifest elements.

<ul>
  <li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_USB_ACCESSORY">android.hardware.usb.accessory</a></code> &mdash; The application uses the <a href="#usb">USB
API</a> to communicate with external hardware devices connected over USB and
function as hosts.</li>
  <li><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_USB_HOST">android.hardware.usb.host</a></code> &mdash; The application uses the <a href="#usb">USB API</a>
to communicate with external hardware devices connected over USB and function as
devices.</li>
</ul>

<p>Google Play filters applications based on features declared in <a
href="../../guide/topics/manifest/uses-feature-element.html"><code>&lt;uses-feature&gt;</code></a> manifest elements. For more information about
declaring features in an application manifest, read <a
href="../../google/play/filters.html">Google Play
Filters</a>.</p>



<h3 id="api-diff">API Differences Report</h3>

<p>For a detailed view of all API changes in Android 3.1 (API
Level
12), see the <a
href="../../sdk/api_diff/12/changes.html">API
Differences Report</a>.</p>





<h2 id="api-level">API Level</h2>

<p>The Android 3.1 platform delivers an updated version of
the framework API. The Android 3.1 API
is assigned an integer identifier &mdash;
<strong>12</strong> &mdash; that is
stored in the system itself. This identifier, called the "API Level", allows the
system to correctly determine whether an application is compatible with
the system, prior to installing the application. </p>

<p>To use APIs introduced in Android 3.1 in your application,
you need compile the application against the Android library that is provided in
the Android 3.1 SDK platform. Depending on your needs, you
might
also need to add an <code>android:minSdkVersion="12"</code>
attribute to the <code>&lt;uses-sdk&gt;</code> element in the application's
manifest.</p>

<p>For more information, read <a href="../../guide/topics/manifest/uses-sdk-element.html#ApiLevels">What is API
Level?</a></p>

    </div>

    

  </div> <!-- end jd-content -->



<div class="wrap">
  <div class="dac-footer">
    <div class="cols dac-footer-main">
      <div class="col-1of2">
        <a class="dac-footer-getnews" id="newsletter" data-modal-toggle="newsletter" href="javascript:;">Get news &amp; tips <span
          class="dac-fab dac-primary"><i class="dac-sprite dac-mail"></i></span></a>
      </div>
      <div class="col-1of2 dac-footer-reachout">
        <div class="dac-footer-contact">
          <a class="dac-footer-contact-link" href="http://android-developers.blogspot.com/">Blog</a>
          <a class="dac-footer-contact-link" href="../../support.html">Support</a>
        </div>
        <div class="dac-footer-social">
          <a class="dac-button-social dac-youtube dac-footer-social-link" href="https://www.youtube.com/user/androiddevelopers"><i class="dac-sprite dac-youtube"></i></a>
          <a class="dac-button-social dac-gplus dac-footer-social-link" href="https://plus.google.com/+AndroidDevelopers"><i class="dac-sprite dac-gplus"></i></a>
          <a class="dac-button-social dac-twitter dac-footer-social-link" href="https://twitter.com/AndroidDev"><i class="dac-sprite dac-twitter"></i></a>
        </div>
      </div>
    </div>

    <hr class="dac-footer-separator"/>

    
      <p class="dac-footer-copyright">
        
  Except as noted, this content is
  licensed under <a href="http://creativecommons.org/licenses/by/2.5/">
  Creative Commons Attribution 2.5</a>. For details and
  restrictions, see the <a href="../../license.html">Content
  License</a>.

      </p>
    

    <p class="dac-footer-links">
      <a href="../android.html">About Android</a>
      <a href="../../auto/index.html">Auto</a>
      <a href="../../tv/index.html">TV</a>
      <a href="../../wear/index.html">Wear</a>
      <a href="../../legal.html">Legal</a>

      <span id="language" class="locales">
        <select name="language" onchange="changeLangPref(this.value, true)">
          <option value="en" selected="selected">English</option>
          <option value="es">Español</option>
          <option value="in">Bahasa Indonesia</option>
          <option value="ja">日本語</option>
          <option value="ko">한국어</option>
          <option value="pt-br">Português Brasileiro</option>
          <option value="ru">Русский</option>
          <option value="vi">tiếng Việt</option>
          <option value="zh-cn">中文（简体)</option>
          <option value="zh-tw">中文（繁體)</option>
        </select>
      </span>
    </p>
  </div>
</div>
<!-- end footer -->



  



<div data-modal="newsletter" data-newsletter data-swap class="dac-modal newsletter">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <div class="dac-swap" data-swap-container>
          <section class="dac-swap-section dac-active dac-down">
            <h2 class="norule dac-modal-header-title" data-t="newsletter.title"></h2>
            <p class="dac-modal-header-subtitle" data-t="newsletter.requiredHint"></p>
          </section>
          <section class="dac-swap-section dac-up">
            <h2 class="norule dac-modal-header-title" data-t="newsletter.successTitle">Hooray!</h2>
          </section>
        </div>
      </header>
      <div class="dac-swap" data-swap-container>
        <section class="dac-swap-section dac-active dac-left">
          <form action="https://docs.google.com/forms/d/1QgnkzbEJIDu9lMEea0mxqWrXUJu0oBCLD7ar23V0Yys/formResponse" class="dac-form" method="post" target="dac-newsletter-iframe">
            <input type="hidden" name="entry.935454734" data-newsletter-language>
            <section class="dac-modal-content">
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-full-name" class="dac-form-floatlabel" data-t="newsletter.name">Full name</label>
                      <input type="text" class="dac-form-input" name="entry.1357890476" id="newsletter-full-name" required>
                      <span class="dac-form-required">*</span>
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-email" class="dac-form-floatlabel" data-t="newsletter.email">Email address</label>
                      <input type="email" class="dac-form-input" name="entry.472100832" id="newsletter-email" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-company" class="dac-form-floatlabel" data-t="newsletter.company">Company / developer name</label>
                      <input type="text" class="dac-form-input" name="entry.1664780309" id="newsletter-company">
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-play-store" class="dac-form-floatlabel" data-t="newsletter.appUrl">One of your Play Store app URLs</label>
                      <input type="url" class="dac-form-input" name="entry.47013838" id="newsletter-play-store" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                </div>
              </fieldset>
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <legend class="dac-form-legend"><span data-t="newsletter.business.label">Which best describes your business:</span><span class="dac-form-required">*</span>
                    </legend>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Apps" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-app" required>
                      <label for="newsletter-business-type-app" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-app" class="dac-form-label" data-t="newsletter.business.apps">Apps</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Games" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-games" required>
                      <label for="newsletter-business-type-games" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-games" class="dac-form-label" data-t="newsletter.business.games">Games</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Apps and Games" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-appsgames" required>
                      <label for="newsletter-business-type-appsgames" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-appsgames" class="dac-form-label" data-t="newsletter.business.both">Apps &amp; Games</label>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol newsletter-checkboxes">
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="entry.732309842" id="newsletter-add" required value="Add me to the mailing list for the monthly newsletter and occasional emails about development and Google Play opportunities.">
                          <label for="newsletter-add" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-add" class="dac-form-label dac-form-aside"><span data-t="newsletter.confirmMailingList"></span><span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="entry.2045036090" id="newsletter-terms" required value="I acknowledge that the information provided in this form will be subject to Google's privacy policy (https://www.google.com/policies/privacy/).">
                          <label for="newsletter-terms" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-terms" class="dac-form-label dac-form-aside"><span data-t="newsletter.privacyPolicy" data-t-html></span><span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fieldset>
            </section>
            <footer class="dac-modal-footer">
              <div class="cols">
                <div class="col-2of5">
                </div>
              </div>
              <button type="submit" value="Submit" class="dac-fab dac-primary dac-large dac-modal-action"><i class="dac-sprite dac-arrow-right"></i></button>
            </footer>
          </form>
        </section>
        <section class="dac-swap-section dac-right">
          <div class="dac-modal-content">
            <p class="newsletter-success-message" data-t="newsletter.successDetails"></p>
          </div>
        </section>
      </div>
    </div>
  </div>
</div>
<!-- end newsletter modal -->

<!-- start reset language header modal -->
<div data-modal="langform" class="dac-modal" id="langform">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title"></h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <fieldset class="dac-form-fieldset">
              <div class="cols">
                <div class="col-2of2 langform-leftCol">
                  <p id="resetLangText"></p>
                  <p id="resetLangCta"></p>
                </div>
              </div>
            </fieldset>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
              <button class="button dac-primary dac-modal-action lang yes" data-t="newsletter.resetLangButtonYes" data-modal-toggle></button>
              <button class="button dac-primary dac-modal-action lang no" data-t="newsletter.resetLangButtonNo" data-modal-toggle></button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div>
<!-- end langreset modal -->


</div> <!-- end body-content --> 




<script src="../../ajax/developer.android.com/ytblogger_lists_unified.js" defer></script>
<script src="/jd_lists_unified_en.js?v=17" defer></script>
<script src="/reference/lists.js?v=17" defer></script>
<script src="/reference/gcm_lists.js?v=17" defer></script>
<script src="/reference/gms_lists.js?v=17" defer></script>
<script>
  // Load localized metadata.
  (function(lang) {
    if (lang === 'en') { return; }

    // Write it to the document so it gets evaluated before DOMContentReady.
    document.write('<script src="/jd_lists_unified_' + lang + '.js?v=14" defer></' + 'script>');
  })(getLangPref())
</script>


</body>
</html>
