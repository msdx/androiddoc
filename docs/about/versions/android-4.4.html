<!DOCTYPE html>
























































































<html>
<head>

  

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<link rel="shortcut icon" type="image/x-icon" href="../../favicon.ico" />
<link rel="alternate" href="http://developer.android.com/" hreflang="en" />
<link rel="alternate" href="http://developer.android.com/intl/es/" hreflang="es" />
<link rel="alternate" href="http://developer.android.com/intl/id/" hreflang="id" />
<link rel="alternate" href="http://developer.android.com/intl/ja/" hreflang="ja" />
<link rel="alternate" href="http://developer.android.com/intl/ko/" hreflang="ko" />
<link rel="alternate" href="http://developer.android.com/intl/pt-br/" hreflang="pt-br" />
<link rel="alternate" href="http://developer.android.com/intl/ru/" hreflang="ru" />
<link rel="alternate" href="http://developer.android.com/intl/vi/" hreflang="vi" />
<link rel="alternate" href="http://developer.android.com/intl/zh-cn/" hreflang="zh-cn" />
<link rel="alternate" href="http://developer.android.com/intl/zh-tw/" hreflang="zh-tw" />


<title>Android 4.4 APIs | Android Developers
</title>

<meta name="description" content="API Level: KITKAT) is a new release for the Android platform that offers new features for users and app developers. This document provides an introduction to the most notable new APIs. As an app developer, you should download the Android targetSdkVersion…">

<!-- STYLESHEETS -->
<link rel="stylesheet"
href="http://fonts.googleapis.com/css?family=Roboto+Condensed">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold"
  title="roboto">

<link href="../../assets/css/default.css?v=16" rel="stylesheet" type="text/css">

<!-- JAVASCRIPT -->
<script src="../../assets/js/android_3p-bundle.js" type="text/javascript"></script>
<script type="text/javascript">
  var toRoot = "../../";
  var metaTags = [];
  var devsite = false;
  var useUpdatedTemplates = false;
</script>
<script src="../../assets/js/docs.js?v=17" type="text/javascript"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//../../ajax/www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5831155-1', 'android.com');
  ga('create', 'UA-49880327-2', 'android.com', {'name': 'universal'});  // New tracker);
  ga('send', 'pageview');
  ga('universal.send', 'pageview'); // Send page view for new tracker.
</script>

</head>

<body class="gc-documentation


 about" itemscope itemtype="http://schema.org/Article">
  
  <a name="top"></a>
  <!-- Header -->
  <div id="header-wrapper">
    <div class="dac-header " id="header">
      <div class="dac-header-inner">
        <a class="dac-nav-toggle" data-dac-toggle-nav href="javascript:;" title="Open navigation">
          <span class="dac-nav-hamburger">
            <span class="dac-nav-hamburger-top"></span>
            <span class="dac-nav-hamburger-mid"></span>
            <span class="dac-nav-hamburger-bot"></span>
          </span>
        </a>
        <a class="dac-header-logo" href="../../index.html">
          <img class="dac-header-logo-image" src="../../assets/images/android_logo.png"
              srcset="../../assets/images/android_logo@2x.png 2x"
              width="32" height="36" alt="Android" /> Developers
          </a>

        <ul class="dac-header-tabs">
          <li>
          <a class="dac-header-tab" href="../../design/index.html"
             zh-tw-lang="設計"
             zh-cn-lang="设计"
             ru-lang="Проектирование"
             ko-lang="디자인"
             ja-lang="設計"
             es-lang="Diseñar">Design</a>
          </li>
          <li>
          <a class="dac-header-tab" href="../../develop/index.html"
             zh-tw-lang="開發"
             zh-cn-lang="开发"
             ru-lang="Разработка"
             ko-lang="개발"
             ja-lang="開発"
             es-lang="Desarrollar">Develop</a>
          </li>
          <li>
          <a class="dac-header-tab" href="../../distribute/index.html"
             zh-tw-lang="發佈"
             zh-cn-lang="分发"
             ru-lang="Распространение"
             ko-lang="배포"
             ja-lang="配布"
             es-lang="Distribuir">Distribute</a>
          </li>
        </ul>

        <a class="dac-header-console-btn" href="https://play.google.com/apps/publish/">
          <span class="dac-sprite dac-google-play"></span>
          <span class="dac-visible-desktop-inline">Developer</span>
          Console
        </a>

        
        
        
  <form data-search class="dac-header-search">
    <button class="dac-header-search-close" data-search-close>
      <i class="dac-sprite dac-back-arrow"></i>
    </button>

    <div class="dac-header-search-inner">
      <i class="dac-sprite dac-search-white dac-header-search-icon"></i>
      <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q" class="dac-header-search-input" placeholder="Search" />
      <button class="dac-header-search-clear dac-hidden" data-search-clear>
        <i class="dac-sprite dac-close-black"></i>
      </button>
    </div>
  </form>

        
      </div><!-- end header-wrap.wrap -->
    </div><!-- end header -->
  </div> <!--end header-wrapper -->

  
  <!-- Navigation-->
  <nav class="dac-nav">
    <div class="dac-nav-dimmer" data-dac-toggle-nav></div>

    <div class="dac-nav-sidebar" data-swap data-dynamic="false" data-transition-speed="300" data-dac-nav>
      <div data-swap-container>
        
  
    <a class="dac-nav-back-button dac-swap-section dac-up dac-no-anim" data-swap-button href="javascript:;">
      <i class="dac-sprite dac-nav-back"></i> <span class="dac-nav-back-title">Back</span>
    </a>
    <div class="dac-nav-sub dac-swap-section dac-right dac-active" itemscope itemtype="http://schema.org/SiteNavigationElement">
      
        <ul id="nav">
  <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/marshmallow/index.html">
      <span class="en">Marshmallow</span></a></div>
      <ul>
        <li><a href="../../about/versions/marshmallow/android-6.0.html">
        Android 6.0 APIs</a></li>
        <li><a href="../../about/versions/marshmallow/android-6.0-changes.html">
        Android 6.0 Changes</a></li>
        <li><a href="../../about/versions/marshmallow/samples.html">
        Android 6.0 Samples</a></li>
      </ul>
  </li>
  <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/lollipop.html"
              zh-tw-lang="Lollipop"
              zh-cn-lang="Lollipop"
              ru-lang="Lollipop"
              ko-lang="Lollipop"
              ja-lang="Lollipop"
              es-lang="Lollipop">
      <span class="en">Lollipop</span></a></div>
      <ul>
        <li><a href="../../about/versions/android-5.1.html">Android 5.1 APIs</a></li>
        <li><a href="../../about/versions/android-5.0.html"
              zh-tw-lang="Android 5.0 API"
              zh-cn-lang="Android 5.0 API"
              ru-lang="API для Android 5.0"
              ko-lang="Android 5.0 API"
              ja-lang="Android 5.0 API"
              es-lang="API de Android 5.0">
              Android 5.0 APIs</a></li>
        <li><a href="../../about/versions/android-5.0-changes.html">

        Android 5.0 Changes</a></li>
      </ul>
  </li>
  <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/kitkat.html">
      <span class="en">KitKat</span></a></div>
      <ul>
        <li><a href="../../about/versions/android-4.4.html">Android 4.4 APIs</a></li>
      </ul>
  </li>
  <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/jelly-bean.html">
      <span class="en">Jelly Bean</span></a></div>
      <ul>
        <li><a href="../../about/versions/android-4.3.html">Android 4.3 APIs</a></li>
        <li><a href="../../about/versions/android-4.2.html">Android 4.2 APIs</a></li>
        <li><a href="../../about/versions/android-4.1.html">Android 4.1 APIs</a></li>
      </ul>
  </li>

  <!-- <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/android-4.0-highlights.html">
      <span class="en">Ice Cream Sandwich</span></a></div>
      <ul>
        <li><a href="../../about/versions/android-4.0.3.html">Android 4.0.3 APIs</a></li>
        <li><a href="../../about/versions/android-4.0.html">Android 4.0 APIs</a> </li>
      </ul>
  </li> -->

  <li class="nav-section">
    <div class="nav-section-header empty"><a href="../../about/android.html">About Android</a></div>
  </li>

  <li class="nav-section">
    <div class="nav-section-header empty"><a href="../../about/dashboards/index.html">Dashboards</a></div>
  </li>

</ul>
      
    </div>
  

        <ul id="dac-main-navigation" class="dac-nav-list dac-swap-section dac-left dac-no-anim">
        <li class="dac-nav-item home">
          <a class="dac-nav-link" href="../../index.html">Home</a>
          <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider"></i>
          <ul class="dac-nav-secondary about">
            <li class="dac-nav-item versions">
              <a class="dac-nav-link" href="../../about/versions/marshmallow/index.html">Android</a>
            </li>
            <li class="dac-nav-item wear">
              <a class="dac-nav-link" href="../../wear/index.html">Wear</a>
            </li>
            <li class="dac-nav-item tv">
              <a class="dac-nav-link" href="../../tv/index.html">TV</a>
            </li>
            <li class="dac-nav-item auto">
              <a class="dac-nav-link" href="../../auto/index.html">Auto</a>
            </li>
          </ul>
        </li>
        <li class="dac-nav-item design">
          <a class="dac-nav-link" href="../../design/index.html"
             zh-tw-lang="設計"
             zh-cn-lang="设计"
             ru-lang="Проектирование"
             ko-lang="디자인"
             ja-lang="設計"
             es-lang="Diseñar">Design</a>
        </li>
        <li class="dac-nav-item develop">
          <a class="dac-nav-link" href="../../develop/index.html"
             zh-tw-lang="開發"
             zh-cn-lang="开发"
             ru-lang="Разработка"
             ko-lang="개발"
             ja-lang="開発"
             es-lang="Desarrollar">Develop</a>
          <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider"></i>
          <ul class="dac-nav-secondary develop">
            <li class="dac-nav-item training">
              <a class="dac-nav-link" href="../../training/index.html"
                 zh-tw-lang="訓練課程"
                 zh-cn-lang="培训"
                 ru-lang="Курсы"
                 ko-lang="교육"
                 ja-lang="トレーニング"
                 es-lang="Capacitación">Training</a>
            </li>
            <li class="dac-nav-item guide">
              <a class="dac-nav-link" href="../../guide/index.html"
                 zh-tw-lang="API 指南"
                 zh-cn-lang="API 指南"
                 ru-lang="Руководства по API"
                 ko-lang="API 가이드"
                 ja-lang="API ガイド"
                 es-lang="Guías de la API">API Guides</a>
            </li>
            <li class="dac-nav-item reference">
              <a class="dac-nav-link" href="../../reference/packages.html"
                 zh-tw-lang="參考資源"
                 zh-cn-lang="参考"
                 ru-lang="Справочник"
                 ko-lang="참조문서"
                 ja-lang="リファレンス"
                 es-lang="Referencia">Reference</a>
            </li>
            <li class="dac-nav-item tools">
              <a class="dac-nav-link" href="../../sdk/index.html"
                 zh-tw-lang="相關工具"
                 zh-cn-lang="工具"
                 ru-lang="Инструменты"
                 ko-lang="도구"
                 ja-lang="ツール"
                 es-lang="Herramientas">Tools</a></li>
            <li class="dac-nav-item google">
              <a class="dac-nav-link" href="../../google/index.html">Google Services</a>
            </li>
            
          </ul>
        </li>
        <li class="dac-nav-item distribute">
          <a class="dac-nav-link" href="../../distribute/googleplay/index.html"
             zh-tw-lang="發佈"
             zh-cn-lang="分发"
             ru-lang="Распространение"
             ko-lang="배포"
             ja-lang="配布"
             es-lang="Distribuir">Distribute</a>
          <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider"></i>
          <ul class="dac-nav-secondary distribute">
            <li class="dac-nav-item googleplay">
              <a class="dac-nav-link" href="../../distribute/googleplay/index.html">Google Play</a></li>
            <li class="dac-nav-item essentials">
              <a class="dac-nav-link" href="../../distribute/essentials/index.html">Essentials</a></li>
            <li class="dac-nav-item users">
              <a class="dac-nav-link" href="../../distribute/users/index.html">Get Users</a></li>
            <li class="dac-nav-item engage">
              <a class="dac-nav-link" href="../../distribute/engage/index.html">Engage &amp; Retain</a></li>
            <li class="dac-nav-item monetize">
              <a class="dac-nav-link" href="../../distribute/monetize/index.html">Earn</a>
            </li>
            <li class="dac-nav-item analyze">
              <a class="dac-nav-link" href="../../distribute/analyze/index.html">Analyze</a>
            </li>
            <li class="dac-nav-item stories">
              <a class="dac-nav-link" href="../../distribute/stories/index.html">Stories</a>
            </li>
          </ul>
        </li>
        <li class="dac-nav-item preview">
          <a class="dac-nav-link" href="../../preview/index.html">Preview</a>
        </li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- end navigation-->
  

<!-- Nav Setup -->
<script>$('[data-dac-nav]').dacNav();</script>



  
    
  <div class="wrap clearfix" id="body-content">

  

  
  <div id="search-results" class="dac-search-results">
    <div id="dac-search-results-history" class="dac-search-results-history">
      <div class="wrap dac-search-results-history-wrap">
        <div class="cols">
          <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
            <h2>Most visited</h2>
            <div class="resource-flow-layout" data-history-query="history:most/visited" data-maxresults="3" data-cardsizes="18x2"></div>
          </div>

          <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
            <h2>Recently visited</h2>
            <div class="resource-flow-layout cols" data-history-query="history:recent" data-allow-duplicates="true" data-maxresults="3" data-cardsizes="18x2"></div>
          </div>
        </div>
      </div>
    </div>

    <div id="dac-search-results-content" class="dac-search-results-content">
      <div class="dac-search-results-metadata wrap">
        <div class="dac-search-results-for">
          <h2>Results for <span id="search-results-for"></span></h2>
        </div>

        <div id="dac-search-results-hero"></div>

        <div class="dac-search-results-hero cols">
          <div id="dac-search-results-reference" class="col-3of6 col-tablet-1of2 col-mobile-1of1">
            <div class="suggest-card reference no-display">
              <ul class="dac-search-results-reference">
              </ul>
            </div>
          </div>
          <div id="dac-custom-search-results"></div>
        </div>
      </div>

    </div>
  </div>





  
    
      
        <ul class="dac-header-crumbs">
          
        </ul>

        <!-- Breadcrumb Setup -->
        <p><script>$('.dac-nav-list').dacCurrentPage().dacCrumbs();</script></p>

        <h1 itemprop="name" >Android 4.4 APIs</h1>
      
    
  


  

  
  <div id="jd-content">
    <div class="jd-descr" itemprop="articleBody">
    

    <div id="qv-wrapper">
<div id="qv">

<h2>In this document
    <a href="#" onclick="hideNestedItems('#toc44',this);return false;" class="header-toggle">
        <span class="more">show more</span>
        <span class="less" style="display:none">show less</span></a></h2>

<ol id="toc44" class="hide-nested">
  <li><a href="#ApiLevel">Update your target API level</a></li>
  <li><a href="#Behaviors">Important Behavior Changes</a>
    <ol>
      <li><a href="#BehaviorStorage">If your app reads from external storage...</a></li>
      <li><a href="#BehaviorWebView">If your app uses WebView...</a></li>
      <li><a href="#BehaviorAlarms">If your app uses AlarmManager...</a></li>
      <li><a href="#BehaviorSync">If your app syncs data using ContentResolver...</a></li>
    </ol>
  </li>
  <li><a href="#Printing">Printing Framework</a>
    <ol>
      <li><a href="#PrintingGeneric">Printing generic content</a></li>
      <li><a href="#PrintingImages">Printing images</a></li>
      <li><a href="#PrintService">Building print services</a></li>
    </ol>
  </li>
  <li><a href="#SMS">SMS Provider</a></li>
  <li><a href="#Wireless">Wireless and Connectivity</a>
    <ol>
      <li><a href="#HCE">Host card emulation</a></li>
      <li><a href="#ReaderMode">NFC reader mode</a></li>
      <li><a href="#IR">Infrared transmitters</a></li>
    </ol>
  </li>
  <li><a href="#Multimedia">Multimedia</a>
    <ol>
      <li><a href="#AdaptivePlayback">Adaptive playback</a></li>
      <li><a href="#AudioTimestamp">On-demand audio timestamps</a></li>
      <li><a href="#ImageReader">Surface image reader</a></li>
      <li><a href="#PeakRms">Peak and RMS measurement</a></li>
      <li><a href="#LoudnessEnhancer">Loudness enhancer</a></li>
      <li><a href="#RemoteController">Remote controllers</a></li>
      <li><a href="#Ratings">Ratings from remote controllers</a></li>
      <li><a href="#ClosedCaptions">Closed captions</a></li>
    </ol>
  </li>
  <li><a href="#Animations">Animation &amp; Graphics</a>
    <ol>
      <li><a href="#Transitions">Scenes and transitions</a></li>
      <li><a href="#AnimatorPause">Animator pausing</a></li>
      <li><a href="#ReusableBitmaps">Reusable bitmaps</a></li>
    </ol>
  </li>
  <li><a href="#UserContent">User Content</a>
    <ol>
      <li><a href="#StorageAccess">Storage access framework</a></li>
      <li><a href="#ExternalStorage">External storage access</a></li>
      <li><a href="#SyncAdapter">Sync adapters</a></li>
    </ol>
  </li>
  <li><a href="#UserInput">User Input</a>
    <ol>
      <li><a href="#NewSensors">New sensor types</a></li>
      <li><a href="#BatchSensors">Batched sensor events</a></li>
      <li><a href="#Controllers">Controller identities</a></li>
    </ol>
  </li>
  <li><a href="#UI">User Interface</a>
    <ol>
      <li><a href="#ImmersiveMode">Immersive full-screen mode</a></li>
      <li><a href="#TranslucentBars">Translucent system bars</a></li>
      <li><a href="#NotificationListener">Enhanced notification listener</a></li>
      <li><a href="#DrawableMirroring">Drawable mirroring for RTL layouts</a></li>
      <li><a href="#A11y">Accessibility</a></li>
    </ol>
  </li>
  <li><a href="#Permissions">App Permissions</a></li>
  <li><a href="#DeviceFeatures">Device Features</a></li>
</ol>

<h2>See also</h2>
<ol>
<li><a href="../../sdk/api_diff/19/changes.html">API
Differences Report &raquo;</a> </li>
</ol>

</div>
</div>




<p>API Level: 19</p>

<p>Android 4.4 (<code><a href="../../reference/android/os/Build.VERSION_CODES.html#KITKAT">KITKAT</a></code>) is a new release for the Android platform that offers new features for users and app developers. This document provides an introduction to the most notable new APIs.</p>

<p>As an app developer, you should download the Android 4.4 system image
and SDK platform from the <a href="../../tools/help/sdk-manager.html">SDK Manager</a> as
soon as possible. If you don't have a device running Android 4.4 on which to
test your app, use the Android 4.4 system
image to test your app on the <a href="../../tools/devices/emulator.html">Android emulator</a>.
Then build your apps against the Android 4.4 platform to begin using the
latest APIs.</p>


<h3 id="ApiLevel">Update your target API level</h3>

<p>To better optimize your app for devices running Android 4.4,
  you should set your <a
href="../../guide/topics/manifest/uses-sdk-element.html#target"><code>targetSdkVersion</code></a> to
<code>"19"</code>, install it on an Android 4.4 system image,
test it, then publish an update with this change.</p>

<p>You can use APIs in Android 4.4 while also supporting older versions by adding
conditions to your code that check for the system API level before executing
APIs not supported by your <a
href="../../guide/topics/manifest/uses-sdk-element.html#min"><code>minSdkVersion</code></a>.
To learn more about maintaining backward compatibility, read <a
href="../../training/basics/supporting-devices/platforms.html">Supporting Different
Platform Versions</a>.</p>

<p>For more information about how API levels work, read <a
href="../../guide/topics/manifest/uses-sdk-element.html#ApiLevels">What is API
Level?</a></p>





<h2 id="Behaviors">Important Behavior Changes</h2>

<p>If you have previously published an app for Android, be aware that your app might
be affected by changes in Android 4.4.</p>


<h3 id="BehaviorStorage">If your app reads from external storage...</h3>

<p>Your app can not read shared files on the external storage when running on Android 4.4, unless your app has the <code><a href="../../reference/android/Manifest.permission.html#READ_EXTERNAL_STORAGE">READ_EXTERNAL_STORAGE</a></code> permission. That is, files within the directory returned by <code><a href="../../reference/android/os/Environment.html#getExternalStoragePublicDirectory(java.lang.String)">getExternalStoragePublicDirectory()</a></code> are no longer accessible without the permission. However, if you need to access only your app-specific directories, provided by <code><a href="../../reference/android/content/Context.html#getExternalFilesDir(java.lang.String)">getExternalFilesDir()</a></code>, then you do not need the <code><a href="../../reference/android/Manifest.permission.html#READ_EXTERNAL_STORAGE">READ_EXTERNAL_STORAGE</a></code> permission.</p>


<h3 id="BehaviorWebView">If your app uses WebView...</h3>

<p>Your app might behave differently when running on Android 4.4, especially when you update your app's <a
href="../../guide/topics/manifest/uses-sdk-element.html#target"><code>targetSdkVersion</code></a> to "19" or higher.</p>

<p>The code underlying the <code><a href="../../reference/android/webkit/WebView.html">WebView</a></code> class and related APIs has been upgraded to be based on a modern snapshot of the Chromium source code. This brings a variety of improvements for performance, support for new HTML5 features, and support for remote debugging of your <code><a href="../../reference/android/webkit/WebView.html">WebView</a></code> content. The scope of this upgrade means that if your app uses <code><a href="../../reference/android/webkit/WebView.html">WebView</a></code>, its behavior may be impacted in some cases. Although known behavior changes are documented and mostly affect your app only when you update your app's <a
href="../../guide/topics/manifest/uses-sdk-element.html#target"><code>targetSdkVersion</code></a> to "19" or higher&mdash;the new <code><a href="../../reference/android/webkit/WebView.html">WebView</a></code> operates in "quirks mode" to provide some legacy functionality in apps that target API level 18 and lower&mdash;it's possible that your app depends on unknown behaviors from the previous version of <code><a href="../../reference/android/webkit/WebView.html">WebView</a></code>.</p>

<p>So if your existing app uses <code><a href="../../reference/android/webkit/WebView.html">WebView</a></code>, it's important that you test on Android 4.4 as soon as possible and consult <a href="../../guide/webapps/migrating.html">Migrating to WebView in Android 4.4</a> for information about how your app might be affected when you update your <a
href="../../guide/topics/manifest/uses-sdk-element.html#target"><code>targetSdkVersion</code></a> to "19" or higher.</p>


<h3 id="BehaviorAlarms">If your app uses AlarmManager...</h3>

<p>When you set your app's <a
href="../../guide/topics/manifest/uses-sdk-element.html#target"><code>targetSdkVersion</code></a> to "19" or higher, alarms that you create using either <code><a href="../../reference/android/app/AlarmManager.html#set(int, long, android.app.PendingIntent)">set()</a></code> or <code><a href="../../reference/android/app/AlarmManager.html#setRepeating(int, long, long, android.app.PendingIntent)">setRepeating()</a></code> will be inexact.</p>

<p>To improve power efficiency, Android now batches together alarms from all apps that occur at reasonably similar times so the system wakes the device once instead of several times to handle each alarm.</p>

<p>If your alarm is not associated with an exact clock time, but it's still important that your alarm be invoked during a specific time range (such as between 2pm and 4pm), then you can use the new <code><a href="../../reference/android/app/AlarmManager.html#setWindow(int, long, long, android.app.PendingIntent)">setWindow()</a></code> method, which accepts an "earliest" time for the alarm and a "window" of time following the earliest time within which the system should invoke the alarm.</p>

<p>If your alarm must be pinned to an exact clock time (such as for a calendar event reminder), then you can use the new <code><a href="../../reference/android/app/AlarmManager.html#setExact(int, long, android.app.PendingIntent)">setExact()</a></code> method.</p>

<p>This inexact batching behavior applies only to updated apps. If you've set the <a
href="../../guide/topics/manifest/uses-sdk-element.html#target"><code>targetSdkVersion</code></a> to "18" or lower, your alarms will continue behave as they have on previous versions when running on Android 4.4.</p>


<h3 id="BehaviorSync">If your app syncs data using ContentResolver...</h3>

<p>When you set your app's <a
href="../../guide/topics/manifest/uses-sdk-element.html#target"><code>targetSdkVersion</code></a> to "19" or higher, creating a sync with <code><a href="../../reference/android/content/ContentResolver.html#addPeriodicSync(android.accounts.Account, java.lang.String, android.os.Bundle, long)">addPeriodicSync()</a></code> will perform your sync operations within a default flex interval of approximately 4% of the period you specify. For example, if your poll frequency is 24 hours, then your sync operation may occur within roughly a one-hour window of time each day, instead of at exactly the same time each day.</p>

<p>To specify your own flex interval for sync operations, you should begin using the new <code><a href="../../reference/android/content/ContentResolver.html#requestSync(android.accounts.Account, java.lang.String, android.os.Bundle)">requestSync()</a></code> method. For more details, see the section below about <a href="#SyncAdapter">Sync Adapters</a>.</p>

<p>This flex interval behavior applies only to updated apps. If you've set the <a
href="../../guide/topics/manifest/uses-sdk-element.html#target"><code>targetSdkVersion</code></a> to "18" or lower, your existing sync requests will continue to behave as they have on previous versions when running on Android 4.4.</p>










<h2 id="Printing">Printing Framework</h2>

<p>Android now includes a complete framework that allows users to print any document using a printer connected over Wi-Fi, Bluetooth, or other services. The system handles the transaction between an app that wants to print a document and the services that deliver print jobs to a printer. The <code><a href="../../reference/android/print/package-summary.html">android.print</a></code> framework provides all the APIs necessary to specify a print document and deliver it to the system for printing. Which APIs you actually need for a given print job depends on your content.</p>

<h3 id="PrintingGeneric">Printing generic content</h3>

<p>If you want to print content from your UI as a document, you need to first create a subclass of <code><a href="../../reference/android/print/PrintDocumentAdapter.html">PrintDocumentAdapter</a></code>. Within this class, you must implement a few callback methods, including <code><a href="../../reference/android/print/PrintDocumentAdapter.html#onLayout(android.print.PrintAttributes, android.print.PrintAttributes, android.os.CancellationSignal, android.print.PrintDocumentAdapter.LayoutResultCallback, android.os.Bundle)">onLayout()</a></code> to establish your layout based on the provided printing properties, and <code><a href="../../reference/android/print/PrintDocumentAdapter.html#onWrite(android.print.PageRange[], android.os.ParcelFileDescriptor, android.os.CancellationSignal, android.print.PrintDocumentAdapter.WriteResultCallback)">onWrite()</a></code> to serialize your printable content into a <code><a href="../../reference/android/os/ParcelFileDescriptor.html">ParcelFileDescriptor</a></code>. </p>

<p>In order to write your content to the <code><a href="../../reference/android/os/ParcelFileDescriptor.html">ParcelFileDescriptor</a></code> you must pass it a PDF. The new <code><a href="../../reference/android/graphics/pdf/PdfDocument.html">PdfDocument</a></code> APIs offer a convenient way to do this by providing a <code><a href="../../reference/android/graphics/Canvas.html">Canvas</a></code> from <code><a href="../../reference/android/graphics/pdf/PdfDocument.Page.html#getCanvas()">getCanvas()</a></code>, on which you can draw your printable content. Then write the <code><a href="../../reference/android/graphics/pdf/PdfDocument.html">PdfDocument</a></code> to the <code><a href="../../reference/android/os/ParcelFileDescriptor.html">ParcelFileDescriptor</a></code> using the <code><a href="../../reference/android/graphics/pdf/PdfDocument.html#writeTo(java.io.OutputStream)">writeTo()</a></code> method.</p>

<p>Once you've defined your implementation for <code><a href="../../reference/android/print/PrintDocumentAdapter.html">PrintDocumentAdapter</a></code>, you can execute print jobs upon the user's request using the <code><a href="../../reference/android/print/PrintManager.html">PrintManager</a></code> method, <code><a href="../../reference/android/print/PrintManager.html#print(java.lang.String, android.print.PrintDocumentAdapter, android.print.PrintAttributes)">print()</a></code>, which takes the <code><a href="../../reference/android/print/PrintDocumentAdapter.html">PrintDocumentAdapter</a></code> as one of its  arguments.</p>

<h3 id="PrintingImages">Printing images</h3>

<p>If you want to print just a photo or other bitmap, then the helper APIs in the support library do all the work for you. Simply create a new instance of <code><a href="../../reference/android/support/v4/print/PrintHelper.html">PrintHelper</a></code>, set the scale mode with <code><a href="../../reference/android/support/v4/print/PrintHelper.html#setScaleMode(int)">setScaleMode()</a></code>, then pass your <code><a href="../../reference/android/graphics/Bitmap.html">Bitmap</a></code> to <code><a href="../../reference/android/support/v4/print/PrintHelper.html#printBitmap(java.lang.String, android.graphics.Bitmap)">printBitmap()</a></code>. That's it. The library handles all the remaining interaction with the system to deliver the bitmap to the printer.</p>

<h3 id="PrintService">Building print services</h3>

<p>As a printer OEM, you can use the <code><a href="../../reference/android/printservice/package-summary.html">android.printservice</a></code> framework to provide interoperability with your printers from Android devices. You can build and distribute print services as APKs, which users can install on their devices . A print service app operates primarily as a headless service by subclassing the <code><a href="../../reference/android/printservice/PrintService.html">PrintService</a></code> class, which receives print jobs from the system and communicates the jobs to its printers using the appropriate protocols.</p>

<p>For more information about how to print your app content, read <a href="../../training/printing/index.html">Printing Content</a>.</p>







<h2 id="SMS">SMS Provider</h2>

<p>The <code><a href="../../reference/android/provider/Telephony.html">Telephony</a></code> content provider (the "SMS Provider") allows apps to read and write SMS and MMS messages on the device. It includes tables for SMS and MMS messages received, drafted, sent, pending, and more.</p>

<p>Beginning with Android 4.4, the system settings allow users to select a "default SMS app." Once selected, only the default SMS app is able to write to the SMS Provider and only the default SMS app receives the <code><a href="../../reference/android/provider/Telephony.Sms.Intents.html#SMS_DELIVER_ACTION">SMS_DELIVER_ACTION</a></code> broadcast when the user receives an SMS or the <code><a href="../../reference/android/provider/Telephony.Sms.Intents.html#WAP_PUSH_DELIVER_ACTION">WAP_PUSH_DELIVER_ACTION</a></code> broadcast when the user receives an MMS. The default SMS app is responsible for writing details to the SMS Provider when it receives or sends a new message.</p>

<p>Other apps that are not selected as the default SMS app can only read the SMS Provider, but may also be notified when a new SMS arrives by listening for the <code><a href="../../reference/android/provider/Telephony.Sms.Intents.html#SMS_RECEIVED_ACTION">SMS_RECEIVED_ACTION</a></code> broadcast, which is a non-abortable broadcast that may be delivered to multiple apps. This broadcast is intended for apps that---while not selected as the default SMS app---need to read special incoming messages such as to perform phone number verification.</p>

<p>For more information, read the blog post, <a href="http://android-developers.blogspot.com/2013/10/getting-your-sms-apps-ready-for-kitkat.html">Getting Your SMS Apps Ready for KitKat</a>.</p>









<h2 id="Wireless">Wireless and Connectivity</h2>

<h3 id="HCE">Host card emulation</h3>

<p>Android apps can now emulate ISO14443-4 (ISO-DEP) NFC cards that use APDUs for data exchange (as specified in ISO7816-4). This allows an NFC-enabled device running Android 4.4 to emulate multiple NFC cards at the same time, and allows an NFC payment terminal or other NFC reader to initiate a transaction with the appropriate NFC card based on the application identifier (AID).</p>

<p>If you want to emulate an NFC card that is using these protocols in your app, create a service component based on the <code><a href="../../reference/android/nfc/cardemulation/HostApduService.html">HostApduService</a></code> class. Whereas if your app instead uses a secure element for card emulation, you need to create a service based on the <code><a href="../../reference/android/nfc/cardemulation/OffHostApduService.html">OffHostApduService</a></code> class, which will not directly be involved in the transactions but is necessary to register the AIDs that should be handled by the secure element.</p>

<p>For more information, read the <a href="../../guide/topics/connectivity/nfc/hce.html">NFC Card Emulation</a> guide.</p>


<h3 id="ReaderMode">NFC reader mode</h3>

<p>A new NFC reader mode allows an activity to restrict all NFC activity to only reading the types of tags the activity is interested in while in the foreground. You can enable reader mode for your activity with <code><a href="../../reference/android/nfc/NfcAdapter.html#enableReaderMode(android.app.Activity, android.nfc.NfcAdapter.ReaderCallback, int, android.os.Bundle)">enableReaderMode()</a></code>, providing an implementation of <code><a href="../../reference/android/nfc/NfcAdapter.ReaderCallback.html">NfcAdapter.ReaderCallback</a></code> that receives a callback when new tags are detected.</p>

<p>This new capability, in conjunction with host card emulation, allows Android to operate on both ends of a mobile payment interface: One devices operates as the payment terminal (a device running a reader mode activity) and another device operates as the payment client (a device emulating an NFC card).</p>

<h3 id="IR">Infrared transmitters</h3>

<p>When running on a device that includes an infrared (IR) transmitter, you can now transmit IR signals using the <code><a href="../../reference/android/hardware/ConsumerIrManager.html">ConsumerIrManager</a></code> APIs. To get an instance of <code><a href="../../reference/android/hardware/ConsumerIrManager.html">ConsumerIrManager</a></code>, call <code><a href="../../reference/android/content/Context.html#getSystemService(java.lang.Class<T>)">getSystemService()</a></code> with <code><a href="../../reference/android/content/Context.html#CONSUMER_IR_SERVICE">CONSUMER_IR_SERVICE</a></code> as the argument. You can then query the device's supported IR frequencies with <code><a href="../../reference/android/hardware/ConsumerIrManager.html#getCarrierFrequencies()">getCarrierFrequencies()</a></code> and transmit signals by passing your desired frequency and signal pattern with <code><a href="../../reference/android/hardware/ConsumerIrManager.html#transmit(int, int[])">transmit()</a></code>.</p>

<p>You should always first check whether a device includes an IR transmitter by calling <code><a href="../../reference/android/hardware/ConsumerIrManager.html#hasIrEmitter()">hasIrEmitter()</a></code>, but if your app is compatible only with devices that do have one, you should include a <a href="../../guide/topics/manifest/uses-feature-element.html"><code>&lt;uses-feature&gt;</code></a> element in your manifest for <code>"android.hardware.consumerir"</code> (<code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_CONSUMER_IR">FEATURE_CONSUMER_IR</a></code>).</p>












<h2 id="Multimedia">Multimedia</h2>

<h3 id="AdaptivePlayback">Adaptive playback</h3>

<p>Support for adaptive video playback is now available with the <code><a href="../../reference/android/media/MediaCodec.html">MediaCodec</a></code> APIs, enabling seamless change in resolution during playback onto a <code><a href="../../reference/android/view/Surface.html">Surface</a></code>&mdash;you can feed the decoder input frames of a new resolution and the resolution of the output buffers change without a significant gap.</p>

<p>You can enable adaptive playback by adding two keys to <code><a href="../../reference/android/media/MediaFormat.html">MediaFormat</a></code> that specify the maximum resolution that your app requires from the codec: <code><a href="../../reference/android/media/MediaFormat.html#KEY_MAX_WIDTH">KEY_MAX_WIDTH</a></code> and <code><a href="../../reference/android/media/MediaFormat.html#KEY_MAX_HEIGHT">KEY_MAX_HEIGHT</a></code>. With these added to your <code><a href="../../reference/android/media/MediaFormat.html">MediaFormat</a></code>, pass the <code><a href="../../reference/android/media/MediaFormat.html">MediaFormat</a></code> to your <code><a href="../../reference/android/media/MediaCodec.html">MediaCodec</a></code> instance with <code><a href="../../reference/android/media/MediaCodec.html#configure(android.media.MediaFormat, android.view.Surface, android.media.MediaCrypto, int)">configure()</a></code>.</p>

<p>The codec will transition between resolutions that are the same as or smaller than these values in a seamless fashion. The codec may also support resolutions larger than the specified maximums (as long as it is within the limits of supported profiles), but transitions to larger resolutions may not be seamless.</p>

<p>To change the resolution while decoding H.264 video, continue to queue frames using MediaCodec.queueInputBuffer(), but be certain that you provide the new Sequence Parameter Set (SPS) and Picture Parameter Set (PPS) values together with the Instantaneous Decoder Refresh (IDR) frame in a single buffer.</p>

<p>However, before you attempt to configure your codec for adaptive playback, you must verify that the device supports adaptive playback by calling <code><a href="../../reference/android/media/MediaCodecInfo.CodecCapabilities.html#isFeatureSupported(java.lang.String)">isFeatureSupported(String)</a></code> with <code><a href="../../reference/android/media/MediaCodecInfo.CodecCapabilities.html#FEATURE_AdaptivePlayback">FEATURE_AdaptivePlayback</a></code>.</p>

<p class="note"><strong>Note:</strong> Support for adaptive playback is vendor specific.  Some codecs may require more memory for larger resolution hints.  Therefore, you should set the resolution maximums based on the source material you are decoding.</p>

<h3 id="AudioTimestamp">On-demand audio timestamps</h3>

<p>To facilitate audio-video synchronization, the new <code><a href="../../reference/android/media/AudioTimestamp.html">AudioTimestamp</a></code> class provides timeline details about a specific "frame" in an audio stream handled by <code><a href="../../reference/android/media/AudioTrack.html">AudioTrack</a></code>. To get the most recent timestamp available, instantiate an <code><a href="../../reference/android/media/AudioTimestamp.html">AudioTimestamp</a></code> object and pass it to <code><a href="../../reference/android/media/AudioTrack.html#getTimestamp(android.media.AudioTimestamp)">getTimestamp()</a></code>. If the request for the timestamp succeeds, the <code><a href="../../reference/android/media/AudioTrack.html">AudioTrack</a></code> instance is filled in with a position in frame units, together with the estimated time when that frame either was presented or is committed to be presented.</p>

<p>You can use the value of <code>nanoTime</code> in the <code><a href="../../reference/android/media/AudioTimestamp.html">AudioTimestamp</a></code> (which is monotonic) to find the closest associated video frame compared to <code>framePosition</code> so you can drop, duplicate, or interpolate video frames to match the audio. Alternatively, you can determine the delta time between the value of <code>nanoTime</code> and a future video frame’s expected time (with consideration for the sample rate) to predict which audio frame is expected at the same moment as a video frame.</p>

<h3 id="ImageReader">Surface image reader</h3>

<p>The new <code><a href="../../reference/android/media/ImageReader.html">ImageReader</a></code> API provides you direct access to image buffers as they are rendered into a <code><a href="../../reference/android/view/Surface.html">Surface</a></code>. You can acquire an <code><a href="../../reference/android/media/ImageReader.html">ImageReader</a></code> with the static method <code><a href="../../reference/android/media/ImageReader.html#newInstance(int, int, int, int)">newInstance()</a></code>. Then call <code><a href="../../reference/android/media/ImageReader.html#getSurface()">getSurface()</a></code> to create a new <code><a href="../../reference/android/view/Surface.html">Surface</a></code> and deliver your image data with a producer such as <code><a href="../../reference/android/media/MediaPlayer.html">MediaPlayer</a></code> or <code><a href="../../reference/android/media/MediaCodec.html">MediaCodec</a></code>. To be notified when new images are available from the surface, implement the <code><a href="../../reference/android/media/ImageReader.OnImageAvailableListener.html">ImageReader.OnImageAvailableListener</a></code> interface and register it with <code><a href="../../reference/android/media/ImageReader.html#setOnImageAvailableListener(android.media.ImageReader.OnImageAvailableListener, android.os.Handler)">setOnImageAvailableListener()</a></code>.</p>

<p>Now as you draw content to your <code><a href="../../reference/android/view/Surface.html">Surface</a></code>, your <code><a href="../../reference/android/media/ImageReader.OnImageAvailableListener.html">ImageReader.OnImageAvailableListener</a></code> receives a call to <code><a href="../../reference/android/media/ImageReader.OnImageAvailableListener.html#onImageAvailable(android.media.ImageReader)">onImageAvailable()</a></code> as each new image frame becomes available, providing you with the corresponding <code><a href="../../reference/android/media/ImageReader.html">ImageReader</a></code>. You can use the <code><a href="../../reference/android/media/ImageReader.html">ImageReader</a></code> to acquire the frame's image data as an <code><a href="../../reference/android/media/Image.html">Image</a></code> object by calling <code><a href="../../reference/android/media/ImageReader.html#acquireLatestImage()">acquireLatestImage()</a></code> or <code><a href="../../reference/android/media/ImageReader.html#acquireNextImage()">acquireNextImage()</a></code>.</p>

<p>The <code><a href="../../reference/android/media/Image.html">Image</a></code> object provides direct access to the image's timestamp, format, dimensions, and pixel data in a <code><a href="../../reference/java/nio/ByteBuffer.html">ByteBuffer</a></code>. However, in order for the <code><a href="../../reference/android/media/Image.html">Image</a></code> class to interpret your images, they must be formatted according to one of the types defined by constants in either <code><a href="../../reference/android/graphics/ImageFormat.html">ImageFormat</a></code> or <code><a href="../../reference/android/graphics/PixelFormat.html">PixelFormat</a></code>. </p>

<h3 id="PeakRms">Peak and RMS measurement</h3>

<p>You can now query the peak and RMS of the current audio stream from <code><a href="../../reference/android/media/audiofx/Visualizer.html">Visualizer</a></code> by creating a new instance of <code><a href="../../reference/android/media/audiofx/Visualizer.MeasurementPeakRms.html">Visualizer.MeasurementPeakRms</a></code> and passing it to <code><a href="../../reference/android/media/audiofx/Visualizer.html#getMeasurementPeakRms(android.media.audiofx.Visualizer.MeasurementPeakRms)">getMeasurementPeakRms()</a></code>. When you call this method, the peak and RMS values of the given <code><a href="../../reference/android/media/audiofx/Visualizer.MeasurementPeakRms.html">Visualizer.MeasurementPeakRms</a></code> are set to the latest measured values.</p>

<h3 id="LoudnessEnhancer">Loudness enhancer</h3>

<p>The <code><a href="../../reference/android/media/audiofx/LoudnessEnhancer.html">LoudnessEnhancer</a></code> is a new subclass of <code><a href="../../reference/android/media/audiofx/AudioEffect.html">AudioEffect</a></code> that allows you to increase the audible volume of your <code><a href="../../reference/android/media/MediaPlayer.html">MediaPlayer</a></code> or <code><a href="../../reference/android/media/AudioTrack.html">AudioTrack</a></code>. This can be especially useful in conjunction with the new <code><a href="../../reference/android/media/audiofx/Visualizer.html#getMeasurementPeakRms(android.media.audiofx.Visualizer.MeasurementPeakRms)">getMeasurementPeakRms()</a></code> method mentioned above, in order to increase the volume of spoken audio tracks while other media is currently playing.</p>

<h3 id="RemoteController">Remote controllers</h3>

<p>Android 4.0 (API level 14) introduced the <code><a href="../../reference/android/media/RemoteControlClient.html">RemoteControlClient</a></code> APIs that allow media apps to consume media controller events from remote clients such as media controls on the lock screen. Now the new <code><a href="../../reference/android/media/RemoteController.html">RemoteController</a></code> APIs allow you to build your own remote controller, enabling the creation of innovative new apps and peripherals that can control the playback of any media app that integrates with <code><a href="../../reference/android/media/RemoteControlClient.html">RemoteControlClient</a></code>.</p>

<p>To build a remote controller, you can implement your user interface any way you want to, but to deliver the media button events to the user's media app you must create a service that extends the <code><a href="../../reference/android/service/notification/NotificationListenerService.html">NotificationListenerService</a></code> class and implements the <code><a href="../../reference/android/media/RemoteController.OnClientUpdateListener.html">RemoteController.OnClientUpdateListener</a></code> interface. Using the <code><a href="../../reference/android/service/notification/NotificationListenerService.html">NotificationListenerService</a></code> as the basis is important because it provides the appropriate privacy restrictions, which require users to enable your app as a notification listener within the system security settings.</p>

<p>The <code><a href="../../reference/android/service/notification/NotificationListenerService.html">NotificationListenerService</a></code> class includes a couple abstract methods you must implement, but if you are only concerned with the media controller events for handling media playback, you can leave your implementation for those empty and instead focus on the <code><a href="../../reference/android/media/RemoteController.OnClientUpdateListener.html">RemoteController.OnClientUpdateListener</a></code> methods.</p>

<h3 id="Ratings">Ratings from remote controllers</h3>

<p>Android 4.4 builds upon the existing capabilities for remote control clients (apps that receive media control events with the <code><a href="../../reference/android/media/RemoteControlClient.html">RemoteControlClient</a></code>) by adding the ability for users to rate the current track from the remote controller.</p>

<p>The new <code><a href="../../reference/android/media/Rating.html">Rating</a></code> class encapsulates information about a user rating. A rating is defined by its rating style (either <code><a href="../../reference/android/media/Rating.html#RATING_HEART">RATING_HEART</a></code>, <code><a href="../../reference/android/media/Rating.html#RATING_THUMB_UP_DOWN">RATING_THUMB_UP_DOWN</a></code>, <code><a href="../../reference/android/media/Rating.html#RATING_3_STARS">RATING_3_STARS</a></code>, <code><a href="../../reference/android/media/Rating.html#RATING_4_STARS">RATING_4_STARS</a></code>, <code><a href="../../reference/android/media/Rating.html#RATING_5_STARS">RATING_5_STARS</a></code> or <code><a href="../../reference/android/media/Rating.html#RATING_PERCENTAGE">RATING_PERCENTAGE</a></code>) and the rating value that's appropriate for that style.</p>

<p>To allow users to rate your tracks from a remote controller:</p>
<ul>
<li> Signal that you'd like to expose the rating UI to the user (if applicable) by adding the <code><a href="../../reference/android/media/RemoteControlClient.html#FLAG_KEY_MEDIA_RATING">FLAG_KEY_MEDIA_RATING</a></code> flag in <code><a href="../../reference/android/media/RemoteControlClient.html#setTransportControlFlags(int)">setTransportControlFlags()</a></code>. </li>
<li>Call <code><a href="../../reference/android/media/RemoteControlClient.html#editMetadata(boolean)">editMetadata()</a></code> to retrieve a <code><a href="../../reference/android/media/RemoteControlClient.MetadataEditor.html">RemoteControlClient.MetadataEditor</a></code> and pass it <code><a href="../../reference/android/media/MediaMetadataEditor.html#RATING_KEY_BY_USER">RATING_KEY_BY_USER</a></code> with <code><a href="../../reference/android/media/MediaMetadataEditor.html#addEditableKey(int)">addEditableKey()</a></code>. </li>
<li>Then specify the rating style by calling <code><a href="../../reference/android/media/MediaMetadataEditor.html#putObject(int, java.lang.Object)">putObject()</a></code> and passing it <code><a href="../../reference/android/media/MediaMetadataEditor.html#RATING_KEY_BY_USER">RATING_KEY_BY_USER</a></code> as the key and one of the above rating styles as the value.</li>
</ul>

<p>To receive a callback when the user changes the rating from the remote controller, implement the new <code><a href="../../reference/android/media/RemoteControlClient.OnMetadataUpdateListener.html">RemoteControlClient.OnMetadataUpdateListener</a></code> interface and pass an instance to <code><a href="../../reference/android/media/RemoteControlClient.html#setMetadataUpdateListener(android.media.RemoteControlClient.OnMetadataUpdateListener)">setMetadataUpdateListener()</a></code>. When the user changes the rating, your <code><a href="../../reference/android/media/RemoteControlClient.OnMetadataUpdateListener.html">RemoteControlClient.OnMetadataUpdateListener</a></code> receives a call to <code><a href="../../reference/android/media/RemoteControlClient.OnMetadataUpdateListener.html#onMetadataUpdate(int, java.lang.Object)">onMetadataUpdate()</a></code>, passing <code><a href="../../reference/android/media/MediaMetadataEditor.html#RATING_KEY_BY_USER">RATING_KEY_BY_USER</a></code> as the key and a <code><a href="../../reference/android/media/Rating.html">Rating</a></code> object as the value.</p>

<h3 id="ClosedCaptions">Closed captions</h3>

<p><code><a href="../../reference/android/widget/VideoView.html">VideoView</a></code> now supports <a href="http://dev.w3.org/html5/webvtt/" class="external-link">WebVTT</a> subtitle tracks when playing HTTP Live Stream (HLS) videos, displaying the subtitle track according to the closed caption preferences the user has defined in system settings. </p>

<p>You can also provide <code><a href="../../reference/android/widget/VideoView.html">VideoView</a></code> with your WebVTT subtitle tracks using the <code><a href="../../reference/android/widget/VideoView.html#addSubtitleSource(java.io.InputStream, android.media.MediaFormat)">addSubtitleSource()</a></code> method. This method accepts an <code><a href="../../reference/java/io/InputStream.html">InputStream</a></code> that carries the subtitle data and a <code><a href="../../reference/android/media/MediaFormat.html">MediaFormat</a></code> object that specifies the format for the subtitle data, which you can specify using <code><a href="../../reference/android/media/MediaFormat.html#createSubtitleFormat(java.lang.String, java.lang.String)">createSubtitleFormat()</a></code>. These subtitles also appear over the video according to the user's preferences. </p>

<p>If you do not use <code><a href="../../reference/android/widget/VideoView.html">VideoView</a></code> to display your video content, you should make your subtitle overlay match the user's closed captioning preference as closely as possible. A new <code><a href="../../reference/android/view/accessibility/CaptioningManager.html">CaptioningManager</a></code> API allows you to query the user’s closed captioning preferences, including styles defined by <code><a href="../../reference/android/view/accessibility/CaptioningManager.CaptionStyle.html">CaptioningManager.CaptionStyle</a></code>, such as typeface and color. In case the user adjusts some preferences once your video has already started, you should listen for changes to the preferences by registering an instance of <code><a href="../../reference/android/view/accessibility/CaptioningManager.CaptioningChangeListener.html">CaptioningManager.CaptioningChangeListener</a></code> to receive a callback when any of the preferences change, then update your subtitles as necessary.</p>













<h2 id="Animations">Animation &amp; Graphics</h2>


<h3 id="Transitions">Scenes and transitions</h3>

<p>The new <code><a href="../../reference/android/transition/package-summary.html">android.transition</a></code> framework provides APIs that facilitate animations between different states of your user interface. A key feature is the ability for you to define distinct states of your UI, known as "scenes," by creating a separate layout for each one. When you want to animate from one scene to another, execute a "transition," which calculates the necessary animation to change the layout from the current scene to the next scene.</p>

<p>To transition between two scenes, you generally need to perform the following:</p>
<ol>
<li>Specify the <code><a href="../../reference/android/view/ViewGroup.html">ViewGroup</a></code> containing the UI components you want to change.</li>
<li>Specify the layout representing the end-result of the change (the next scene).</li>
<li>Specify the type of transition that should animate the layout change.</li>
<li>Execute the transition.</li>
</ol>

<p>You can use a <code><a href="../../reference/android/transition/Scene.html">Scene</a></code> object to accomplish steps 1 and 2. A <code><a href="../../reference/android/transition/Scene.html">Scene</a></code> contains metadata describing the properties of a layout that are necessary to perform a transition, including the scene's parent view and the scene's layout. You can create a <code><a href="../../reference/android/transition/Scene.html">Scene</a></code> using a class constructor or the static method <code><a href="../../reference/android/transition/Scene.html#getSceneForLayout(android.view.ViewGroup, int, android.content.Context)">getSceneForLayout()</a></code>.</p>

<p>You must then use the <code><a href="../../reference/android/transition/TransitionManager.html">TransitionManager</a></code> to accomplish steps 3 and 4. One way is to pass your <code><a href="../../reference/android/transition/Scene.html">Scene</a></code> to the static method <code><a href="../../reference/android/transition/TransitionManager.html#go(android.transition.Scene)">go()</a></code>. This finds the scene's parent view in the current layout and performs a transition on the child views in order to reach the layout defined by the <code><a href="../../reference/android/transition/Scene.html">Scene</a></code>.</p>

<p>Alternatively, you don't need to create a <code><a href="../../reference/android/transition/Scene.html">Scene</a></code> object at all, but can instead call <code><a href="../../reference/android/transition/TransitionManager.html#beginDelayedTransition(android.view.ViewGroup)">beginDelayedTransition()</a></code>, specifying a <code><a href="../../reference/android/view/ViewGroup.html">ViewGroup</a></code> that contains the views you want to change. Then add, remove, or reconfigure the target views. After the system lays out the changes as necessary, a transition starts to animate all the affected views.</p>

<p>For additional control, you can define sets of transitions that should occur between pre-defined scenes, using an XML file in your project <code>res/transition/</code> directory. Inside a <code>&lt;transitionManager&gt;</code> element, specify one or more <code>&lt;transition&gt;</code> tags that each specify a scene (a reference to a layout file) and the transition to apply when entering and/or exiting that scene. Then inflate this set of transitions using <code><a href="../../reference/android/transition/TransitionInflater.html#inflateTransitionManager(int, android.view.ViewGroup)">inflateTransitionManager()</a></code>. Use the returned <code><a href="../../reference/android/transition/TransitionManager.html">TransitionManager</a></code> to execute each transition with <code><a href="../../reference/android/transition/TransitionManager.html#transitionTo(android.transition.Scene)">transitionTo()</a></code>, passing a <code><a href="../../reference/android/transition/Scene.html">Scene</a></code> that is represented by one of the <code>&lt;transition&gt;</code> tags. You can also define sets of transitions programmatically with the <code><a href="../../reference/android/transition/TransitionManager.html">TransitionManager</a></code> APIs.</p>

<p>When specifying a transition, you can use several predefined types defined by subclasses of <code><a href="../../reference/android/transition/Transition.html">Transition</a></code>, such as <code><a href="../../reference/android/transition/Fade.html">Fade</a></code> and <code><a href="../../reference/android/transition/ChangeBounds.html">ChangeBounds</a></code>. If you don't specify a transition type, the system uses <code><a href="../../reference/android/transition/AutoTransition.html">AutoTransition</a></code> by default, which automatically fades, moves, and resizes views as necessary. Additionally, you can create custom transitions by extending any of these classes to perform the animations however you'd like. A custom transition can track any property changes you'd like, and create any animation you want to based on those changes. For example, you could provide a subclass of <code><a href="../../reference/android/transition/Transition.html">Transition</a></code> that listens for changes to the "rotation" property of a view then animate any changes.</p>

<p>For more information, see the <code><a href="../../reference/android/transition/TransitionManager.html">TransitionManager</a></code> documentation.</p>

<h3 id="AnimatorPause">Animator pausing</h3>

<p>The <code><a href="../../reference/android/animation/Animator.html">Animator</a></code> APIs now allow you to pause and resume an ongoing animation with methods <code><a href="../../reference/android/animation/Animator.html#pause()">pause()</a></code> and <code><a href="../../reference/android/animation/Animator.html#resume()">resume()</a></code>.</p>

<p>To track the state of an animation, you can implement the <code><a href="../../reference/android/animation/Animator.AnimatorPauseListener.html">Animator.AnimatorPauseListener</a></code> interface, which provides callbacks when an animation is paused and resumed: <code><a href="../../reference/android/animation/Animator.html#pause()">pause()</a></code> and <code><a href="../../reference/android/animation/Animator.html#resume()">resume()</a></code>. Then add the listener to an <code><a href="../../reference/android/animation/Animator.html">Animator</a></code> object with <code><a href="../../reference/android/animation/Animator.html#addPauseListener(android.animation.Animator.AnimatorPauseListener)">addPauseListener()</a></code>. </p>

<p>Alternatively, you can subclass the <code><a href="../../reference/android/animation/AnimatorListenerAdapter.html">AnimatorListenerAdapter</a></code> abstract class, which now includes empty implementations for the pause and resume callbacks defined by <code><a href="../../reference/android/animation/Animator.AnimatorPauseListener.html">Animator.AnimatorPauseListener</a></code>.</p>


<h3 id="ReusableBitmaps">Reusable bitmaps</h3>

<p>You can now reuse any mutable bitmap in <code><a href="../../reference/android/graphics/BitmapFactory.html">BitmapFactory</a></code> to decode any other bitmap&mdash;even when the new bitmap is a different size---as long as the resulting byte count of the decoded bitmap (available from <code><a href="../../reference/android/graphics/Bitmap.html#getByteCount()">getByteCount()</a></code>) is less than or equal to the allocated byte count of the reused bitmap (available from <code><a href="../../reference/android/graphics/Bitmap.html#getAllocationByteCount()">getAllocationByteCount()</a></code>. For more information, see <code><a href="../../reference/android/graphics/BitmapFactory.Options.html#inBitmap">inBitmap</a></code>.</p>

<p>New APIs for <code><a href="../../reference/android/graphics/Bitmap.html">Bitmap</a></code> allow similar reconfiguration for reuse outside of <code><a href="../../reference/android/graphics/BitmapFactory.html">BitmapFactory</a></code> (for manual bitmap generation or custom decoding logic). You can now set a bitmap’s dimensions with methods <code><a href="../../reference/android/graphics/Bitmap.html#setHeight(int)">setHeight()</a></code> and <code><a href="../../reference/android/graphics/Bitmap.html#setWidth(int)">setWidth()</a></code>, and specify specify a new <code><a href="../../reference/android/graphics/Bitmap.Config.html">Bitmap.Config</a></code> with <code><a href="../../reference/android/graphics/Bitmap.html#setConfig(android.graphics.Bitmap.Config)">setConfig()</a></code> without affecting the underlying bitmap allocation. The <code><a href="../../reference/android/graphics/Bitmap.html#reconfigure(int, int, android.graphics.Bitmap.Config)">reconfigure()</a></code> method also provides a convenient way to combine these changes with one call.</p>

<p>However, you should not reconfigure a bitmap that's currently used by the view system, because the underlying pixel buffer will not be remapped in a predictable way.</p>








<h2 id="UserContent">User Content</h2>

<h3 id="StorageAccess">Storage access framework</h3>

<p>On previous versions of Android, if you want your app to retrieve a specific type of file from another app, it must invoke an intent with the <code><a href="../../reference/android/content/Intent.html#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code> action. This action is still the appropriate way to request a file that you want to <em>import</em> into your app. However,  Android 4.4 introduces the <code><a href="../../reference/android/content/Intent.html#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code> action, which allows the user to select a file of a specific type and grant your app long-term read access to that file (possibly with write access) without importing the file to your app.</p>

<p>If you're developing an app that provides storage services for files (such as a cloud save service), you can participate in this unified UI for picking files by implementing a content provider as a subclass of the new <code><a href="../../reference/android/provider/DocumentsProvider.html">DocumentsProvider</a></code> class. Your subclass of <code><a href="../../reference/android/provider/DocumentsProvider.html">DocumentsProvider</a></code> must include an intent filter that accepts the <code><a href="../../reference/android/provider/DocumentsContract.html#PROVIDER_INTERFACE">PROVIDER_INTERFACE</a></code> action (<code>"android.content.action.DOCUMENTS_PROVIDER"</code>). You must then implement the four abstract methods in the <code><a href="../../reference/android/provider/DocumentsProvider.html">DocumentsProvider</a></code>:</p>

<dl>
<dt><code><a href="../../reference/android/provider/DocumentsProvider.html#queryRoots(java.lang.String[])">queryRoots()</a></code></dt>
<dd>This must return a <code><a href="../../reference/android/database/Cursor.html">Cursor</a></code> that describes all the root directories of your document storage, using columns defined in <code><a href="../../reference/android/provider/DocumentsContract.Root.html">DocumentsContract.Root</a></code>.</dd>
<dt><code><a href="../../reference/android/provider/DocumentsProvider.html#queryChildDocuments(java.lang.String, java.lang.String[], java.lang.String)">queryChildDocuments()</a></code></dt>
<dd>This must return a <code><a href="../../reference/android/database/Cursor.html">Cursor</a></code> that describes all the files in the specified directory, using columns defined in <code><a href="../../reference/android/provider/DocumentsContract.Document.html">DocumentsContract.Document</a></code>.</dd>
<dt><code><a href="../../reference/android/provider/DocumentsProvider.html#queryDocument(java.lang.String, java.lang.String[])">queryDocument()</a></code></dt>
<dd>This must return a <code><a href="../../reference/android/database/Cursor.html">Cursor</a></code> that describes the specified file, using columns defined in <code><a href="../../reference/android/provider/DocumentsContract.Document.html">DocumentsContract.Document</a></code>.</dd>
<dt><code><a href="../../reference/android/provider/DocumentsProvider.html#openDocument(java.lang.String, java.lang.String, android.os.CancellationSignal)">openDocument()</a></code></dt>
<dd>This must return a <code><a href="../../reference/android/os/ParcelFileDescriptor.html">ParcelFileDescriptor</a></code> representing the specified file. The system calls this method once the user selects a file and the client app requests access to it by calling <code><a href="../../reference/android/content/ContentResolver.html#openFileDescriptor(android.net.Uri, java.lang.String)">openFileDescriptor()</a></code>.</dd>
</dl>

<p>For more information, see the <a href="../../guide/topics/providers/document-provider.html">Storage Access Framework</a> guide.</p>


<h3 id="ExternalStorage">External storage access</h3>

<p>You can now read and write app-specific files on secondary external storage media, such as when a device provides both emulated storage and an SD card. The new method <code><a href="../../reference/android/content/Context.html#getExternalFilesDirs(java.lang.String)">getExternalFilesDirs()</a></code> works the same as the existing <code><a href="../../reference/android/content/Context.html#getExternalFilesDir(java.lang.String)">getExternalFilesDir()</a></code> method except it returns an array of <code><a href="../../reference/java/io/File.html">File</a></code> objects. Before reading or writing to any of the paths returned by this method, pass the  <code><a href="../../reference/java/io/File.html">File</a></code> object to the new <code><a href="../../reference/android/os/Environment.html#getStorageState(java.io.File)">getStorageState()</a></code> method to verify the storage is currently available.</p>

<p>Other methods for accessing your app-specific cache directory and OBB directory also now have corresponding versions that provide access to secondary storage devices: <code><a href="../../reference/android/content/Context.html#getExternalCacheDirs()">getExternalCacheDirs()</a></code> and <code><a href="../../reference/android/content/Context.html#getObbDirs()">getObbDirs()</a></code>, respectively.</p>

<p>The first entry in the returned <code><a href="../../reference/java/io/File.html">File</a></code> array is considered the device's primary external storage, which is the same as the <code><a href="../../reference/java/io/File.html">File</a></code> returned by existing methods such as <code><a href="../../reference/android/content/Context.html#getExternalFilesDir(java.lang.String)">getExternalFilesDir()</a></code>.</p>

<p class="note"><strong>Note:</strong> Beginning with Android 4.4, the platform no longer requires that your app acquire the <code><a href="../../reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE">WRITE_EXTERNAL_STORAGE</a></code> or <code><a href="../../reference/android/Manifest.permission.html#READ_EXTERNAL_STORAGE">READ_EXTERNAL_STORAGE</a></code> when you need to access only your app-specific regions of the external storage using the methods above. However, the permissions are required if you want to access the shareable regions of the external storage, provided by <code><a href="../../reference/android/os/Environment.html#getExternalStoragePublicDirectory(java.lang.String)">getExternalStoragePublicDirectory()</a></code>. </p>

<h3 id="SyncAdapter">Sync adapters</h3>

<p>The new <code><a href="../../reference/android/content/ContentResolver.html#requestSync(android.accounts.Account, java.lang.String, android.os.Bundle)">requestSync()</a></code> method in <code><a href="../../reference/android/content/ContentResolver.html">ContentResolver</a></code> simplifies some of the procedure for defining a sync request for your <code><a href="../../reference/android/content/ContentProvider.html">ContentProvider</a></code> by encapsulating requests in the new <code><a href="../../reference/android/content/SyncRequest.html">SyncRequest</a></code> object, which you can create with <code><a href="../../reference/android/content/SyncRequest.Builder.html">SyncRequest.Builder</a></code>. The properties in <code><a href="../../reference/android/content/SyncRequest.html">SyncRequest</a></code> provide the same functionality as the existing <code><a href="../../reference/android/content/ContentProvider.html">ContentProvider</a></code> sync calls, but adds the ability to specify that a sync should be dropped if the network is metered, by enabling <code><a href="../../reference/android/content/SyncRequest.Builder.html#setDisallowMetered(boolean)">setDisallowMetered()</a></code>.</p>











<h2 id="UserInput">User Input</h2>

<h3 id="NewSensors">New sensor types</h3>

<p>The new <code><a href="../../reference/android/hardware/Sensor.html#TYPE_GEOMAGNETIC_ROTATION_VECTOR">TYPE_GEOMAGNETIC_ROTATION_VECTOR</a></code>
sensor provides rotation vector data based on a magnetometer, which is a useful alternative to the <code><a href="../../reference/android/hardware/Sensor.html#TYPE_ROTATION_VECTOR">TYPE_ROTATION_VECTOR</a></code> sensor when a gyroscope is not available or when used with <a href="#BatchSensors">batched sensor events</a> to record the device's orientation while the phone is sleeping. This sensor requires less power than <code><a href="../../reference/android/hardware/Sensor.html#TYPE_ROTATION_VECTOR">TYPE_ROTATION_VECTOR</a></code>, but may be prone to noisy event data and is most effective while the user is outdoors.</p>

<p>Android also now supports built-in step sensors in hardware:</p>

<dl>
<dt><code><a href="../../reference/android/hardware/Sensor.html#TYPE_STEP_DETECTOR">TYPE_STEP_DETECTOR</a></code></dt>
<dd>This sensor triggers an event each time the user takes a step. Upon each user step, this sensor delivers an event with a value of 1.0 and a timestamp indicating when the step occurred.</dd>
<dt><code><a href="../../reference/android/hardware/Sensor.html#TYPE_STEP_COUNTER">TYPE_STEP_COUNTER</a></code></dt>
<dd>This sensor also triggers an event upon each detected step, but instead delivers the total accumulated number of steps since this sensor was first registered by an app.</dd>
</dl>

<p>Be aware that these two step sensors don't always deliver the same results. The <code><a href="../../reference/android/hardware/Sensor.html#TYPE_STEP_COUNTER">TYPE_STEP_COUNTER</a></code> events occur with a higher latency than those from <code><a href="../../reference/android/hardware/Sensor.html#TYPE_STEP_DETECTOR">TYPE_STEP_DETECTOR</a></code>, but that's because the <code><a href="../../reference/android/hardware/Sensor.html#TYPE_STEP_COUNTER">TYPE_STEP_COUNTER</a></code> algorithm does more processing to eliminate false positives. So the <code><a href="../../reference/android/hardware/Sensor.html#TYPE_STEP_COUNTER">TYPE_STEP_COUNTER</a></code> may be slower to deliver events, but its results should be more accurate.</p>

<p>Both step sensors are hardware dependent (Nexus 5 is the first device to support them), so you should check for availability with <code><a href="../../reference/android/content/pm/PackageManager.html#hasSystemFeature(java.lang.String)">hasSystemFeature()</a></code>, using the <code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_SENSOR_STEP_DETECTOR">FEATURE_SENSOR_STEP_DETECTOR</a></code> and <code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_SENSOR_STEP_COUNTER">FEATURE_SENSOR_STEP_COUNTER</a></code> constants.</p>

<h3 id="BatchSensors">Batched sensor events</h3>

<p>To better manage device power, the <code><a href="../../reference/android/hardware/SensorManager.html">SensorManager</a></code> APIs now allow you to specify the frequency at which you'd like the system to deliver batches of sensor events to your app. This doesn't reduce the number of actual sensor events available to your app for a given period of time, but instead reduces the frequency at which the system calls your <code><a href="../../reference/android/hardware/SensorEventListener.html">SensorEventListener</a></code> with sensor updates. That is, instead of delivering each event to your app the moment it occurs, the system saves up all the events that occur over a period of time, then delivers them to your app all at once.</p>

<p>To provide batching, the <code><a href="../../reference/android/hardware/SensorManager.html">SensorManager</a></code> class adds two new versions of the <code><a href="../../reference/android/hardware/SensorManager.html#registerListener(android.hardware.SensorEventListener, android.hardware.Sensor, int, int)">registerListener()</a></code> method that allow you to specify the "maximum report latency." This new parameter specifies the maximum delay that your <code><a href="../../reference/android/hardware/SensorEventListener.html">SensorEventListener</a></code> will tolerate for delivery of new sensor events. For example, if you specify a batch latency of one minute, the system will deliver the recent set of batched events at an interval no longer than one minute by making consecutive calls to your <code><a href="../../reference/android/hardware/SensorEventListener.html#onSensorChanged(android.hardware.SensorEvent)">onSensorChanged()</a></code> method&mdash;once for each event that was batched. The sensor events will never be delayed longer than your maximum report latency value, but may arrive sooner if other apps have requested a shorter latency for the same sensor.</p>

<p>However, be aware that the sensor will deliver your app the batched events based on your report latency <strong>only while the CPU is awake</strong>. Although a hardware sensor that supports batching will continue to collect sensor events while the CPU is asleep, it will not wake the CPU to deliver your app the batched events. When the sensor eventually runs out of its memory for events, it will begin dropping the oldest events in order to save the newest events. You can avoid losing events by waking the device before the sensor fills its memory then call <code><a href="../../reference/android/hardware/SensorManager.html#flush(android.hardware.SensorEventListener)">flush()</a></code> to capture the latest batch of events. To estimate when the memory will be full and should be flushed, call <code><a href="../../reference/android/hardware/Sensor.html#getFifoMaxEventCount()">getFifoMaxEventCount()</a></code> to get the maximum number of sensor events it can save, and divide that number by the rate at which your app desires each event. Use that calculation to set wake alarms with <code><a href="../../reference/android/app/AlarmManager.html">AlarmManager</a></code> that invoke your <code><a href="../../reference/android/app/Service.html">Service</a></code> (which implements the <code><a href="../../reference/android/hardware/SensorEventListener.html">SensorEventListener</a></code>) to flush the sensor.</p>


<p class="note"><strong>Note:</strong> Not all devices support batching sensor events because it requires support by the hardware sensor. However, beginning with Android 4.4, you should always use the new <code><a href="../../reference/android/hardware/SensorManager.html#registerListener(android.hardware.SensorEventListener, android.hardware.Sensor, int, int)">registerListener()</a></code> methods, because if the device does not support batching, then the system gracefully ignores the batch latency argument and delivers sensor events in real time.</p>

<h3 id="Controllers">Controller identities</h3>

<p>Android now identifies each connected controller with a unique integer that you can query with <code><a href="../../reference/android/view/InputDevice.html#getControllerNumber()">getControllerNumber()</a></code>, making it easier for you to associate each controller to a different player in a game. The number for each controller may change due to controllers being disconnected, connected, or re-configured by the user, so you should track which controller number corresponds to each input device by registering an instance of <code><a href="../../reference/android/hardware/input/InputManager.InputDeviceListener.html">InputManager.InputDeviceListener</a></code>. Then call <code><a href="../../reference/android/view/InputDevice.html#getControllerNumber()">getControllerNumber()</a></code> for each <code><a href="../../reference/android/view/InputDevice.html">InputDevice</a></code> when a change occurs.</p>

<p>Connected devices also now provide product and vendor IDs that are available from <code><a href="../../reference/android/view/InputDevice.html#getProductId()">getProductId()</a></code> and <code><a href="../../reference/android/view/InputDevice.html#getVendorId()">getVendorId()</a></code>. If you need to modify your key mappings based on the available set of keys on a device, you can query the device to check whether certain keys are available with <code><a href="../../reference/android/view/InputDevice.html#hasKeys(int...)">hasKeys(int...)</a></code>.</p>








<h2 id="UI">User Interface</h2>

<h3 id="ImmersiveMode">Immersive full-screen mode</h3>

<p>To provide your app with a layout that fills the entire screen, the new <code><a href="../../reference/android/view/View.html#SYSTEM_UI_FLAG_IMMERSIVE">SYSTEM_UI_FLAG_IMMERSIVE</a></code> flag for <code><a href="../../reference/android/view/View.html#setSystemUiVisibility(int)">setSystemUiVisibility()</a></code> (when combined with <code><a href="../../reference/android/view/View.html#SYSTEM_UI_FLAG_HIDE_NAVIGATION">SYSTEM_UI_FLAG_HIDE_NAVIGATION</a></code>) enables a new <em>immersive</em> full-screen mode. While immersive full-screen mode is enabled, your activity continues to receive all touch events. The user can reveal the system bars with an inward swipe along the region where the system bars normally appear. This clears the <code><a href="../../reference/android/view/View.html#SYSTEM_UI_FLAG_HIDE_NAVIGATION">SYSTEM_UI_FLAG_HIDE_NAVIGATION</a></code> flag  (and the <code><a href="../../reference/android/view/View.html#SYSTEM_UI_FLAG_FULLSCREEN">SYSTEM_UI_FLAG_FULLSCREEN</a></code> flag, if applied) so the system bars remain visible. However, if you'd like the system bars to hide again after a few moments, you can instead use the <code><a href="../../reference/android/view/View.html#SYSTEM_UI_FLAG_IMMERSIVE_STICKY">SYSTEM_UI_FLAG_IMMERSIVE_STICKY</a></code> flag.</p>

<h3 id="TranslucentBars">Translucent system bars</h3>

<p>You can now make the system bars partially translucent with new themes, <code><a href="../../reference/android/R.style.html#Theme_Holo_NoActionBar_TranslucentDecor">Theme.Holo.NoActionBar.TranslucentDecor</a></code> and <code><a href="../../reference/android/R.style.html#Theme_Holo_Light_NoActionBar_TranslucentDecor">Theme.Holo.Light.NoActionBar.TranslucentDecor</a></code>. By enabling translucent system bars, your layout will fill the area behind the system bars, so you must also enable <code><a href="../../reference/android/R.attr.html#fitsSystemWindows">fitsSystemWindows</a></code> for the portion of your layout that should not be covered by the system bars.</p>

<p>If you're creating a custom theme, set one of these themes as the parent theme or include the <code><a href="../../reference/android/R.attr.html#windowTranslucentNavigation">windowTranslucentNavigation</a></code> and <code><a href="../../reference/android/R.attr.html#windowTranslucentStatus">windowTranslucentStatus</a></code> style properties in your theme.</p>

<h3 id="NotificationListener">Enhanced notification listener</h3>

<p>Android 4.3 added the <code><a href="../../reference/android/service/notification/NotificationListenerService.html">NotificationListenerService</a></code> APIs, allowing apps to receive information about new notifications as they are posted by the system. In Android 4.4, notification listeners can retrieve additional metadata for the notification and complete details about the notification's actions:</p>

<p>The new <code><a href="../../reference/android/app/Notification.html#extras">Notification.extras</a></code> field includes a <code><a href="../../reference/android/os/Bundle.html">Bundle</a></code> to deliver your notification builder additional metadata such as <code><a href="../../reference/android/app/Notification.html#EXTRA_TITLE">EXTRA_TITLE</a></code> and <code><a href="../../reference/android/app/Notification.html#EXTRA_PICTURE">EXTRA_PICTURE</a></code>.
The new <code><a href="../../reference/android/app/Notification.Action.html">Notification.Action</a></code> class defines the characteristics of an action attached to the notification, which you can  retrieve from the new <code><a href="../../reference/android/app/Notification.html#actions">actions</a></code> field.</p>

<h3 id="DrawableMirroring">Drawable mirroring for RTL layouts</h3>

<p>On previous versions of Android, if your app includes images that should reverse their horizontal orientation for right-to-left layouts, you must include the mirrored image in a <code>drawables-ldrtl/</code> resource directory. Now, the system can automatically mirror images for you by enabling the <code><a href="../../reference/android/R.attr.html#autoMirrored">autoMirrored</a></code> attribute on a drawable resource or by calling <code><a href="../../reference/android/graphics/drawable/Drawable.html#setAutoMirrored(boolean)">setAutoMirrored()</a></code>. When enabled, the <code><a href="../../reference/android/graphics/drawable/Drawable.html">Drawable</a></code> is automatically mirrored when the layout direction is right-to-left.</p>

<h3 id="A11y">Accessibility</h3>

<p>The <code><a href="../../reference/android/view/View.html">View</a></code> class now allows you to declare "live regions" for portions of your UI that dynamically update with new text content, by adding the new <code><a href="../../reference/android/R.attr.html#accessibilityLiveRegion">accessibilityLiveRegion</a></code> attribute to your XML layout or calling <code><a href="../../reference/android/view/View.html#setAccessibilityLiveRegion(int)">setAccessibilityLiveRegion()</a></code>. For example, a login screen with a text field that displays an "incorrect password" notification should be marked as a live region, so the screen reader will recite the message when it changes.</p>

<p>Apps that provide an <a href="../../guide/topics/ui/accessibility/services.html">accessibility service</a> can now also enhance their capabilities with new APIs that provide information about view collections such as list or grid views using <code><a href="../../reference/android/view/accessibility/AccessibilityNodeInfo.CollectionInfo.html">AccessibilityNodeInfo.CollectionInfo</a></code> and <code><a href="../../reference/android/view/accessibility/AccessibilityNodeInfo.CollectionItemInfo.html">AccessibilityNodeInfo.CollectionItemInfo</a></code>.</p>









<h2 id="Permissions">App Permissions</h2>

<p>The following are new permissions that your app must request with the <a href="../../guide/topics/manifest/uses-permission-element.html"><code>&lt;uses-permission&gt;</code></a> tag to use certain new APIs:</p>

<dl>
<dt><code><a href="../../reference/android/Manifest.permission.html#INSTALL_SHORTCUT">INSTALL_SHORTCUT</a></code></dt>
<dd>Allows an application to install a shortcut in Launcher</dd>
<dt><code><a href="../../reference/android/Manifest.permission.html#UNINSTALL_SHORTCUT">UNINSTALL_SHORTCUT</a></code>    </dt>
<dd>Allows an application to uninstall a shortcut in Launcher</dd>
<dt><code><a href="../../reference/android/Manifest.permission.html#TRANSMIT_IR">TRANSMIT_IR</a></code></dt>
<dd>Allows an applicaiton to use the device's IR transmitter, if available</dd>
</dl>

<p class="note"><strong>Note:</strong> Beginning with Android 4.4, the platform no longer requires that your app acquire the <code><a href="../../reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE">WRITE_EXTERNAL_STORAGE</a></code> or <code><a href="../../reference/android/Manifest.permission.html#READ_EXTERNAL_STORAGE">READ_EXTERNAL_STORAGE</a></code> when you want to access your app-specific regions of the external storage using methods such as <code><a href="../../reference/android/content/Context.html#getExternalFilesDir(java.lang.String)">getExternalFilesDir()</a></code>. However, the permissions are still required if you want to access the shareable regions of the external storage, provided by <code><a href="../../reference/android/os/Environment.html#getExternalStoragePublicDirectory(java.lang.String)">getExternalStoragePublicDirectory()</a></code>. </p>





<h2 id="DeviceFeatures">Device Features</h2>

<p>The following are new device features that you can declare with the <a href="../../guide/topics/manifest/uses-feature-element.html"><code>&lt;uses-feature&gt;</code></a> tag to declare your app requirements and enable filtering on Google Play or check for at runtime:</p>

<dl>
<dt><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_CONSUMER_IR">FEATURE_CONSUMER_IR</a></code></dt>
<dd>The device is capable of communicating with consumer IR devices.</dd>
<dt><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_DEVICE_ADMIN">FEATURE_DEVICE_ADMIN</a></code></dt>
<dd>The device supports device policy enforcement via device admins.</dd>
<dt><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_NFC_HOST_CARD_EMULATION">FEATURE_NFC_HOST_CARD_EMULATION</a></code></dt>
<dd>The device supports host- based NFC card emulation.</dd>
<dt><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_SENSOR_STEP_COUNTER">FEATURE_SENSOR_STEP_COUNTER</a></code></dt>
<dd>The device includes a hardware step counter.</dd>
<dt><code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_SENSOR_STEP_DETECTOR">FEATURE_SENSOR_STEP_DETECTOR</a></code></dt>
<dd>The device includes a hardware step detector.</dd>
</dl>








<p style="margin-top:50px" class="note">For a detailed view of all API changes in Android 4.4, see the
<a href="../../sdk/api_diff/19/changes.html">API Differences Report</a>.</p>




    </div>

    

  </div> <!-- end jd-content -->



<div class="wrap">
  <div class="dac-footer">
    <div class="cols dac-footer-main">
      <div class="col-1of2">
        <a class="dac-footer-getnews" id="newsletter" data-modal-toggle="newsletter" href="javascript:;">Get news &amp; tips <span
          class="dac-fab dac-primary"><i class="dac-sprite dac-mail"></i></span></a>
      </div>
      <div class="col-1of2 dac-footer-reachout">
        <div class="dac-footer-contact">
          <a class="dac-footer-contact-link" href="http://android-developers.blogspot.com/">Blog</a>
          <a class="dac-footer-contact-link" href="../../support.html">Support</a>
        </div>
        <div class="dac-footer-social">
          <a class="dac-button-social dac-youtube dac-footer-social-link" href="https://www.youtube.com/user/androiddevelopers"><i class="dac-sprite dac-youtube"></i></a>
          <a class="dac-button-social dac-gplus dac-footer-social-link" href="https://plus.google.com/+AndroidDevelopers"><i class="dac-sprite dac-gplus"></i></a>
          <a class="dac-button-social dac-twitter dac-footer-social-link" href="https://twitter.com/AndroidDev"><i class="dac-sprite dac-twitter"></i></a>
        </div>
      </div>
    </div>

    <hr class="dac-footer-separator"/>

    
      <p class="dac-footer-copyright">
        
  Except as noted, this content is
  licensed under <a href="http://creativecommons.org/licenses/by/2.5/">
  Creative Commons Attribution 2.5</a>. For details and
  restrictions, see the <a href="../../license.html">Content
  License</a>.

      </p>
    

    <p class="dac-footer-links">
      <a href="../android.html">About Android</a>
      <a href="../../auto/index.html">Auto</a>
      <a href="../../tv/index.html">TV</a>
      <a href="../../wear/index.html">Wear</a>
      <a href="../../legal.html">Legal</a>

      <span id="language" class="locales">
        <select name="language" onchange="changeLangPref(this.value, true)">
          <option value="en" selected="selected">English</option>
          <option value="es">Español</option>
          <option value="in">Bahasa Indonesia</option>
          <option value="ja">日本語</option>
          <option value="ko">한국어</option>
          <option value="pt-br">Português Brasileiro</option>
          <option value="ru">Русский</option>
          <option value="vi">tiếng Việt</option>
          <option value="zh-cn">中文（简体)</option>
          <option value="zh-tw">中文（繁體)</option>
        </select>
      </span>
    </p>
  </div>
</div>
<!-- end footer -->



  



<div data-modal="newsletter" data-newsletter data-swap class="dac-modal newsletter">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <div class="dac-swap" data-swap-container>
          <section class="dac-swap-section dac-active dac-down">
            <h2 class="norule dac-modal-header-title" data-t="newsletter.title"></h2>
            <p class="dac-modal-header-subtitle" data-t="newsletter.requiredHint"></p>
          </section>
          <section class="dac-swap-section dac-up">
            <h2 class="norule dac-modal-header-title" data-t="newsletter.successTitle">Hooray!</h2>
          </section>
        </div>
      </header>
      <div class="dac-swap" data-swap-container>
        <section class="dac-swap-section dac-active dac-left">
          <form action="https://docs.google.com/forms/d/1QgnkzbEJIDu9lMEea0mxqWrXUJu0oBCLD7ar23V0Yys/formResponse" class="dac-form" method="post" target="dac-newsletter-iframe">
            <input type="hidden" name="entry.935454734" data-newsletter-language>
            <section class="dac-modal-content">
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-full-name" class="dac-form-floatlabel" data-t="newsletter.name">Full name</label>
                      <input type="text" class="dac-form-input" name="entry.1357890476" id="newsletter-full-name" required>
                      <span class="dac-form-required">*</span>
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-email" class="dac-form-floatlabel" data-t="newsletter.email">Email address</label>
                      <input type="email" class="dac-form-input" name="entry.472100832" id="newsletter-email" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-company" class="dac-form-floatlabel" data-t="newsletter.company">Company / developer name</label>
                      <input type="text" class="dac-form-input" name="entry.1664780309" id="newsletter-company">
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-play-store" class="dac-form-floatlabel" data-t="newsletter.appUrl">One of your Play Store app URLs</label>
                      <input type="url" class="dac-form-input" name="entry.47013838" id="newsletter-play-store" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                </div>
              </fieldset>
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <legend class="dac-form-legend"><span data-t="newsletter.business.label">Which best describes your business:</span><span class="dac-form-required">*</span>
                    </legend>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Apps" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-app" required>
                      <label for="newsletter-business-type-app" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-app" class="dac-form-label" data-t="newsletter.business.apps">Apps</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Games" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-games" required>
                      <label for="newsletter-business-type-games" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-games" class="dac-form-label" data-t="newsletter.business.games">Games</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Apps and Games" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-appsgames" required>
                      <label for="newsletter-business-type-appsgames" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-appsgames" class="dac-form-label" data-t="newsletter.business.both">Apps &amp; Games</label>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol newsletter-checkboxes">
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="entry.732309842" id="newsletter-add" required value="Add me to the mailing list for the monthly newsletter and occasional emails about development and Google Play opportunities.">
                          <label for="newsletter-add" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-add" class="dac-form-label dac-form-aside"><span data-t="newsletter.confirmMailingList"></span><span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="entry.2045036090" id="newsletter-terms" required value="I acknowledge that the information provided in this form will be subject to Google's privacy policy (https://www.google.com/policies/privacy/).">
                          <label for="newsletter-terms" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-terms" class="dac-form-label dac-form-aside"><span data-t="newsletter.privacyPolicy" data-t-html></span><span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fieldset>
            </section>
            <footer class="dac-modal-footer">
              <div class="cols">
                <div class="col-2of5">
                </div>
              </div>
              <button type="submit" value="Submit" class="dac-fab dac-primary dac-large dac-modal-action"><i class="dac-sprite dac-arrow-right"></i></button>
            </footer>
          </form>
        </section>
        <section class="dac-swap-section dac-right">
          <div class="dac-modal-content">
            <p class="newsletter-success-message" data-t="newsletter.successDetails"></p>
          </div>
        </section>
      </div>
    </div>
  </div>
</div>
<!-- end newsletter modal -->

<!-- start reset language header modal -->
<div data-modal="langform" class="dac-modal" id="langform">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title"></h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <fieldset class="dac-form-fieldset">
              <div class="cols">
                <div class="col-2of2 langform-leftCol">
                  <p id="resetLangText"></p>
                  <p id="resetLangCta"></p>
                </div>
              </div>
            </fieldset>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
              <button class="button dac-primary dac-modal-action lang yes" data-t="newsletter.resetLangButtonYes" data-modal-toggle></button>
              <button class="button dac-primary dac-modal-action lang no" data-t="newsletter.resetLangButtonNo" data-modal-toggle></button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div>
<!-- end langreset modal -->


</div> <!-- end body-content --> 




<script src="../../ajax/developer.android.com/ytblogger_lists_unified.js" defer></script>
<script src="/jd_lists_unified_en.js?v=17" defer></script>
<script src="/reference/lists.js?v=17" defer></script>
<script src="/reference/gcm_lists.js?v=17" defer></script>
<script src="/reference/gms_lists.js?v=17" defer></script>
<script>
  // Load localized metadata.
  (function(lang) {
    if (lang === 'en') { return; }

    // Write it to the document so it gets evaluated before DOMContentReady.
    document.write('<script src="/jd_lists_unified_' + lang + '.js?v=14" defer></' + 'script>');
  })(getLangPref())
</script>


</body>
</html>
