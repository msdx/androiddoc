<!DOCTYPE html>
























































































<html>
<head>

  

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<link rel="shortcut icon" type="image/x-icon" href="../../favicon.ico" />
<link rel="alternate" href="http://developer.android.com/topic/performance/optimizing-view-hierarchies.html" hreflang="en" />
<link rel="alternate" href="http://developer.android.com/intl/es/topic/performance/optimizing-view-hierarchies.html" hreflang="es" />
<link rel="alternate" href="http://developer.android.com/intl/id/topic/performance/optimizing-view-hierarchies.html" hreflang="id" />
<link rel="alternate" href="http://developer.android.com/intl/ja/topic/performance/optimizing-view-hierarchies.html" hreflang="ja" />
<link rel="alternate" href="http://developer.android.com/intl/ko/topic/performance/optimizing-view-hierarchies.html" hreflang="ko" />
<link rel="alternate" href="http://developer.android.com/intl/pt-br/topic/performance/optimizing-view-hierarchies.html" hreflang="pt-br" />
<link rel="alternate" href="http://developer.android.com/intl/ru/topic/performance/optimizing-view-hierarchies.html" hreflang="ru" />
<link rel="alternate" href="http://developer.android.com/intl/vi/topic/performance/optimizing-view-hierarchies.html" hreflang="vi" />
<link rel="alternate" href="http://developer.android.com/intl/zh-cn/topic/performance/optimizing-view-hierarchies.html" hreflang="zh-cn" />
<link rel="alternate" href="http://developer.android.com/intl/zh-tw/topic/performance/optimizing-view-hierarchies.html" hreflang="zh-tw" />


<title>Performance and View Hierarchies | Android Developers
</title>

<meta name="description" content="The way you manage the hierarchy of your View objects can have a substantial impact on your app’s performance. This page describes how to assess whether your view hierarchy is slowing your app down, and offers some strategies for addressing issues that…">

<!-- STYLESHEETS -->
<link rel="stylesheet"
href="http://fonts.googleapis.com/css?family=Roboto+Condensed">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold"
  title="roboto">

<link href="../../assets/css/default.css?v=16" rel="stylesheet" type="text/css">

<!-- JAVASCRIPT -->
<script src="../../assets/js/android_3p-bundle.js" type="text/javascript"></script>
<script type="text/javascript">
  var toRoot = "../../";
  var metaTags = [];
  var devsite = false;
  var useUpdatedTemplates = false;
</script>
<script src="../../assets/js/docs.js?v=17" type="text/javascript"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//../../ajax/www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5831155-1', 'android.com');
  ga('create', 'UA-49880327-2', 'android.com', {'name': 'universal'});  // New tracker);
  ga('send', 'pageview');
  ga('universal.send', 'pageview'); // Send page view for new tracker.
</script>

</head>

<body class="gc-documentation


" itemscope itemtype="http://schema.org/Article">
  
  <a name="top"></a>
  <!-- Header -->
  <div id="header-wrapper">
    <div class="dac-header " id="header">
      <div class="dac-header-inner">
        <a class="dac-nav-toggle" data-dac-toggle-nav href="javascript:;" title="Open navigation">
          <span class="dac-nav-hamburger">
            <span class="dac-nav-hamburger-top"></span>
            <span class="dac-nav-hamburger-mid"></span>
            <span class="dac-nav-hamburger-bot"></span>
          </span>
        </a>
        <a class="dac-header-logo" href="../../index.html">
          <img class="dac-header-logo-image" src="../../assets/images/android_logo.png"
              srcset="../../assets/images/android_logo@2x.png 2x"
              width="32" height="36" alt="Android" /> Developers
          </a>

        <ul class="dac-header-tabs">
          <li>
          <a class="dac-header-tab" href="../../design/index.html"
             zh-tw-lang="設計"
             zh-cn-lang="设计"
             ru-lang="Проектирование"
             ko-lang="디자인"
             ja-lang="設計"
             es-lang="Diseñar">Design</a>
          </li>
          <li>
          <a class="dac-header-tab" href="../../develop/index.html"
             zh-tw-lang="開發"
             zh-cn-lang="开发"
             ru-lang="Разработка"
             ko-lang="개발"
             ja-lang="開発"
             es-lang="Desarrollar">Develop</a>
          </li>
          <li>
          <a class="dac-header-tab" href="../../distribute/index.html"
             zh-tw-lang="發佈"
             zh-cn-lang="分发"
             ru-lang="Распространение"
             ko-lang="배포"
             ja-lang="配布"
             es-lang="Distribuir">Distribute</a>
          </li>
        </ul>

        <a class="dac-header-console-btn" href="https://play.google.com/apps/publish/">
          <span class="dac-sprite dac-google-play"></span>
          <span class="dac-visible-desktop-inline">Developer</span>
          Console
        </a>

        
        
        
  <form data-search class="dac-header-search">
    <button class="dac-header-search-close" data-search-close>
      <i class="dac-sprite dac-back-arrow"></i>
    </button>

    <div class="dac-header-search-inner">
      <i class="dac-sprite dac-search-white dac-header-search-icon"></i>
      <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q" class="dac-header-search-input" placeholder="Search" />
      <button class="dac-header-search-clear dac-hidden" data-search-clear>
        <i class="dac-sprite dac-close-black"></i>
      </button>
    </div>
  </form>

        
      </div><!-- end header-wrap.wrap -->
    </div><!-- end header -->
  </div> <!--end header-wrapper -->

  
  <!-- Navigation-->
  <nav class="dac-nav">
    <div class="dac-nav-dimmer" data-dac-toggle-nav></div>

    <div class="dac-nav-sidebar" data-swap data-dynamic="false" data-transition-speed="300" data-dac-nav>
      <div data-swap-container>
        
  
    <a class="dac-nav-back-button dac-swap-section dac-up dac-no-anim" data-swap-button href="javascript:;">
      <i class="dac-sprite dac-nav-back"></i> <span class="dac-nav-back-title">Back</span>
    </a>
    <div class="dac-nav-sub dac-swap-section dac-right dac-active" itemscope itemtype="http://schema.org/SiteNavigationElement">
      
        
  <!-- Fullscreen toggler -->
  <button data-fullscreen class="dac-nav-fullscreen">
    <i class="dac-sprite dac-fullscreen"></i>
  </button>

  <script>$('[data-fullscreen]').dacFullscreen();</script>
  <!-- End: Fullscreen toggler -->

  
    <div id="devdoc-nav">
      <div id="api-nav-header">
        <div id="api-level-toggle">
          <label for="apiLevelCheckbox" class="disabled"
                 title="Select your target API level to dim unavailable APIs">API level: </label>
          <div class="select-wrapper">
            <select id="apiLevelSelector">
              <!-- option elements added by buildApiLevelSelector() -->
            </select>
          </div>
        </div><!-- end toggle -->
        <div id="api-nav-title">Android APIs</div>
      </div><!-- end nav header -->
      <script>
        var SINCE_DATA = [  ];
        buildApiLevelSelector();
      </script>

      <div class="dac-reference-nav" data-reference-tree>
        <ul class="dac-reference-nav-list" data-reference-namespaces>
          
        </ul>

        
      </div>
    </div>
  

      
    </div>
  

        <ul id="dac-main-navigation" class="dac-nav-list dac-swap-section dac-left dac-no-anim">
        <li class="dac-nav-item home">
          <a class="dac-nav-link" href="../../index.html">Home</a>
          <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider"></i>
          <ul class="dac-nav-secondary about">
            <li class="dac-nav-item versions">
              <a class="dac-nav-link" href="../../about/versions/marshmallow/index.html">Android</a>
            </li>
            <li class="dac-nav-item wear">
              <a class="dac-nav-link" href="../../wear/index.html">Wear</a>
            </li>
            <li class="dac-nav-item tv">
              <a class="dac-nav-link" href="../../tv/index.html">TV</a>
            </li>
            <li class="dac-nav-item auto">
              <a class="dac-nav-link" href="../../auto/index.html">Auto</a>
            </li>
          </ul>
        </li>
        <li class="dac-nav-item design">
          <a class="dac-nav-link" href="../../design/index.html"
             zh-tw-lang="設計"
             zh-cn-lang="设计"
             ru-lang="Проектирование"
             ko-lang="디자인"
             ja-lang="設計"
             es-lang="Diseñar">Design</a>
        </li>
        <li class="dac-nav-item develop">
          <a class="dac-nav-link" href="../../develop/index.html"
             zh-tw-lang="開發"
             zh-cn-lang="开发"
             ru-lang="Разработка"
             ko-lang="개발"
             ja-lang="開発"
             es-lang="Desarrollar">Develop</a>
          <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider"></i>
          <ul class="dac-nav-secondary develop">
            <li class="dac-nav-item training">
              <a class="dac-nav-link" href="../../training/index.html"
                 zh-tw-lang="訓練課程"
                 zh-cn-lang="培训"
                 ru-lang="Курсы"
                 ko-lang="교육"
                 ja-lang="トレーニング"
                 es-lang="Capacitación">Training</a>
            </li>
            <li class="dac-nav-item guide">
              <a class="dac-nav-link" href="../../guide/index.html"
                 zh-tw-lang="API 指南"
                 zh-cn-lang="API 指南"
                 ru-lang="Руководства по API"
                 ko-lang="API 가이드"
                 ja-lang="API ガイド"
                 es-lang="Guías de la API">API Guides</a>
            </li>
            <li class="dac-nav-item reference">
              <a class="dac-nav-link" href="../../reference/packages.html"
                 zh-tw-lang="參考資源"
                 zh-cn-lang="参考"
                 ru-lang="Справочник"
                 ko-lang="참조문서"
                 ja-lang="リファレンス"
                 es-lang="Referencia">Reference</a>
            </li>
            <li class="dac-nav-item tools">
              <a class="dac-nav-link" href="../../sdk/index.html"
                 zh-tw-lang="相關工具"
                 zh-cn-lang="工具"
                 ru-lang="Инструменты"
                 ko-lang="도구"
                 ja-lang="ツール"
                 es-lang="Herramientas">Tools</a></li>
            <li class="dac-nav-item google">
              <a class="dac-nav-link" href="../../google/index.html">Google Services</a>
            </li>
            
          </ul>
        </li>
        <li class="dac-nav-item distribute">
          <a class="dac-nav-link" href="../../distribute/googleplay/index.html"
             zh-tw-lang="發佈"
             zh-cn-lang="分发"
             ru-lang="Распространение"
             ko-lang="배포"
             ja-lang="配布"
             es-lang="Distribuir">Distribute</a>
          <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider"></i>
          <ul class="dac-nav-secondary distribute">
            <li class="dac-nav-item googleplay">
              <a class="dac-nav-link" href="../../distribute/googleplay/index.html">Google Play</a></li>
            <li class="dac-nav-item essentials">
              <a class="dac-nav-link" href="../../distribute/essentials/index.html">Essentials</a></li>
            <li class="dac-nav-item users">
              <a class="dac-nav-link" href="../../distribute/users/index.html">Get Users</a></li>
            <li class="dac-nav-item engage">
              <a class="dac-nav-link" href="../../distribute/engage/index.html">Engage &amp; Retain</a></li>
            <li class="dac-nav-item monetize">
              <a class="dac-nav-link" href="../../distribute/monetize/index.html">Earn</a>
            </li>
            <li class="dac-nav-item analyze">
              <a class="dac-nav-link" href="../../distribute/analyze/index.html">Analyze</a>
            </li>
            <li class="dac-nav-item stories">
              <a class="dac-nav-link" href="../../distribute/stories/index.html">Stories</a>
            </li>
          </ul>
        </li>
        <li class="dac-nav-item preview">
          <a class="dac-nav-link" href="../../preview/index.html">Preview</a>
        </li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- end navigation-->
  

<!-- Nav Setup -->
<script>$('[data-dac-nav]').dacNav();</script>



  
    
  <div class="wrap clearfix" id="body-content">

  

  
  <div id="search-results" class="dac-search-results">
    <div id="dac-search-results-history" class="dac-search-results-history">
      <div class="wrap dac-search-results-history-wrap">
        <div class="cols">
          <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
            <h2>Most visited</h2>
            <div class="resource-flow-layout" data-history-query="history:most/visited" data-maxresults="3" data-cardsizes="18x2"></div>
          </div>

          <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
            <h2>Recently visited</h2>
            <div class="resource-flow-layout cols" data-history-query="history:recent" data-allow-duplicates="true" data-maxresults="3" data-cardsizes="18x2"></div>
          </div>
        </div>
      </div>
    </div>

    <div id="dac-search-results-content" class="dac-search-results-content">
      <div class="dac-search-results-metadata wrap">
        <div class="dac-search-results-for">
          <h2>Results for <span id="search-results-for"></span></h2>
        </div>

        <div id="dac-search-results-hero"></div>

        <div class="dac-search-results-hero cols">
          <div id="dac-search-results-reference" class="col-3of6 col-tablet-1of2 col-mobile-1of1">
            <div class="suggest-card reference no-display">
              <ul class="dac-search-results-reference">
              </ul>
            </div>
          </div>
          <div id="dac-custom-search-results"></div>
        </div>
      </div>

    </div>
  </div>





  
    
      
        <ul class="dac-header-crumbs">
          
        </ul>

        <!-- Breadcrumb Setup -->
        <p><script>$('.dac-nav-list').dacCurrentPage().dacCrumbs();</script></p>

        <h1 itemprop="name" >Performance and View Hierarchies</h1>
      
    
  


  

  
  <div id="jd-content">
    <div class="jd-descr" itemprop="articleBody">
    

    <div id="qv-wrapper">
<div id="qv">

<h2>In this document</h2>
<ol>
<li><a href="#lmp">Layout-and-Measure Performance</a>
  <ol>
    <li><a href="#managing">Managing complexity: layouts matter</a></li>
    <li><a href="#double">Double taxation</a></li>
  </ol>
</li>
<li><a href="#dx">Diagnosing View Hierarchy Issues</a>
  <ol>
    <li><a href="#systrace">Systrace</a></li>
    <li><a href="#profile">Profile GPU rendering</a></li>
    <li><a href="#lint">Lint</a></li>
    <li><a href="#hv">Hierarchy Viewer</a></li>
  </ol>
</li>
<li><a href="#solving">Solving View Hierarchy Issues</a>
   <ol>
      <li><a href="#removing">Removing redundant nested layouts</a></li>
      <li><a href="#cheaper">Adopting a cheaper layout</a></li>
   </ol>
      </li>
</ol>
</div>
</div>


<p>
The way you manage the hierarchy of your <code><a href="../../reference/android/view/View.html">View</a></code> objects can
have a substantial impact on your app’s performance. This page describes how to
assess whether your view hierarchy is slowing your app down, and offers some
strategies for addressing issues that may arise.
</p>

<h2 id="lmp">Layout and Measure Performance</h2>
<p>
The rendering pipeline includes a <em>layout-and-measure</em>
stage, during which the system appropriately positions the relevant items in
your view hierarchy. The measure part of this stage determines the sizes and
boundaries of <code><a href="../../reference/android/view/View.html">View</a></code> objects. The layout part determines where on the screen to
position the <code><a href="../../reference/android/view/View.html">View</a></code> objects.
</p>

<p>
Both of these pipeline stages incur some small cost per view or layout that they
process. Most of the time, this cost is minimal and doesn’t noticeably affect
performance. However, it can be greater when an app adds or removes View
objects, such as when a <code><a href="../../reference/android/support/v7/widget/RecyclerView.html">RecyclerView</a></code>
object recycles them or reuses them. The
cost can also be higher if a <code><a href="../../reference/android/view/View.html">View</a></code> object needs to consider
resizing to main its constraints: For example, if your app calls
<code><a href="../../reference/android/widget/TextView.html#setText(char[], int, int)">SetText()</a></code> on a
<code><a href="../../reference/android/view/View.html">View</a></code> object that wraps text, the
<code><a href="../../reference/android/view/View.html">View</a></code> may need to resize.
</p>

<p>
If cases like these take too long, they can prevent a frame from rendering
within the allowed 16ms, so that frames are dropped, and animation becomes
janky.
</p>

<p>
Because you cannot move these operations to a worker thread&mdash;your app must
process them on the main thread&mdash;your best bet is to optimize them so that
they can take as little time as possible.
</p>

<h3 id="managing">Managing complexity: layouts matter</h3>

<p>
Android <a
href="../../guide/topics/ui/declaring-layout.html">Layouts</a>
allow you to nest UI objects in the view hierarchy. This nesting can also impose
a layout cost. When your app processes an object for layout, the app performs
the same process on all children of the layout as well. For a complicated
layout, sometimes a cost only arises the first time the system computes the
layout. For instance, when your app recycles a complex list item in a
<code><a href="../../reference/android/support/v7/widget/RecyclerView.html">RecyclerView</a></code> object, the
system needs to lay out all of the objects. In another example, trivial changes
can propagate up the chain toward the parent
until they reach an object that doesn’t affect the size of the parent.
</p>

<p>
The most common case in which layout takes an especially long time is when
hierarchies of <code><a href="../../reference/android/view/View.html">View</a></code> objects are nested within one another. Each nested layout
object adds cost to the layout stage. The flatter your hierarchy, the less
time that it takes for the layout stage to complete.
</p>

<p>
If you are using the <code><a href="../../reference/android/widget/RelativeLayout.html">RelativeLayout</a></code> class, you may be able to achieve the same
effect, at lower cost, by using nested, unweighted
<code><a href="../../reference/android/widget/LinearLayout.html">LinearLayout</a></code> views instead. Additionally, if your app
targets Android N (API level 24), it is likely that
you can use a special layout editor to create a <a
href="http://tools.android.com/tech-docs/layout-editor"><code>ConstraintLayout</code></a>
object instead of <code><a href="../../reference/android/widget/RelativeLayout.html">RelativeLayout</a></code>. Doing so allows you
to avoid many of the issues this section
describes. The <a
href="http://tools.android.com/tech-docs/layout-editor"><code>ConstraintLayout</code></a>
class offers similar layout control, but
with much-improved performance. This class uses its own constraint-solving
system to resolve relationships between views in a very different way from
standard layouts.
</p>

<h3 id="double">Double Taxation</h3>

<p>
Typically, the framework executes the <a
href="../../guide/topics/ui/declaring-layout.html">layout</a>
or measure stage in a single pass and quite quickly. However, with some more
complicated layout cases, the framework may have to iterate multiple times on
the layout or measure stage before ultimately positioning the elements. Having
to perform more than one layout-and-measure iteration is referred to as
<em>double taxation.</em>
</p>

<p>
For example, when you use the <code><a href="../../reference/android/widget/RelativeLayout.html">RelativeLayout</a></code> container, which allows you to
position <code><a href="../../reference/android/view/View.html">View</a></code> objects with respect to the positions of other <code><a href="../../reference/android/view/View.html">View</a></code> objects, the
framework performs the following actions:
</p>

<ol style="1">
   <li>Executes a layout-and-measure pass, during which the framework calculates
each child object’s position and size, based on each child’s request.
   <li>Uses this data, also taking object weights into account, to figure out the
proper position of correlated views.
   <li>Performs a second layout pass to finalize the objects’ positions.
   <li>Goes on to the next stage of the rendering process.</li></ol>

<p>
The more levels your view hierarchy has, the greater the potential performance
penalty.
</p>

<p>
Containers other than <code><a href="../../reference/android/widget/RelativeLayout.html">RelativeLayout</a></code> may also give rise to double taxation. For
example:
</p>

<ul>
   <li>A <code><a href="../../reference/android/widget/LinearLayout.html">LinearLayout</a></code> view
could result in a double layout-and-measure pass if you make it horizontal.
A double layout-and-measure pass may also occur in a vertical orientation if you
add <a
href="../../reference/android/widget/LinearLayout.html#attr_android:measureWithLargestChild">measureWithLargestChild</a>,
in which case the framework may need to do a second pass to resolve the proper
sizes of objects.
   <li>The <code><a href="../../reference/android/widget/GridLayout.html">GridLayout</a></code>
has a similar issue. While this container also allows relative positioning, it
normally avoids double taxation by pre-processing the positional relationships
among child views. However, if the layout uses weights or fill with the
<code><a href="../../reference/android/view/Gravity.html">Gravity</a></code> class, the
benefit of that preprocessing is lost, and the framework may have to perform
multiple passes if it the container were a <code><a href="../../reference/android/widget/RelativeLayout.html">RelativeLayout</a></code>.</li>
</ul>
<p>
Multiple layout-and-measure passes are not, in themselves, a performance burden.
But they can become so if they’re in the wrong spot. You should be wary of
situations where one of the following conditions applies to your container:
</p>

<ul>
   <li>It is a root element in your view hierarchy.
   <li>It has a deep view hierarchy beneath it.
   <li>It is nested.
   <li>There are many instances of it populating the screen, similar to children
   in a <code><a href="../../reference/android/widget/ListView.html">ListView</a></code> object.</li>
</ul>

<h2 id="dx">Diagnosing View Hierarchy Issues</h2>

<p>
Layout performance is a complex problem with many facets. There are a couple of
tools that can give you solid indications about where performance bottlenecks
are occurring. A few other tools provide less definitive information, but can
also provide helpful hints.
</p>

<p>
<h3 id="systrace">Systrace</h3>
</p>

<p>
One tool that provides excellent data about performance is <a
href="../../studio/profile/systrace.html">Systrace</a>,
which is built into Android Studio. The Systrace tool allows you to collect and
inspect timing information across an entire Android device, allowing you to see
specifically where performance bottlenecks arise. For more information about
Systrace, see <a href=”{docRoot}<a href="../../studio/profile/systrace.html">
Analyze UI Performance with Systrace</a>.
</p>

<h3 id="profile">Profile GPU rendering</h3>

<p>
The other tool most likely to provide you with concrete information about
performance bottlenecks is the on-device <a
href="../../studio/profile/dev-options-rendering.html">
Profile GPU rendering</a> tool, available on devices powered by Android 6.0 (API
level 23) and later.  This tool allows you to see how long the layout-and-measurestage is
 taking for <a href="https://youtu.be/erGJw8WDV74">each frame
of rendering</a>. This data can help you diagnose runtime performance issues,
and help you determine what, if any layout-and-measure issues you need to
address.
</p>

<p>
In its graphical representation of the data it captures, <a
href="../../studio/profile/dev-options-rendering.html">Profile
GPU rendering</a> uses the color blue to represent layout time. For more
information about how to use this tool, see <a
href="../../studio/profile/dev-options-rendering.html">Profile
GPU Rendering Walkthrough.</a>
</p>

<h3 id="lint">Lint</h3>

<p>
Android Studio’s <a
href="../../studio/write/lint.html">Lint</a> tool can
help you gain a sense of inefficiencies in the view hierarchy. To use this tool,
select <strong>Analyze > Inspect Code</strong>, as shown in Figure 1.
</p>

  <img src="../../topic/performance/images/lint-inspect-code.png">
  <p class="img-caption">
    <strong>Figure 1.</strong> Locating <strong>Inspect Code</strong> in the
Android Studio.
  </p>

<p>
Information about various layout items appears under
<em>Android > Lint > Performance</em>. To see more detail,
you can click on each item to expand it, and see more
information in the pane on the right side of the screen.
Figure 2 shows an example of such a display.
</p>

  <img src="../../topic/performance/images/lint-display.png">
  <p class="img-caption">
    <strong>Figure 2.</strong> Viewing information about specific
issues that the lint tool has identified.
  </p>


<p>
Clicking on one of these items reveals, in the pane to the right, the problem
associated with that item.
</p>

<p>
To understand more about specific topics and issues in this area, see the <a
href="../../studio/write/lint.html">Lint
</a>documentation.
</p>

<h3 id="hv">Hierarchy Viewer</h3>

<p>
Android Studio’s <a
href="../../studio/profile/hierarchy-viewer.html">Hierarchy
Viewer</a> tool provides a visual representation of your app’s view hierarchy.
It is a good way to navigate the hierarchy of your app, providing a clear visual
representation of a particular view’s parent chain, and allowing you to inspect
the layouts that your app constructs.
</p>

<p>
The views that Hierarchy Viewer presents can also help identify performance
problems arising from double taxation. It can also provide an easy way for you
to identify deep chains of nested layouts, or layout areas with a large amount
of nested children, another potential source of performance costs. In these
scenarios, the layout-and-measure stages can be particularly costly,
resulting in performance issues.
</p>

<p>
You can also can get a sense of relative time taken by layout-and-measure
operations by clicking the “profile node” button.
</p>

<p>
For more information about Hierarchy Viewer, see <a
href="../../studio/profile/optimize-ui.html#HierarchyViewer">Optimizing
Your UI</a>.
</p>

<h2 id="solving">Solving View Hierarchy Issues</h2>

<p>
The fundamental concept behind solving performance problems that arise from view
hierarchies is simple in concept, but more difficult in practice. Preventing
view hierarchies from imposing performance penalties encompasses the dual goals
of flattening your view hierarchy and reducing double taxation. This section
discusses some strategies for pursuing these goals.
</p>

<h3 id="removing">Removing redundant nested layouts</h3>

<p>
Developers often use more nested layouts than necessary. For example, a
<code><a href="../../reference/android/widget/RelativeLayout.html">RelativeLayout</a></code> container might contain a single child that is also a
<code><a href="../../reference/android/widget/RelativeLayout.html">RelativeLayout</a></code> container. This nesting amounts to redundancy, and adds
unnecessary cost to the view hierarchy.
</p>

<p>
Lint can often flag this problem for you, reducing debugging time.
</p>

<h3>Adopting Merge/Include </h3>
<p>
One frequent cause of redundant nested layouts is the <a
href="../../training/improving-layouts/reusing-layouts.html">
&lt;include&gt;
tag</a>. For example, you may define a re-usable layout as follows:
</p>

<pre class="prettyprint">
&lt;LinearLayout&gt;
    &lt;!-- some stuff here --&gt;
&lt;/LinearLayout&gt;
&lt;/pre&gt;
</pre>

<p>
And then an include tag to add this item to the parent container:
</p>

<pre class="prettyprint">
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/app_bg"
    android:gravity="center_horizontal"&gt;

    &lt;include layout="@layout/titlebar"/&gt;

    &lt;TextView android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:text="@string/hello"
              android:padding="10dp" /&gt;

    ...

&lt;/LinearLayout&gt;
</pre>

<p>
The include unnecessarily nests the first layout within the second layout.
</p>

<p>
The <a
href="../../training/improving-layouts/reusing-layouts.html#Merge">merge
</a>tag can help prevent this issue. For information about this tag, see <a
href="../../training/improving-layouts/reusing-layouts.html#Merge">Re-using
Layouts with &lt;include&gt;</a>.
</p>

<h3 id="cheaper">Adopting a cheaper layout</h3>

<p>
You may not be able to adjust your existing layout scheme so that it doesn’t
contain redundant layouts. In certain cases, the only solution may be to flatten
your hierarchy by switching over to an entirely different layout type.
</p>

<p>
For example, you may find that a <code><a href="../../reference/android/widget/TableLayout.html">TableLayout</a></code>
provides the same functionality as a more complex layout with many
positional dependencies. In the N release of Android, the
<a
href="http://tools.android.com/tech-docs/layout-editor"><code>ConstraintLayout</code></a> class provides similar functionality to
<code><a href="../../reference/android/widget/RelativeLayout.html">RelativeLayout</a></code>, but at a significantly lower cost.
</p>

    </div>

    

  </div> <!-- end jd-content -->



<div class="wrap">
  <div class="dac-footer">
    <div class="cols dac-footer-main">
      <div class="col-1of2">
        <a class="dac-footer-getnews" id="newsletter" data-modal-toggle="newsletter" href="javascript:;">Get news &amp; tips <span
          class="dac-fab dac-primary"><i class="dac-sprite dac-mail"></i></span></a>
      </div>
      <div class="col-1of2 dac-footer-reachout">
        <div class="dac-footer-contact">
          <a class="dac-footer-contact-link" href="http://android-developers.blogspot.com/">Blog</a>
          <a class="dac-footer-contact-link" href="../../support.html">Support</a>
        </div>
        <div class="dac-footer-social">
          <a class="dac-button-social dac-youtube dac-footer-social-link" href="https://www.youtube.com/user/androiddevelopers"><i class="dac-sprite dac-youtube"></i></a>
          <a class="dac-button-social dac-gplus dac-footer-social-link" href="https://plus.google.com/+AndroidDevelopers"><i class="dac-sprite dac-gplus"></i></a>
          <a class="dac-button-social dac-twitter dac-footer-social-link" href="https://twitter.com/AndroidDev"><i class="dac-sprite dac-twitter"></i></a>
        </div>
      </div>
    </div>

    <hr class="dac-footer-separator"/>

    
      <p class="dac-footer-copyright">
        
  Except as noted, this content is
  licensed under <a href="http://creativecommons.org/licenses/by/2.5/">
  Creative Commons Attribution 2.5</a>. For details and
  restrictions, see the <a href="../../license.html">Content
  License</a>.

      </p>
    

    <p class="dac-footer-links">
      <a href="../../about/android.html">About Android</a>
      <a href="../../auto/index.html">Auto</a>
      <a href="../../tv/index.html">TV</a>
      <a href="../../wear/index.html">Wear</a>
      <a href="../../legal.html">Legal</a>

      <span id="language" class="locales">
        <select name="language" onchange="changeLangPref(this.value, true)">
          <option value="en" selected="selected">English</option>
          <option value="es">Español</option>
          <option value="in">Bahasa Indonesia</option>
          <option value="ja">日本語</option>
          <option value="ko">한국어</option>
          <option value="pt-br">Português Brasileiro</option>
          <option value="ru">Русский</option>
          <option value="vi">tiếng Việt</option>
          <option value="zh-cn">中文（简体)</option>
          <option value="zh-tw">中文（繁體)</option>
        </select>
      </span>
    </p>
  </div>
</div>
<!-- end footer -->



  



<div data-modal="newsletter" data-newsletter data-swap class="dac-modal newsletter">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <div class="dac-swap" data-swap-container>
          <section class="dac-swap-section dac-active dac-down">
            <h2 class="norule dac-modal-header-title" data-t="newsletter.title"></h2>
            <p class="dac-modal-header-subtitle" data-t="newsletter.requiredHint"></p>
          </section>
          <section class="dac-swap-section dac-up">
            <h2 class="norule dac-modal-header-title" data-t="newsletter.successTitle">Hooray!</h2>
          </section>
        </div>
      </header>
      <div class="dac-swap" data-swap-container>
        <section class="dac-swap-section dac-active dac-left">
          <form action="https://docs.google.com/forms/d/1QgnkzbEJIDu9lMEea0mxqWrXUJu0oBCLD7ar23V0Yys/formResponse" class="dac-form" method="post" target="dac-newsletter-iframe">
            <input type="hidden" name="entry.935454734" data-newsletter-language>
            <section class="dac-modal-content">
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-full-name" class="dac-form-floatlabel" data-t="newsletter.name">Full name</label>
                      <input type="text" class="dac-form-input" name="entry.1357890476" id="newsletter-full-name" required>
                      <span class="dac-form-required">*</span>
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-email" class="dac-form-floatlabel" data-t="newsletter.email">Email address</label>
                      <input type="email" class="dac-form-input" name="entry.472100832" id="newsletter-email" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-company" class="dac-form-floatlabel" data-t="newsletter.company">Company / developer name</label>
                      <input type="text" class="dac-form-input" name="entry.1664780309" id="newsletter-company">
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-play-store" class="dac-form-floatlabel" data-t="newsletter.appUrl">One of your Play Store app URLs</label>
                      <input type="url" class="dac-form-input" name="entry.47013838" id="newsletter-play-store" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                </div>
              </fieldset>
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <legend class="dac-form-legend"><span data-t="newsletter.business.label">Which best describes your business:</span><span class="dac-form-required">*</span>
                    </legend>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Apps" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-app" required>
                      <label for="newsletter-business-type-app" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-app" class="dac-form-label" data-t="newsletter.business.apps">Apps</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Games" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-games" required>
                      <label for="newsletter-business-type-games" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-games" class="dac-form-label" data-t="newsletter.business.games">Games</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Apps and Games" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-appsgames" required>
                      <label for="newsletter-business-type-appsgames" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-appsgames" class="dac-form-label" data-t="newsletter.business.both">Apps &amp; Games</label>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol newsletter-checkboxes">
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="entry.732309842" id="newsletter-add" required value="Add me to the mailing list for the monthly newsletter and occasional emails about development and Google Play opportunities.">
                          <label for="newsletter-add" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-add" class="dac-form-label dac-form-aside"><span data-t="newsletter.confirmMailingList"></span><span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="entry.2045036090" id="newsletter-terms" required value="I acknowledge that the information provided in this form will be subject to Google's privacy policy (https://www.google.com/policies/privacy/).">
                          <label for="newsletter-terms" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-terms" class="dac-form-label dac-form-aside"><span data-t="newsletter.privacyPolicy" data-t-html></span><span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fieldset>
            </section>
            <footer class="dac-modal-footer">
              <div class="cols">
                <div class="col-2of5">
                </div>
              </div>
              <button type="submit" value="Submit" class="dac-fab dac-primary dac-large dac-modal-action"><i class="dac-sprite dac-arrow-right"></i></button>
            </footer>
          </form>
        </section>
        <section class="dac-swap-section dac-right">
          <div class="dac-modal-content">
            <p class="newsletter-success-message" data-t="newsletter.successDetails"></p>
          </div>
        </section>
      </div>
    </div>
  </div>
</div>
<!-- end newsletter modal -->

<!-- start reset language header modal -->
<div data-modal="langform" class="dac-modal" id="langform">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title"></h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <fieldset class="dac-form-fieldset">
              <div class="cols">
                <div class="col-2of2 langform-leftCol">
                  <p id="resetLangText"></p>
                  <p id="resetLangCta"></p>
                </div>
              </div>
            </fieldset>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
              <button class="button dac-primary dac-modal-action lang yes" data-t="newsletter.resetLangButtonYes" data-modal-toggle></button>
              <button class="button dac-primary dac-modal-action lang no" data-t="newsletter.resetLangButtonNo" data-modal-toggle></button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div>
<!-- end langreset modal -->


</div> <!-- end body-content --> 




<script src="../../ajax/developer.android.com/ytblogger_lists_unified.js" defer></script>
<script src="/jd_lists_unified_en.js?v=17" defer></script>
<script src="/reference/lists.js?v=17" defer></script>
<script src="/reference/gcm_lists.js?v=17" defer></script>
<script src="/reference/gms_lists.js?v=17" defer></script>
<script>
  // Load localized metadata.
  (function(lang) {
    if (lang === 'en') { return; }

    // Write it to the document so it gets evaluated before DOMContentReady.
    document.write('<script src="/jd_lists_unified_' + lang + '.js?v=14" defer></' + 'script>');
  })(getLangPref())
</script>


</body>
</html>
